/*! For license information please see main-es2015.516d1c60e21bc18b5384.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}n.d(e,"a",(function(){return o}));class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),y=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=v.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},g=null,m=!0,_=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,g=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?g=t:(g=null,f.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===g&&!0===f.get("logging_enabled")&&_(!0)),g){var n=v.apply(null,t);g(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,Object(i.f)([t],e))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(i.f)(t));d.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(i.f)(t));d.warn(n)},T=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},I="[MIN_NAME]",S="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===I||e===S)return-1;if(e===I||t===S)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},A=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=A(t[e[i]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function R(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P=function(t){var e,n,r,i,s;Object(o.e)(!T(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout((function(){throw O("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new V("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function H(t){return t.pieces_.length-t.pieceNum_}function B(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Q(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function G(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function W(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function X(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return X(B(t),B(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $(t,e){for(var n=G(t,0),r=G(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Z(t,e){if(H(t)!==H(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function J(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(H(t)>H(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt,et,nt,rt,it,ot,st,at,ut,ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=G(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ht=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return R(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),ft=function(t,e){var n=dt(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ht(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new V(n.pathString)}},dt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):O("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},pt=/[\[\].#$\/\u0000-\u001F\u007F]/,yt=/[\[\].#$\u0000-\u001F\u007F]/,vt=function(t){return"string"==typeof t&&0!==t.length&&!pt.test(t)},gt=function(t){return"string"==typeof t&&0!==t.length&&!yt.test(t)},mt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!T(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},_t=function(t,e,n,r,i){i&&void 0===n||bt(Object(o.m)(t,e,i),n,r)},bt=function(t,e,n){var r=n instanceof V?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(T(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Object(o.E)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(R(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!vt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),bt(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},wt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];R(n,(function(t,e){var n=new V(t);if(bt(s,e,K(r,n)),".priority"===z(n)&&!mt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=G(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!vt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort($);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&J(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Et=function(t,e,n,r){if(!r||void 0!==n){if(T(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mt(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ct=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ot=function(t,e,n,r){if(!(r&&void 0===n||vt(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tt=function(t,e,n,r){if(!(r&&void 0===n||gt(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},It=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Tt(t,e,n,r)},St=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},xt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!vt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gt(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Nt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},kt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),St("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),St("OnDisconnect.set",this.path_),_t("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),St("OnDisconnect.setWithPriority",this.path_),_t("OnDisconnect.setWithPriority",1,t,this.path_,!1),Et("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),St("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),At=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),jt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Rt=(tt=0,et=[],function(t){var e,n=t===tt;tt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=jt.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===et[e];e--)et[e]=0;et[e]++}else for(e=0;e<12;e++)et[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=jt.charAt(et[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),Pt=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return S;var o=jt.charAt(jt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Dt=function(t){if("-2147483648"===t)return I;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=jt.charAt(jt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Mt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Lt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Mt(I,t),r=new Mt(I,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Mt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return nt},set:function(t){nt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(S,nt)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Mt(t,nt)},e.prototype.toString=function(){return".key"},e}(Lt),Vt=new Ft,Ut=function(t){return"number"==typeof t?"number:"+P(t):"string:"+t},qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===rt||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ht=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Y(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===H(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(B(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ut(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?P(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Bt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return new Mt(S,new Ht("[PRIORITY-POST]",st))},e.prototype.makePost=function(t,e){var n=ot(t);return new Mt(e,new Ht("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Lt)),zt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Qt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Wt.EMPTY_NODE,this.right=null!=o?o:Wt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Wt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Wt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Gt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Qt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Wt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Qt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new zt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new zt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Gt,t}(),Kt=Math.log(2),Yt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Kt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Xt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Qt(s,o.node,Qt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Qt(s,o.node,Qt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Qt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Qt.BLACK):(a(h,Qt.BLACK),a(h,Qt.RED))}return o}(new Yt(t.length));return new Wt(r||e,o)},$t={},Zt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)($t&&Bt,"ChildrenNode.ts has not been loaded"),at=at||new t({".priority":$t},{".priority":Bt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Wt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Mt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Xt(s,e.getCompare()):$t;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,(function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===$t){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Mt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Xt(a,s.getCompare())}return $t}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Mt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,(function(t){if(t===$t)return t;var r=n.get(e.name);return r?t.remove(new Mt(e.name,r)):t})),this.indexSet_)},t}();function Jt(t,e){return x(t.name,e.name)}function te(t,e){return x(t,e)}var ee=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ut||(ut=new t(new Wt(te),null,Zt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ut},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ut:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(B(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Mt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ut:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.e)(".priority"!==q(t)||1===H(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(B(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Bt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ut(this.getPriority().val())+":"),this.forEachChild(Bt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Mt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Mt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Mt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Mt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ne?-1:0},t.prototype.withIndex=function(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Vt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Bt),r=e.getIterator(Bt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Vt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ne=new(function(t){function e(){return t.call(this,new Wt(te),ee.EMPTY_NODE,Zt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ee.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ee));function re(t,e){if(void 0===e&&(e=null),null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Ht(t,re(e));if(t instanceof Array){var n=ee.EMPTY_NODE;return R(t,(function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=re(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(re(e))}var r=[],i=!1;if(R(t,(function(t,e){if("."!==t.substring(0,1)){var n=re(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Mt(t,n)))}})),0===r.length)return ee.EMPTY_NODE;var s=Xt(r,Jt,(function(t){return t.name}),te);if(i){var a=Xt(r,Bt.getCompare());return new ee(s,re(e),new Zt({".priority":a},{".priority":Bt}))}return new ee(s,re(e),Zt.Default)}Object.defineProperties(Mt,{MIN:{value:new Mt(I,ee.EMPTY_NODE)},MAX:{value:new Mt(S,ne)}}),Ft.__EMPTY_NODE=ee.EMPTY_NODE,Ht.__childrenNodeConstructor=ee,rt=ne,function(t){st=t}(ne),function(t){ot=t}(re);var ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Mt.MIN},e.prototype.maxPost=function(){return Mt.MAX},e.prototype.makePost=function(t,e){var n=re(t);return new Mt(e,n)},e.prototype.toString=function(){return".value"},e}(Lt)),oe=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!Y(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=re(t),r=ee.EMPTY_NODE.updateChild(this.indexPath_,n);return new Mt(e,r)},e.prototype.maxPost=function(){var t=ee.EMPTY_NODE.updateChild(this.indexPath_,ne);return new Mt(S,t)},e.prototype.toString=function(){return G(this.indexPath_,0).join("/")},e}(Lt),se=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),Tt("DataSnapshot.child",1,e,!1);var n=new V(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Bt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Tt("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Bt))}))},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ae=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),ue=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ce=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ae("value",this,new se(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),le=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ae(t.type,this,new se(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function he(t){return{type:"value",snapshotNode:t}}function fe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function de(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ye,ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(de(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(fe(e,n)):s.trackChildChange(pe(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Bt,(function(t,r){e.hasChild(t)||n.trackChildChange(de(t,r))})),e.isLeafNode()||e.forEachChild(Bt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(pe(e,r,i))}else n.trackChildChange(fe(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ee.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ge=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Mt(e,n))||(n=ee.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ee.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ee.EMPTY_NODE);var i=this;return e.forEachChild(Bt,(function(t,e){i.matches(new Mt(t,e))||(r=r.updateImmediateChild(t,ee.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),me=function(){function t(t){this.rangedFilter_=new ge(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Mt(e,n))||(n=ee.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ee.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ee.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ee.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ee.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new Mt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(pe(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(de(e,f));var y=u.updateImmediateChild(e,ee.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(fe(d.name,d.node)),y.updateImmediateChild(d.name,d.node)):y}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(de(l.name,l.node)),i.trackChildChange(fe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ee.EMPTY_NODE)):t},t}(),_e=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:I},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:S},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Bt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function be(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function we(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Ee(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ce(t,e,n){var r;return t.index_===Vt?("string"==typeof e&&(e=Pt(e)),r=Ee(t,e,n)):r=Ee(t,e,null==n?S:Pt(n)),r.startAfterSet_=!0,r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Te(t,e,n){var r;return t.index_===Vt?("string"==typeof e&&(e=Dt(e)),r=Oe(t,e,n)):r=Oe(t,e,null==n?I:Dt(n)),r.endBeforeSet_=!0,r}function Ie(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Bt?e="$priority":t.index_===ie?e="$value":t.index_===Vt?e="$key":(Object(o.e)(t.index_ instanceof oe,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var xe=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(ye,"Reference.ts has not been loaded"),ye},set:function(t){ye=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==I)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==S)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Bt){if(null!=e&&!mt(e)||null!=n&&!mt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof oe||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),Ct("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new ce(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new le(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),Ct("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new ce(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new le(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Ct("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,be(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,we(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Tt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(e);if(Y(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new oe(n),i=Ie(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Ie(this.queryParams_,Vt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Ie(this.queryParams_,Bt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Ie(this.queryParams_,ie);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),_t("Query.startAt",1,e,this.path,!0),Ot("Query.startAt",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),_t("Query.startAfter",1,e,this.path,!1),Ot("Query.startAfter",2,n,!0);var r=Ce(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),_t("Query.endAt",1,e,this.path,!0),Ot("Query.endAt",2,n,!0);var r=Oe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),_t("Query.endBefore",1,e,this.path,!1),Ot("Query.endBefore",2,n,!0);var r=Te(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),_t("Query.equalTo",1,t,this.path,!1),Ot("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+Q(this.path)},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Bt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=A(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Z(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Ne=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ke=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Ae=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?je(t[".sv"],e,n):"object"==typeof t[".sv"]?Re(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},je=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},Re=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Pe=function(t,e,n,r){return Me(e,new ke(n,t),r)},De=function(t,e,n){return Me(t,new Ne(e),n)};function Me(t,e,n){var r,i=t.getPriority().val(),o=Ae(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Ae(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Ht(a,re(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ht(o))),u.forEachChild(Bt,(function(t,i){var o=Me(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var Le=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!Y(t)&&this.children.size>0){var e=q(t);return t=B(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(Y(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=q(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=B(e),i.remember(e,n)}},t.prototype.forget=function(t){if(Y(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Bt,(function(t,e){n.remember(new V(t),e)})),this.forget(t)}if(this.children.size>0){var r=q(t);return t=B(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new V(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ue,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Y(this.path)){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(e));return new t(U(),n,this.revert)}return Object(o.e)(q(this.path)===e,"operationForChild called for unrelated child."),new t(B(this.path),this.affectedTree,this.revert)},t}(),He=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Wt(N)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return R(e,(function(t,e){n=n.set(new V(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if(Y(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(B(t),e);return null!=i?{path:K(new V(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(Y(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(B(e)):new t(null)},t.prototype.set=function(e,n){if(Y(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(B(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Y(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(B(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Y(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(B(t)):null},t.prototype.setTree=function(e,n){if(Y(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(B(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(K(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Y(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(B(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Y(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(B(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(K(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Be=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U()):new t(this.source,B(this.path))},t}(),ze=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,B(this.path),this.snap)},t}(),Qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if(Y(this.path)){var n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new ze(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.e)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,B(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ge=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Y(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),We=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new Ge(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new Ge(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Ke=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,pe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,de(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,fe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ye=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Xe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ge(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),$e=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ze=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ke;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!Y(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new $e(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(he(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(Y(e))if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof ee?c:ee.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=q(e);if(".priority"===f){Object(o.e)(1===H(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var y=B(e),v=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);v=null!=g?s.getNode().getImmediateChild(f).updateChild(y,g):s.getNode().getImmediateChild(f)}else v=n.calcCompleteChild(f,t.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),f,v,y,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||Y(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(Y(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&H(e)>1)return t;var f=B(e),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,Ye,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||Y(e),c.filtersNodes()),y=new Xe(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,y,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Xe(r,t,i);if(Y(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=B(e),f=u.getNode().getImmediateChild(l),d=void 0;if(Y(h))d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===z(h)&&p.getChild(W(h)).isEmpty()?p:p.updateChild(h,n):ee.EMPTY_NODE}if(f.equals(d))s=t;else{var y=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(y,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=Y(e)?n:new He(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new V(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new V(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(Y(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(Y(e)){var u=new He(null);return a.getNode().forEachChild(Vt,(function(t,e){u=u.set(new V(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new He(null);return n.foreach((function(t,n){var r=K(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||Y(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ye,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Xe(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(Y(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.e)(h instanceof ee,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=q(e),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,B(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,ee.EMPTY_NODE,B(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(U()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Je=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.f)("Should only compare child_ events.");var r=new Mt(e.childName,e.snapshotNode),i=new Mt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}var en,nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new me(n):new ge(n);this.processor_=new Ze(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ee.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),l=new Ge(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ge(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new We(h,l),this.eventGenerator_=new Je(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!Y(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Fe.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Bt,(function(t,e){n.push(fe(t,e))})),e.isFullyInitialized()&&n.push(he(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),rn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(en,"Reference.ts has not been loaded"),en},set:function(t){Object(o.e)(!en,"__referenceConstructor has already been defined"),en=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ee?(s=e.calcCompleteEventChildren(n),a=!1):(s=ee.EMPTY_NODE,a=!1);var u=new We(new Ge(s,a,!1),new Ge(n,r,!1));return new nn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),y=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(y),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(v){o={error:v}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),on=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new He(null))},t}();function sn(t,e,n){if(Y(e))return new on(new He(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=X(i,e);return o=o.updateChild(s,n),new on(t.writeTree_.set(i,o))}var a=new He(n),u=t.writeTree_.setTree(e,a);return new on(u)}function an(t,e,n){var r=t;return R(n,(function(t,n){r=sn(r,K(e,t),n)})),r}function un(t,e){if(Y(e))return on.empty();var n=t.writeTree_.setTree(e,new He(null));return new on(n)}function cn(t,e){return null!=ln(t,e)}function ln(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(X(n.path,e)):null}function hn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Bt,(function(t,n){e.push(new Mt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Mt(t,n.value))})),e}function fn(t,e){if(Y(e))return t;var n=ln(t,e);return new on(null!=n?new He(n):t.writeTree_.subtree(e))}function dn(t){return t.writeTree_.isEmpty()}function pn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.e)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(K(e,n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(K(e,".priority"),i)),r}(U(),t.writeTree_,e)}var yn=function(){function t(){this.visibleWrites_=on.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new vn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=sn(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=an(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:J(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=un(this.visibleWrites_,r.path):R(r.children,(function(t){e.visibleWrites_=un(e.visibleWrites_,K(r.path,t))})),!0))},t.prototype.getCompleteWriteData=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=fn(this.visibleWrites_,e);return!i&&dn(o)?n:i||null!=n||cn(o,U())?pn(t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(J(t.path,e)||J(e,t.path))}),e),n||ee.EMPTY_NODE):null}var s=ln(this.visibleWrites_,e);if(null!=s)return s;var a=fn(this.visibleWrites_,e);return dn(a)?n:null!=n||cn(a,U())?pn(a,n||ee.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ee.EMPTY_NODE,r=ln(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Bt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=fn(this.visibleWrites_,t);return e.forEachChild(Bt,(function(t,e){var r=pn(fn(i,new V(t)),e);n=n.updateImmediateChild(t,r)})),hn(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return hn(fn(this.visibleWrites_,t)).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=K(t,e);if(cn(this.visibleWrites_,i))return null;var s=fn(this.visibleWrites_,i);return dn(s)?r.getChild(e):pn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=K(t,e),i=ln(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?pn(fn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=fn(this.visibleWrites_,t),u=ln(a,U());if(null!=u)s=u;else{if(null==e)return[];s=pn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return J(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&J(K(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,U()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=on.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)J(n,a)?r=sn(r,u=X(n,a),s.snap):J(a,n)&&(u=X(a,n),r=sn(r,U(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(J(n,a))r=an(r,u=X(n,a),s.children);else if(J(a,n))if(Y(u=X(a,n)))r=an(r,U(),s.children);else{var c=Object(o.D)(s.children,q(u));if(c){var l=c.getChild(B(u));r=sn(r,U(),l)}}}}}return r},t}(),vn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(K(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(K(this.treePath_,e),this.writeTree_)},t}(),gn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new He(null),this.pendingWriteTree_=new yn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=He.fromObject(e);return this.applyOperationToSyncPoints_(new Qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new He(null);return null!=n.snap?r=r.set(U(),!0):R(n.children,(function(t){r=r.set(new V(t),!0)})),this.applyOperationToSyncPoints_(new qe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=He.fromObject(e);return this.applyOperationToSyncPoints_(new Qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X(s,e),c=new ze(Ve(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X(s,e),c=He.fromObject(n),l=new Qe(Ve(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=X(o,e),u=new Be(Ve(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=X(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(U())):(u=new rn,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ee.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(U());n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var y=d[p],v=y.getQuery(),g=this.createListenerForView_(y);this.listenProvider_.startListening(t.queryForListening_(v),this.tagForQuery_(v),g.hashFn,g.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=X(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=X(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(U()):(r=new rn,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new Ge(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ee.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),R(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!Y(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),R(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ee.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(U()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(Y(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(U());null==n&&null!=i&&(n=i.getCompleteServerCache(U()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(U());null==n&&null!=o&&(n=o.getCompleteServerCache(U()));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),mn=function(){function t(){this.rootNode_=ee.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),_n=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),bn=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new _n),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),wn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&R(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),En=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new wn(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;R(e,(function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Cn=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function On(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Z(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Tn(t,e,n){On(t,n),Sn(t,(function(t){return Z(t,e)}))}function In(t,e,n){On(t,n),Sn(t,(function(t){return J(t,e)||J(e,t)}))}function Sn(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(xn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function xn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();g&&b("event: "+n.toString()),L(r)}}}var Nn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),kn=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Nn),An=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Nn),jn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Rn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=bn.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Pn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=s,n.password=a;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Pn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){b("frame writing exception"),u.stack&&b(u.stack),b(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Dn="";function Mn(t){Dn=t}var Ln=null;"undefined"!=typeof MozWebSocket?Ln=MozWebSocket:"undefined"!=typeof WebSocket&&(Ln=WebSocket);var Fn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=bn.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Dn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Ln(this.connURL,[],r)}else this.mySock=new Ln(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ln&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Vn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Rn,Fn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Fn&&Fn.isAvailable(),s=o&&!Fn.previouslyFailed();if(e.webSocketOnly&&(o||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Fn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Un=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Vn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k("t",t),n=k("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&O("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),qn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Hn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),kn.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&An.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();O("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Un(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){O(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&O(e),h())}))}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return A(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Dn.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=An.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(qn),Bn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t.getQueryParams());this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){O("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&O("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(qn),zn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Qn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new zn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof V?e:new V(e),r=this,i=q(n);null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new zn),i=q(n=B(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;R(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new V(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Gn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),Wn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Cn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Le,this.transactionQueueTree_=new Qn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=bn.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Bn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Hn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=bn.getOrCreateReporter(this.repoInfo_,(function(){return new En(t.stats_,t.server_)})),this.infoData_=new mn,this.infoSyncTree_=new gn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new gn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);In(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new V(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,(function(t){return re(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=re(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,(function(t){return re(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=re(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),In(this.eventQueue_,h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;R(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new V("/.info/"+t),r=re(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);In(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new se(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=re(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Tn(e.eventQueue_,t.path,i),Promise.resolve(new se(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+Object(o.G)(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=re(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=De(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);On(this.eventQueue_,l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||O("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);In(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),In(this.eventQueue_,h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(R(e,(function(e,n){i=!1,s[e]=Pe(K(t,e),re(n),r.serverSyncTree_,o)})),i)b("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);On(this.eventQueue_,u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||O("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;In(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)})),R(e,(function(e){var n=r.abortTransactions_(K(t,e));r.rerunTransactions_(n)})),In(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Le;this.onDisconnect_.forEachTree(U(),(function(r,i){var o=Pe(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(U(),(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Le,In(this.eventQueue_,U(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=re(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=re(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return b("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&R(e,(function(e,n){var i=re(n);r.onDisconnect_.remember(K(t,e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Tn(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Tn(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new wn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);R(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),b.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&L((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Jn(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new Kn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new se(a.currentInputSnapshot,new Kn(this,a.path),Bt);a.onComplete(null,!1,l)}}else{bt("transaction failed: Data returned ",c,a.path),a.status=Gn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.e)(mt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||ee.EMPTY_NODE).getPriority().val();var y=this.generateServerValues(),v=re(c,d),g=De(v,u,y);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);In(this.eventQueue_,t,m),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ee.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Gn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===Gn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=Gn.SENT,c.retryCount++;var l=X(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Gn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Kn(n,e[s].path),c=new se(a,u,Bt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),In(n.eventQueue_,t,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===Gn.SENT_NEEDS_ABORT?Gn.NEEDS_ABORT:Gn.RUN;else for(O("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Gn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===Gn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=X(e,a.path),c=!1,l=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Gn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Gn.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){bt("transaction failed: Data returned ",f,a.path);var d=re(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,y=this.generateServerValues(),v=De(d,h,y);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,v,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(In(this.eventQueue_,e,r),r=[],c&&(t[s].status=Gn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var g=new Kn(this,t[s].path),m=new se(t[s].currentInputSnapshot,g,Bt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)L(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=q(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=q(t=B(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Gn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===Gn.SENT_NEEDS_ABORT||(e[s].status===Gn.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=Gn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===Gn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,In(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)L(n[s])}},t}(),Kn=function(t){function e(e,n){if(!(e instanceof Wn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new _e,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),Y(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===q(this.path)?It("Reference.child",1,t,!1):Tt("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=W(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),St("Reference.set",this.path),_t("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),St("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),St("Reference.setWithPriority",this.path),_t("Reference.setWithPriority",1,t,this.path,!1),Et("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),St("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),St("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),Nt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new At(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),St("Reference.setPriority",this.path),Et("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),St("Reference.push",this.path),_t("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Rt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return St("Reference.onDisconnect",this.path),new kt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(xe);xe.__referenceConstructor=Kn,rn.__referenceConstructor=Kn;var Yn,Xn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';O(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),$n=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Zn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Yn||(Yn=new t),Yn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new ht(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new $n)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),b("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=ft(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=ft(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new $n:new Xn(t,e);return xt("Invalid Firebase Database URL",1,s),Y(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||C("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Wn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Jn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),Zn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Wn||C("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Kn(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?C("Cannot call useEmulator() after instance has already been initialized."):Zn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Kn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=ft(t,this.repo_.repoInfo_.nodeAdmin);xt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||C(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&C("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),tr=Object.freeze({__proto__:null,forceLongPolling:function(){Fn.forceDisallow(),Rn.forceAllow()},forceWebSockets:function(){Rn.forceDisallow()},isWebSocketsAvailable:function(){return Fn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Mn(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:Zn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),er=Hn;Hn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Hn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var nr=Object.freeze({__proto__:null,DataConnection:er,RealTimeConnection:Un,hijackHash:function(t){var e=Hn.prototype.put;return Hn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Hn.prototype.put=e}},ConnectionTarget:ht,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Zn.getInstance().forceRestClient(t)}}),rr=Jn.ServerValue;!function(e){Mn(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Zn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Kn,Query:xe,Database:Jn,DataSnapshot:se,enableLogging:_,INTERNAL:tr,ServerValue:rr,TEST_ACCESS:nr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:t,_parents:e}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"8Y7J":function(t,e,n){"use strict";n.d(e,"Y",(function(){return Uo})),n.d(e,"Z",(function(){return qo})),n.d(e,"ab",(function(){return Ho})),n.d(e,"bb",(function(){return Bo})),n.d(e,"X",(function(){return Hi})),n.d(e,"W",(function(){return Ni})),n.d(e,"e",(function(){return Ao})),n.d(e,"H",(function(){return So})),n.d(e,"q",(function(){return Io})),n.d(e,"I",(function(){return Ft})),n.d(e,"K",(function(){return Lt})),n.d(e,"a",(function(){return qi})),n.d(e,"u",(function(){return zi})),n.d(e,"t",(function(){return Qi})),n.d(e,"b",(function(){return Vi})),n.d(e,"c",(function(){return Ui})),n.d(e,"J",(function(){return Lo})),n.d(e,"B",(function(){return _o})),n.d(e,"M",(function(){return Eo})),n.d(e,"o",(function(){return Ki})),n.d(e,"d",(function(){return zo})),n.d(e,"j",(function(){return Mi})),n.d(e,"i",(function(){return Pt})),n.d(e,"y",(function(){return ue})),n.d(e,"z",(function(){return ae})),n.d(e,"F",(function(){return q})),n.d(e,"D",(function(){return Cn})),n.d(e,"C",(function(){return On})),n.d(e,"zb",(function(){return y})),n.d(e,"l",(function(){return Pe})),n.d(e,"Ab",(function(){return P})),n.d(e,"k",(function(){return S})),n.d(e,"s",(function(){return l})),n.d(e,"r",(function(){return ho})),n.d(e,"v",(function(){return wn})),n.d(e,"w",(function(){return _n})),n.d(e,"x",(function(){return bn})),n.d(e,"f",(function(){return to})),n.d(e,"g",(function(){return fn})),n.d(e,"h",(function(){return vn})),n.d(e,"p",(function(){return L})),n.d(e,"A",(function(){return Un})),n.d(e,"E",(function(){return Hn})),n.d(e,"m",(function(){return Dn})),n.d(e,"n",(function(){return Mn})),n.d(e,"G",(function(){return We})),n.d(e,"L",(function(){return Vo})),n.d(e,"lb",(function(){return Ke})),n.d(e,"P",(function(){return Wi})),n.d(e,"N",(function(){return je})),n.d(e,"O",(function(){return dn})),n.d(e,"S",(function(){return oe})),n.d(e,"T",(function(){return he})),n.d(e,"U",(function(){return Ht})),n.d(e,"jb",(function(){return I})),n.d(e,"ob",(function(){return Qe})),n.d(e,"tb",(function(){return m})),n.d(e,"mb",(function(){return sn})),n.d(e,"nb",(function(){return on})),n.d(e,"ib",(function(){return Pi})),n.d(e,"hb",(function(){return Di})),n.d(e,"Q",(function(){return ki})),n.d(e,"R",(function(){return Ai})),n.d(e,"yb",(function(){return $})),n.d(e,"wb",(function(){return He})),n.d(e,"Cb",(function(){return Xe})),n.d(e,"Bb",(function(){return $e})),n.d(e,"xb",(function(){return Ze})),n.d(e,"Db",(function(){return tn})),n.d(e,"V",(function(){return Qo})),n.d(e,"cb",(function(){return zr})),n.d(e,"db",(function(){return ha})),n.d(e,"eb",(function(){return ir})),n.d(e,"fb",(function(){return di})),n.d(e,"gb",(function(){return Go})),n.d(e,"kb",(function(){return kr})),n.d(e,"pb",(function(){return Lr})),n.d(e,"qb",(function(){return Mr})),n.d(e,"sb",(function(){return pi})),n.d(e,"rb",(function(){return ns})),n.d(e,"ub",(function(){return rs})),n.d(e,"vb",(function(){return ss}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t,e,n){const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i}const c=u("Inject",t=>({token:t})),l=u("Optional"),h=u("Self"),f=u("SkipSelf");var d=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function p(t){for(let e in t)if(t[e]===p)return e;throw Error("Could not find renamed property on target object.")}function y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function v(t){const e=t[g];return e&&e.token===t?e:null}const g=p({ngInjectableDef:p});function m(t){if("string"==typeof t)return t;if(t instanceof Array)return"["+t.map(m).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}const _=p({__forward_ref__:p});function b(t){return t.__forward_ref__=b,t.toString=function(){return m(this())},t}function w(t){const e=t;return"function"==typeof e&&e.hasOwnProperty(_)&&e.__forward_ref__===b?e():t}const E="undefined"!=typeof globalThis&&globalThis,C="undefined"!=typeof window&&window,O="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,T="undefined"!=typeof global&&global,I=E||T||C||O;class S{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.ngInjectableDef=y({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const x=new S("INJECTOR",-1),N=new Object,k=/\n/gm,A=p({provide:String,useValue:p});let j=void 0;function R(t){const e=j;return j=t,e}function P(t,e=d.Default){return function(t,e=d.Default){if(void 0===j)throw new Error("inject() must be called from an injection context");return null===j?function(t,e,n){const r=v(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&d.Optional)return null;throw new Error(`Injector: NOT_FOUND [${m(t)}]`)}(t,0,e):j.get(t,e&d.Optional?null:void 0,e)}(t,e)}class D{get(t,e=N){if(e===N){const e=new Error(`NullInjectorError: No provider for ${m(t)}!`);throw e.name="NullInjectorError",e}return e}}function M(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=m(e);if(e instanceof Array)i=e.map(m).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):m(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(k,"\n  ")}`}class L{}function F(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function V(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const U=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),q=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),H={},B=[],z=p({ngComponentDef:p}),Q=p({ngDirectiveDef:p}),G=p({ngPipeDef:p});let W=0;function K(t){return function(t){return t[z]||null}(t)||function(t){return t[Q]||null}(t)}function Y(t){return function(t){return t[G]||null}(t)}function X(t,e){if(null==t)return H;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const $=function(t){const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,consts:t.consts,vars:t.vars,factory:t.factory,template:t.template||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===U.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||q.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null};return i._=""+{toString:()=>{const n=t.directives,o=t.features,s=t.pipes;i.id+=W++,i.inputs=X(t.inputs,r),i.outputs=X(t.outputs),o&&o.forEach(t=>t(i)),i.directiveDefs=n?()=>("function"==typeof n?n():n).map(K):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Y):null,e.hasOwnProperty(g)||(e[g]=y({token:e,factory:t.factory}))}},i};let Z=null;const J=new Map;let tt,et=null;function nt(t,e){return et&&t===et||(et=t,e&&(Z=J.get(t)||null),Z=Z||{classesBitMask:0,classesIndex:1,stylesBitMask:0,stylesIndex:1}),Z}function rt(t,e){return function(t){for(;Array.isArray(t);)t=t[0];return t}(e[t.index])}function it(t,e){return e[1].data[t+19]}function ot(){return tt}const st=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(I))();function at(t,e){0===e?t[2]>0&&function(t){ct(t,2|ut(t))}(t):t[2]=e}function ut(t){return t[1]}function ct(t,e){t[1]=e}function lt(t,e){return t[e+2]}function ht(t,e){return 1&t[e+0]}function ft(t,e){return(1&ht(t,e))>0}function dt(t,e){return t[e+0]>>1}function pt(t,e,n){const r=ht(t,e);t[e+0]=r|n<<1}function yt(t,e){return t[e+1]}function vt(t,e,n){return t[e+3+n]}function gt(t,e){return!(!t||e!==t[2])}function mt(t){return(1&ut(t))>0}function _t(t){return(2&ut(t))>0}function bt(t){return 6+t[4]}function wt(t,e){let n=Array.isArray(t)?t[0]:t,r=Array.isArray(e)?e[0]:e;return n instanceof String&&(n=n.toString()),r instanceof String&&(r=r.toString()),function(t,e){return!(t!=t&&e!=e)&&t!==e}(n,r)}function Et(t){return null!=t&&""!==t}function Ct(t){return t.replace(/[a-z][A-Z]/g,t=>t.charAt(0)+"-"+t.charAt(1)).toLowerCase()}function Ot(t){return Tt(t)?t[0]:t}function Tt(t){return Array.isArray(t)&&t.length>=6&&"string"!=typeof t[1]}function It(t,e){return t[e+0]}function St(t,e,n){t[e+1]=n}function xt(t,e){return t[e+1]}const Nt=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();function kt(t){return!!t.listen}function At(t){return t.ngDebugContext}function jt(t){return t.ngOriginalError}function Rt(t,...e){t.error(...e)}class Pt{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Rt}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?At(t)?At(t):this._findContext(jt(t)):null}_findOriginalError(t){let e=jt(t);for(;e&&jt(e);)e=jt(e);return e}}let Dt=!0,Mt=!1;function Lt(){return Mt=!0,Dt}function Ft(){if(Mt)throw new Error("Cannot enable prod mode after platform setup.");Dt=!1}class Vt{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(t){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(t){t="<body><remove></remove>"+t+"</body>";try{t=encodeURI(t)}catch(r){return null}const e=new XMLHttpRequest;e.responseType="document",e.open("GET","data:text/html;charset=utf-8,"+t,!1),e.send(void 0);const n=e.response.body;return n.removeChild(n.firstChild),n}getInertBodyElement_DOMParser(t){t="<body><remove></remove>"+t+"</body>";try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}getInertBodyElement_InertDocument(t){const e=this.inertDocument.createElement("template");return"content"in e?(e.innerHTML=t,e):(this.inertBodyElement.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ut=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,qt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ht(t){return(t=String(t)).match(Ut)||t.match(qt)?t:(Lt()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Bt(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function zt(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Qt=Bt("area,br,col,hr,img,wbr"),Gt=Bt("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Wt=Bt("rp,rt"),Kt=zt(Wt,Gt),Yt=zt(Qt,zt(Gt,Bt("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),zt(Wt,Bt("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kt),Xt=Bt("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),$t=Bt("srcset"),Zt=zt(Xt,$t,Bt("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bt("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jt=Bt("script,style,template");class te{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Yt.hasOwnProperty(e))return this.sanitizedSomething=!0,!Jt.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Zt.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Xt[o]&&(s=Ht(s)),$t[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Ht(t.trim())).join(", ")),this.buf.push(" ",e,'="',re(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Yt.hasOwnProperty(e)&&!Qt.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(re(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const ee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ne=/([^\#-~ |!])/g;function re(t){return t.replace(/&/g,"&amp;").replace(ee,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(ne,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ie;function oe(t,e){let n=null;try{ie=ie||new Vt(t);let r=e?String(e):"";n=ie.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=ie.getInertBodyElement(r)}while(r!==o);const s=new te,a=s.sanitizeChildren(se(n)||n);return Lt()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=se(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function se(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}const ae=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();class ue{}const ce=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),le=/^url\(([^)]+)\)$/;function he(t){if(!(t=String(t).trim()))return"";const e=t.match(le);return e&&Ht(e[1])===e[1]||t.match(ce)&&function(t){let e=!0,n=!0;for(let r=0;r<t.length;r++){const i=t.charAt(r);"'"===i&&n?e=!e:'"'===i&&e&&(n=!n)}return e&&n}(t)?t:(Lt()&&console.warn(`WARNING: sanitizing unsafe style value ${t} (see http://g.co/ng/security#xss).`),"unsafe")}const fe=/([A-Z])/g;function de(t){try{return null!=t?t.toString().slice(0,30):t}catch(e){return"[ERROR] Exception while trying to serialize the value"}}let pe=[];function ye(t,e,n,r,i,o,s,a,u){mt(t)||(s?function(t,e,n,r,i){pe.unshift(t,e,n,r,i)}(t,n,r,i,u):(pe.length&&ve(),ge(t,n,r,i,u)));const c=a||wt(e[i],o);return c&&(e[i]=o),c}function ve(){let t=0;for(;t<pe.length;)ge(pe[t++],pe[t++],pe[t++],pe[t++],pe[t++]);pe.length=0}function ge(t,e,n,r,i){let o=!1;if(n){let s=!1,a=bt(t);for(;a<t.length;){const o=yt(t,a),u=lt(t,a);if(s=n<=u,s){n<u&&me(t,a,n,i),_e(t,!1,a,r,e);break}a+=3+o}s||(me(t,t.length,n,i),_e(t,!1,a,r,e),o=!0)}else _e(t,!0,3,r,e),o=!0;return o}function me(t,e,n,r){t.splice(e,0,r?1:0,1,n,null),pt(t,e,1)}function _e(t,e,n,r,i){const o=n+3;let s=o+yt(t,n);if(e||s--,"number"==typeof r){for(let e=o;e<=s;e++)if(t[e]===r)return;t.splice(s,0,r),t[n+1]++,pt(t,n,dt(t,n)|1<<i)}else null!==r&&null==t[s]&&(t[s]=r)}function be(t,e,n,r,i,o,s,a){return i&&r&&(function(t){if(!mt(t)){const e=Ot(t);e&&function(t,e){for(let n=1;n<e.length;n+=2){const r=xt(e,n);r&&ge(t,-1,It(e,n),r,!1)}}(t,e),function(t){ct(t,1|ut(t))}(t)}}(r),function(t,e){return t&&e>0}(r,o))?(function(t,e,n,r,i,o,s){const a=!0===(u=i)?-1:!1===u?0:u;var u;const c=we,l=(a&dt(t,3))>0?1:0;let h=bt(t);for(;h<t.length;){const i=yt(t,h);if(a&dt(t,h)){let a=!1;const u=lt(t,h),f=i-1,d=vt(t,h,f);for(let i=0;i<f;i++){const c=vt(t,h,i),l=r[c];if(Et(l)){o(e,n,u,s&&ft(t,h)?s(u,l,2):l,c),a=!0;break}}if(c){const i=c(t,e,n,r,o,s,l|(a?4:2),u,d);a=a||i}a||o(e,n,u,d)}h+=3+i}c&&c(t,e,n,r,o,s,l)}(r,t,e,n,o,s,a),!0):i}let we=null;const Ee=(t,e,n,r)=>{const i=e.style;r?(r=r.toString(),t&&kt(t)?t.setStyle(e,n,r,Nt.DashCase):i&&i.setProperty(n,r)):t&&kt(t)?t.removeStyle(e,n,Nt.DashCase):i&&i.removeProperty(n)},Ce=(t,e,n,r)=>{if(""!==n){const i=e.classList;r?t&&kt(t)?t.addClass(e,n):i&&i.add(n):t&&kt(t)?t.removeClass(e,n):i&&i.remove(n)}},Oe={},Te=(t,e,n,r,i,o,s,a,u)=>{let c=!1;if(yt(t,3)){let l=!0;const h=!a;h&&-2&s&&(l=!1,c=!0),l&&(c=function t(e,n,r,i,o,s,a,u,c,l){let h=!1;if(c<yt(e,3)){const f=vt(e,3,c),d=i[f];let p=function(t){return t>=xe.length&&xe.push(1),xe[t]}(c);for(;p<d.length;){const y=It(d,p),v=u&&y>u,g=!v&&y===u,m=xt(d,p),_=Et(m);let b=t(e,n,r,i,o,s,v?a:Ie(a,_,g),v?u:y,c+1,l);if(v){h||(h=b);break}if(!b&&Se(a,g)){const t=g&&!_,e=t?l:m,i=t?f:null;o(n,r,y,s?s(y,e,3):e,i),b=!0}h=b&&g,p+=2}if(xe[c]=p,1===d.length||!u)return t(e,n,r,i,o,s,a,u,c+1,l)}return h}(t,e,n,r,i,o,s,a||null,0,u||null)),h&&function(){for(let t=0;t<xe.length;t++)xe[t]=1}()}return c};function Ie(t,e,n){let r=t;return e||4&t||!(n||1&t)?(r|=4,r&=-3):(r|=2,r&=-5),r}function Se(t,e){let n=(1&t)>0;return n?4&t&&e&&(n=!1):2&t&&(n=e),n}const xe=[];function Ne(t,e,n,r){for(let i=1;i<t.length;i+=2){const o=It(t,i);if(e<=o){let s=!1;if(o===e){const e=t[i];!r&&Et(e)||(s=!0,St(t,i,n))}else s=!0,t.splice(i,0,e,n);return s}}return t.push(e,n),!0}let ke=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ae(),t})();const Ae=(...t)=>{},je=new S("The presence of this token marks an injector as being the root injector."),Re=function(t,e,n){return new Ve(t,e,n)};let Pe=(()=>{class t{static create(t,e){return Array.isArray(t)?Re(t,e,""):Re(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=N,t.NULL=new D,t.ngInjectableDef=y({token:t,providedIn:"any",factory:()=>P(x)}),t.__NG_ELEMENT_ID__=-1,t})();const De=function(t){return t},Me=[],Le=De,Fe=function(){return Array.prototype.slice.call(arguments)};class Ve{constructor(t,e=Pe.NULL,n=null){this.parent=e,this.source=n;const r=this._records=new Map;r.set(Pe,{token:Pe,fn:De,deps:Me,value:this,useNew:!1}),r.set(x,{token:x,fn:De,deps:Me,value:this,useNew:!1}),function t(e,n){if(n)if((n=w(n))instanceof Array)for(let r=0;r<n.length;r++)t(e,n[r]);else{if("function"==typeof n)throw qe("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw qe("Unexpected provider",n);{let t=w(n.provide);const r=function(t){const e=function(t){let e=Me;const n=t.deps;if(n&&n.length){e=[];for(let t=0;t<n.length;t++){let r=6,i=w(n[t]);if(i instanceof Array)for(let t=0,e=i;t<e.length;t++){const n=e[t];n instanceof l||n==l?r|=1:n instanceof f||n==f?r&=-3:n instanceof h||n==h?r&=-5:i=n instanceof c?n.token:w(n)}e.push({token:i,options:r})}}else if(t.useExisting)e=[{token:w(t.useExisting),options:6}];else if(!n&&!(A in t))throw qe("'deps' required",t);return e}(t);let n=De,r=Me,i=!1,o=w(t.provide);if(A in t)r=t.useValue;else if(t.useFactory)n=t.useFactory;else if(t.useExisting);else if(t.useClass)i=!0,n=w(t.useClass);else{if("function"!=typeof o)throw qe("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);i=!0,n=o}return{deps:e,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){let r=e.get(t);if(r){if(r.fn!==Fe)throw Ue(t)}else e.set(t,r={token:n.provide,deps:[],useNew:!1,fn:Fe,value:Me});t=n,r.deps.push({token:t,options:6})}const i=e.get(t);if(i&&i.fn==Fe)throw Ue(t);e.set(t,r)}}}(r,t)}get(t,e,n=d.Default){const r=this._records.get(t);try{return function t(e,n,r,i,o,s){try{return function(e,n,r,i,o,s){let a;if(!n||s&d.SkipSelf)s&d.Self||(a=i.get(e,o,d.Default));else{if(a=n.value,a==Le)throw Error("\u0275Circular dependency");if(a===Me){n.value=Le;let e=void 0,o=n.useNew,s=n.fn,u=n.deps,c=Me;if(u.length){c=[];for(let e=0;e<u.length;e++){const n=u[e],o=n.options,s=2&o?r.get(n.token):void 0;c.push(t(n.token,s,r,s||4&o?i:Pe.NULL,1&o?null:Pe.THROW_IF_NOT_FOUND,d.Default))}}n.value=a=o?new s(...c):s.apply(e,c)}}return a}(e,n,r,i,o,s)}catch(a){throw a instanceof Error||(a=new Error(a)),(a.ngTempTokenPath=a.ngTempTokenPath||[]).unshift(e),n&&n.value==Le&&(n.value=Me),a}}(t,r,this._records,this.parent,e,n)}catch(i){return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=M("\n"+t.message,i,"StaticInjectorError",r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(i,t,0,this.source)}}toString(){const t=[];return this._records.forEach((e,n)=>t.push(m(n))),`StaticInjector[${t.join(", ")}]`}}function Ue(t){return qe("Cannot mix multi providers and regular providers",t)}function qe(t,e){return new Error(M(t,e,"StaticInjectorError"))}function He(t){const e=(void 0)[1];e.firstTemplatePass&&(function(t,e,n){const r=t.expandoInstructions,i=r.length;i>=2&&r[i-2]===null.hostBindings?r[i-1]=r[i-1]+n:r.push(null.hostBindings,n)}(e,0,t),function(t,e,n){for(let r=0;r<n;r++)(void 0).push(Oe),t.blueprint.push(Oe),t.data.push(null)}(e,0,t))}let Be=null;function ze(){if(!Be){const t=I.Symbol;if(t&&t.iterator)Be=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Be=n)}}}return Be}function Qe(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Ge(t,e){const n=Ke(t),r=Ke(e);if(n&&r)return function(t,e,n){const r=t[ze()](),i=e[ze()]();for(;;){const t=r.next(),e=i.next();if(t.done&&e.done)return!0;if(t.done||e.done)return!1;if(!n(t.value,e.value))return!1}}(t,e,Ge);{const i=t&&("object"==typeof t||"function"==typeof t),o=e&&("object"==typeof e||"function"==typeof e);return!(n||!i||r||!o)||Qe(t,e)}}class We{constructor(t){this.wrapped=t}static wrap(t){return new We(t)}static unwrap(t){return We.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof We}}function Ke(t){return!!Ye(t)&&(Array.isArray(t)||!(t instanceof Map)&&ze()in t)}function Ye(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Xe(){(void 0)[1].firstTemplatePass&&(1,at(nn(void 0),1),at(en(void 0),1))}function $e(t){const e=it(-1,void 0),n=en(e),r=(void 0)[7]++;Je(-1,n,r,t,!1,!1)}function Ze(t){!function(t,e){const n=it(-1,void 0),r=nn(n),i=(void 0)[7]++;Je(-1,r,i,e,!0,!1)}(0,t)}function Je(t,e,n,r,i,o){we=Te;let s=!1;if(r!==Oe){const a=rt(it(t,void 0),void 0),u=(void 0)[n];s=wt(u,r);const c=function(t,e,n){const r=Array.isArray(t)?t:[null];r[0]=e||null;for(let a=1;a<r.length;a+=2)St(r,a,null);let i,o=null,s=!1;if("string"==typeof e?e.length&&(o=e.split(/\s+/),s=!0):(o=e?Object.keys(e):null,i=e),o)for(let a=0;a<o.length;a++){const t=o[a];Ne(r,n?Ct(t):t,!!s||i[t],!0)}return r}(u,r,!i);i?function(t,e,n,r,i,o,s,a){const u=nt(n,_t(t));!ye(t,void 0,0,null,i,o,s,a,!1)&&!a||(u.classesBitMask|=1)}(e,0,a,0,n,c,o,s):function(t,e,n,r,i,o,s,a,u){const c=nt(n,_t(t));!ye(t,void 0,0,null,i,o,a,u,!0)&&!u||(c.stylesBitMask|=1)}(e,0,a,0,n,c,ot(),o,s)}return s}function tn(){const t=it(-1,void 0),e=function(t,e){return 3===t.type?(void 0)[12]:null}(t),n=rt(t,void 0),r=ot();(function(t,e,n,r,i,o,s){const a=n?_t(n):!!r&&_t(r),u=gt(n,o),c=gt(r,o);pe.length&&(u||c)&&ve();const l=nt(i,a),h=be(t,i,e,n,u,l.classesBitMask,Ce,null),f=be(t,i,e,r,c,l.stylesBitMask,Ee,s);h&&f?(Z=null,et=null,a&&function(t){J.delete(t)}(i)):a&&function(t,e){J.set(t,e)}(i,l)})(e,void 0,nn(t),en(t),n,1,r),tt=null}function en(t){return rn(t,!1)}function nn(t){return rn(t,!0)}function rn(t,e){let n=e?t.classes:t.styles;return Tt(n)||(n=[n||[""],0,0,1,0,"--MAP--"],e?t.classes=n:t.styles=n),n}function on(t){return!!t&&"function"==typeof t.then}function sn(t){return!!t&&"function"==typeof t.subscribe}class an{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}class un{}function cn(t){const e=Error(`No component factory found for ${m(t)}. Did you add it to @NgModule.entryComponents?`);return e[ln]=t,e}const ln="ngComponent";class hn{resolveComponentFactory(t){throw cn(t)}}let fn=(()=>{class t{}return t.NULL=new hn,t})();class dn{constructor(t,e,n){this._parent=e,this._ngModule=n,this._factories=new Map;for(let r=0;r<t.length;r++){const e=t[r];this._factories.set(e.componentType,e)}}resolveComponentFactory(t){let e=this._factories.get(t);if(!e&&this._parent&&(e=this._parent.resolveComponentFactory(t)),!e)throw cn(t);return new pn(e,this._ngModule)}}class pn extends un{constructor(t,e){super(),this.factory=t,this.ngModule=e,this.selector=t.selector,this.componentType=t.componentType,this.ngContentSelectors=t.ngContentSelectors,this.inputs=t.inputs,this.outputs=t.outputs}create(t,e,n,r){return this.factory.create(t,e,n,r||this.ngModule)}}function yn(...t){}let vn=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>gn(t),t})();const gn=yn;class mn{}class _n{}const bn=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let wn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>En(),t})();const En=yn;class Cn{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const On=new Cn("8.2.14");class Tn{constructor(){}supports(t){return Ke(t)}create(t){return new Sn(t)}}const In=(t,e)=>e;class Sn{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||In}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<An(n,r,i)?e:n,s=An(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ke(t))throw new Error(`Error trying to diff '${m(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Qe(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Qe(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[ze()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Qe(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Qe(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Qe(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Qe(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new xn(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new kn),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kn),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class xn{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Nn{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Qe(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class kn{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Nn,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function An(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class jn{constructor(){}supports(t){return t instanceof Map||Ye(t)}create(){return new Rn}}class Rn{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Ye(t)))throw new Error(`Error trying to diff '${m(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Pn(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Qe(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Pn{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let Dn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new l]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.ngInjectableDef=y({token:t,providedIn:"root",factory:()=>new t([new Tn])}),t})(),Mn=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new f,new l]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.ngInjectableDef=y({token:t,providedIn:"root",factory:()=>new t([new jn])}),t})();const Ln=[new jn],Fn=new Dn([new Tn]),Vn=new Mn(Ln);let Un=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>qn(t,vn),t})();const qn=yn;let Hn=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Bn(t,vn),t})();const Bn=yn;function zn(t,e,n,r){let i=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${e}'. Current value: '${n}'.`;return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(t,e){const n=new Error(t);return Qn(n,e),n}(i,t)}function Qn(t,e){t.ngDebugContext=e,t.ngErrorLogger=e.logError.bind(e)}function Gn(t){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+t)}function Wn(t,e,n){const r=t.state,i=1792&r;return i===e?(t.state=-1793&r|n,t.initIndex=-1,!0):i===n}function Kn(t,e,n){return(1792&t.state)===e&&t.initIndex<=n&&(t.initIndex=n+1,!0)}function Yn(t,e){return t.nodes[e]}function Xn(t,e){return t.nodes[e]}function $n(t,e){return t.nodes[e]}function Zn(t,e){return t.nodes[e]}function Jn(t,e){return t.nodes[e]}const tr={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},er=()=>{},nr=new Map;function rr(t){let e=nr.get(t);return e||(e=m(t)+"_"+nr.size,nr.set(t,e)),e}function ir(t){return{id:"$$undefined",styles:t.styles,encapsulation:t.encapsulation,data:t.data}}let or=0;function sr(t,e,n,r){return!(!(2&t.state)&&Qe(t.oldValues[e.bindingIndex+n],r))}function ar(t,e,n,r){return!!sr(t,e,n,r)&&(t.oldValues[e.bindingIndex+n]=r,!0)}function ur(t,e,n,r){const i=t.oldValues[e.bindingIndex+n];if(1&t.state||!Ge(i,r)){const o=e.bindings[n].name;throw zn(tr.createDebugContext(t,e.nodeIndex),`${o}: ${i}`,`${o}: ${r}`,0!=(1&t.state))}}function cr(t){let e=t;for(;e;)2&e.def.flags&&(e.state|=8),e=e.viewContainerParent||e.parent}function lr(t,e){let n=t;for(;n&&n!==e;)n.state|=64,n=n.viewContainerParent||n.parent}function hr(t,e,n,r){try{return cr(33554432&t.def.nodes[e].flags?Xn(t,e).componentView:t),tr.handleEvent(t,e,n,r)}catch(i){t.root.errorHandler.handleError(i)}}function fr(t){return t.parent?Xn(t.parent,t.parentNodeDef.nodeIndex):null}function dr(t){return t.parent?t.parentNodeDef.parent:null}function pr(t,e){switch(201347067&e.flags){case 1:return Xn(t,e.nodeIndex).renderElement;case 2:return Yn(t,e.nodeIndex).renderText}}function yr(t){return!!t.parent&&!!(32768&t.parentNodeDef.flags)}function vr(t){return!(!t.parent||32768&t.parentNodeDef.flags)}function gr(t){const e={};let n=0;const r={};return t&&t.forEach(([t,i])=>{"number"==typeof t?(e[t]=i,n|=function(t){return 1<<t%32}(t)):r[t]=i}),{matchedQueries:e,references:r,matchedQueryIds:n}}function mr(t,e){return t.map(t=>{let n,r;return Array.isArray(t)?[r,n]=t:(r=0,n=t),n&&("function"==typeof n||"object"==typeof n)&&e&&Object.defineProperty(n,"__source",{value:e,configurable:!0}),{flags:r,token:n,tokenKey:rr(n)}})}function _r(t,e,n){let r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===q.Native?Xn(t,n.renderParent.nodeIndex).renderElement:void 0:e}const br=new WeakMap;function wr(t){let e=br.get(t);return e||(e=t(()=>er),e.factory=t,br.set(t,e)),e}function Er(t,e,n,r,i){3===e&&(n=t.renderer.parentNode(pr(t,t.def.lastRenderRootNode))),Cr(t,e,0,t.def.nodes.length-1,n,r,i)}function Cr(t,e,n,r,i,o,s){for(let a=n;a<=r;a++){const n=t.def.nodes[a];11&n.flags&&Tr(t,n,e,i,o,s),a+=n.childCount}}function Or(t,e,n,r,i,o){let s=t;for(;s&&!yr(s);)s=s.parent;const a=s.parent,u=dr(s),c=u.nodeIndex+u.childCount;for(let l=u.nodeIndex+1;l<=c;l++){const t=a.def.nodes[l];t.ngContentIndex===e&&Tr(a,t,n,r,i,o),l+=t.childCount}if(!a.parent){const s=t.root.projectableNodes[e];if(s)for(let e=0;e<s.length;e++)Ir(t,s[e],n,r,i,o)}}function Tr(t,e,n,r,i,o){if(8&e.flags)Or(t,e.ngContent.index,n,r,i,o);else{const s=pr(t,e);if(3===n&&33554432&e.flags&&48&e.bindingFlags?(16&e.bindingFlags&&Ir(t,s,n,r,i,o),32&e.bindingFlags&&Ir(Xn(t,e.nodeIndex).componentView,s,n,r,i,o)):Ir(t,s,n,r,i,o),16777216&e.flags){const s=Xn(t,e.nodeIndex).viewContainer._embeddedViews;for(let t=0;t<s.length;t++)Er(s[t],n,r,i,o)}1&e.flags&&!e.element.name&&Cr(t,n,e.nodeIndex+1,e.nodeIndex+e.childCount,r,i,o)}}function Ir(t,e,n,r,i,o){const s=t.renderer;switch(n){case 1:s.appendChild(r,e);break;case 2:s.insertBefore(r,e,i);break;case 3:s.removeChild(r,e);break;case 0:o.push(e)}}const Sr=/^:([^:]+):(.+)$/;function xr(t){if(":"===t[0]){const e=t.match(Sr);return[e[1],e[2]]}return["",t]}function Nr(t){let e=0;for(let n=0;n<t.length;n++)e|=t[n].flags;return e}function kr(t,e,n,r,i,o,s,a,u,c,l,h,f,d,p,y,v,g,m,_){switch(t){case 1:return e+Ar(n)+r;case 2:return e+Ar(n)+r+Ar(i)+o;case 3:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a;case 4:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a+Ar(u)+c;case 5:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a+Ar(u)+c+Ar(l)+h;case 6:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a+Ar(u)+c+Ar(l)+h+Ar(f)+d;case 7:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a+Ar(u)+c+Ar(l)+h+Ar(f)+d+Ar(p)+y;case 8:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a+Ar(u)+c+Ar(l)+h+Ar(f)+d+Ar(p)+y+Ar(v)+g;case 9:return e+Ar(n)+r+Ar(i)+o+Ar(s)+a+Ar(u)+c+Ar(l)+h+Ar(f)+d+Ar(p)+y+Ar(v)+g+Ar(m)+_;default:throw new Error("Does not support more than 9 expressions")}}function Ar(t){return null!=t?t.toString():""}const jr=new Object,Rr=rr(Pe),Pr=rr(x),Dr=rr(L);function Mr(t,e,n,r){return n=w(n),{index:-1,deps:mr(r,m(e)),flags:t,token:e,value:n}}function Lr(t){const e={},n=[];let r=!1;for(let i=0;i<t.length;i++){const o=t[i];o.token===je&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,e[rr(o.token)]=o}return{factory:null,providersByKey:e,providers:t,modules:n,isRoot:r}}function Fr(t,e,n=Pe.THROW_IF_NOT_FOUND){const r=R(t);try{if(8&e.flags)return e.token;if(2&e.flags&&(n=null),1&e.flags)return t._parent.get(e.token,n);const s=e.tokenKey;switch(s){case Rr:case Pr:case Dr:return t}const a=t._def.providersByKey[s];let u;if(a){let e=t._providers[a.index];return void 0===e&&(e=t._providers[a.index]=Vr(t,a)),e===jr?void 0:e}if((u=v(e.token))&&(i=t,null!=(o=u).providedIn&&(function(t,e){return t._def.modules.indexOf(e)>-1}(i,o.providedIn)||"root"===o.providedIn&&i._def.isRoot))){const n=t._providers.length;return t._def.providers[n]=t._def.providersByKey[e.tokenKey]={flags:5120,value:u.factory,deps:[],index:n,token:e.token},t._providers[n]=jr,t._providers[n]=Vr(t,t._def.providersByKey[e.tokenKey])}return 4&e.flags?n:t._parent.get(e.token,n)}finally{R(r)}var i,o}function Vr(t,e){let n;switch(201347067&e.flags){case 512:n=function(t,e,n){const r=n.length;switch(r){case 0:return new e;case 1:return new e(Fr(t,n[0]));case 2:return new e(Fr(t,n[0]),Fr(t,n[1]));case 3:return new e(Fr(t,n[0]),Fr(t,n[1]),Fr(t,n[2]));default:const i=new Array(r);for(let e=0;e<r;e++)i[e]=Fr(t,n[e]);return new e(...i)}}(t,e.value,e.deps);break;case 1024:n=function(t,e,n){const r=n.length;switch(r){case 0:return e();case 1:return e(Fr(t,n[0]));case 2:return e(Fr(t,n[0]),Fr(t,n[1]));case 3:return e(Fr(t,n[0]),Fr(t,n[1]),Fr(t,n[2]));default:const i=Array(r);for(let e=0;e<r;e++)i[e]=Fr(t,n[e]);return e(...i)}}(t,e.value,e.deps);break;case 2048:n=Fr(t,e.deps[0]);break;case 256:n=e.value}return n===jr||null===n||"object"!=typeof n||131072&e.flags||"function"!=typeof n.ngOnDestroy||(e.flags|=131072),void 0===n?jr:n}function Ur(t,e){const n=t.viewContainer._embeddedViews;if((null==e||e>=n.length)&&(e=n.length-1),e<0)return null;const r=n[e];return r.viewContainerParent=null,V(n,e),tr.dirtyParentQueries(r),Hr(r),r}function qr(t,e,n){const r=e?pr(e,e.def.lastRenderRootNode):t.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Er(n,2,i,o,void 0)}function Hr(t){Er(t,3,null,null,void 0)}const Br=new Object;function zr(t,e,n,r,i,o){return new Qr(t,e,n,r,i,o)}class Qr extends un{constructor(t,e,n,r,i,o){super(),this.selector=t,this.componentType=e,this._inputs=r,this._outputs=i,this.ngContentSelectors=o,this.viewDefFactory=n}get inputs(){const t=[],e=this._inputs;for(let n in e)t.push({propName:n,templateName:e[n]});return t}get outputs(){const t=[];for(let e in this._outputs)t.push({propName:e,templateName:this._outputs[e]});return t}create(t,e,n,r){if(!r)throw new Error("ngModule should be provided");const i=wr(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,s=tr.createRootView(t,e||[],n,i,r,Br),a=$n(s,o).instance;return n&&s.renderer.setAttribute(Xn(s,0).renderElement,"ng-version",On.full),new Gr(s,new Xr(s),a)}}class Gr extends class{}{constructor(t,e,n){super(),this._view=t,this._viewRef=e,this._component=n,this._elDef=this._view.def.nodes[0],this.hostView=e,this.changeDetectorRef=e,this.instance=n}get location(){return new vn(Xn(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new ti(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(t){this._viewRef.onDestroy(t)}}function Wr(t,e,n){return new Kr(t,e,n)}class Kr{constructor(t,e,n){this._view=t,this._elDef=e,this._data=n,this._embeddedViews=[]}get element(){return new vn(this._data.renderElement)}get injector(){return new ti(this._view,this._elDef)}get parentInjector(){let t=this._view,e=this._elDef.parent;for(;!e&&t;)e=dr(t),t=t.parent;return t?new ti(t,e):new ti(this._view,null)}clear(){for(let t=this._embeddedViews.length-1;t>=0;t--){const e=Ur(this._data,t);tr.destroyView(e)}}get(t){const e=this._embeddedViews[t];if(e){const t=new Xr(e);return t.attachToViewContainerRef(this),t}return null}get length(){return this._embeddedViews.length}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;i||t instanceof pn||(i=o.get(L));const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");const n=t;return function(t,e,n,r){let i=e.viewContainer._embeddedViews;null==n&&(n=i.length),r.viewContainerParent=t,F(i,n,r),function(t,e){const n=fr(e);if(!n||n===t||16&e.state)return;e.state|=16;let r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(e),function(t,e){if(4&e.flags)return;t.nodeFlags|=4,e.flags|=4;let n=e.parent;for(;n;)n.childFlags|=4,n=n.parent}(e.parent.def,e.parentNodeDef)}(e,r),tr.dirtyParentQueries(r),qr(e,n>0?i[n-1]:null,r)}(this._view,this._data,e,n._view),n.attachToViewContainerRef(this),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");const n=this._embeddedViews.indexOf(t._view);return function(t,e,n){const r=t.viewContainer._embeddedViews,i=r[e];V(r,e),null==n&&(n=r.length),F(r,n,i),tr.dirtyParentQueries(i),Hr(i),qr(t,n>0?r[n-1]:null,i)}(this._data,n,e),t}indexOf(t){return this._embeddedViews.indexOf(t._view)}remove(t){const e=Ur(this._data,t);e&&tr.destroyView(e)}detach(t){const e=Ur(this._data,t);return e?new Xr(e):null}}function Yr(t){return new Xr(t)}class Xr{constructor(t){this._view=t,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(t){const e=[];return Er(t,0,void 0,void 0,e),e}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){cr(this._view)}detach(){this._view.state&=-5}detectChanges(){const t=this._view.root.rendererFactory;t.begin&&t.begin();try{tr.checkAndUpdateView(this._view)}finally{t.end&&t.end()}}checkNoChanges(){tr.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(t){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(t)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),tr.destroyView(this._view)}detachFromAppRef(){this._appRef=null,Hr(this._view),tr.dirtyParentQueries(this._view)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}}function $r(t,e){return new Zr(t,e)}class Zr extends Un{constructor(t,e){super(),this._parentView=t,this._def=e}createEmbeddedView(t){return new Xr(tr.createEmbeddedView(this._parentView,this._def,this._def.element.template,t))}get elementRef(){return new vn(Xn(this._parentView,this._def.nodeIndex).renderElement)}}function Jr(t,e){return new ti(t,e)}class ti{constructor(t,e){this.view=t,this.elDef=e}get(t,e=Pe.THROW_IF_NOT_FOUND){return tr.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:t,tokenKey:rr(t)},e)}}function ei(t){return new ni(t.renderer)}class ni{constructor(t){this.delegate=t}selectRootElement(t){return this.delegate.selectRootElement(t)}createElement(t,e){const[n,r]=xr(e),i=this.delegate.createElement(r,n);return t&&this.delegate.appendChild(t,i),i}createViewRoot(t){return t}createTemplateAnchor(t){const e=this.delegate.createComment("");return t&&this.delegate.appendChild(t,e),e}createText(t,e){const n=this.delegate.createText(e);return t&&this.delegate.appendChild(t,n),n}projectNodes(t,e){for(let n=0;n<e.length;n++)this.delegate.appendChild(t,e[n])}attachViewAfter(t,e){const n=this.delegate.parentNode(t),r=this.delegate.nextSibling(t);for(let i=0;i<e.length;i++)this.delegate.insertBefore(n,e[i],r)}detachView(t){for(let e=0;e<t.length;e++){const n=t[e],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}}destroyView(t,e){for(let n=0;n<e.length;n++)this.delegate.destroyNode(e[n])}listen(t,e,n){return this.delegate.listen(t,e,n)}listenGlobal(t,e,n){return this.delegate.listen(t,e,n)}setElementProperty(t,e,n){this.delegate.setProperty(t,e,n)}setElementAttribute(t,e,n){const[r,i]=xr(e);null!=n?this.delegate.setAttribute(t,i,n,r):this.delegate.removeAttribute(t,i,r)}setBindingDebugInfo(t,e,n){}setElementClass(t,e,n){n?this.delegate.addClass(t,e):this.delegate.removeClass(t,e)}setElementStyle(t,e,n){null!=n?this.delegate.setStyle(t,e,n):this.delegate.removeStyle(t,e)}invokeElementMethod(t,e,n){t[e].apply(t,n)}setText(t,e){this.delegate.setValue(t,e)}animate(){throw new Error("Renderer.animate is no longer supported!")}}function ri(t,e,n,r){return new ii(t,e,n,r)}class ii{constructor(t,e,n,r){this._moduleType=t,this._parent=e,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(t){const e=t._def,n=t._providers=new Array(e.providers.length);for(let r=0;r<e.providers.length;r++){const i=e.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=Vr(t,i))}}(this)}get(t,e=Pe.THROW_IF_NOT_FOUND,n=d.Default){let r=0;return n&d.SkipSelf?r|=1:n&d.Self&&(r|=4),Fr(this,{token:t,tokenKey:rr(t),flags:r},e)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(fn)}destroy(){if(this._destroyed)throw new Error(`The ng module ${m(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(t,e){const n=t._def,r=new Set;for(let i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){const e=t._providers[i];if(e&&e!==jr){const t=e.ngOnDestroy;"function"!=typeof t||r.has(e)||(t.apply(e),r.add(e))}}}(this),this._destroyListeners.forEach(t=>t())}onDestroy(t){this._destroyListeners.push(t)}}const oi=rr(mn),si=rr(wn),ai=rr(vn),ui=rr(Hn),ci=rr(Un),li=rr(ke),hi=rr(Pe),fi=rr(x);function di(t,e,n,r,i,o,s,a){const u=[];if(s)for(let l in s){const[t,e]=s[l];u[t]={flags:8,name:l,nonMinifiedName:e,ns:null,securityContext:null,suffix:null}}const c=[];if(a)for(let l in a)c.push({type:1,propName:l,target:null,eventName:a[l]});return yi(t,e|=16384,n,r,i,i,o,u,c)}function pi(t,e,n,r,i){return yi(-1,t,e,0,n,r,i)}function yi(t,e,n,r,i,o,s,a,u){const{matchedQueries:c,references:l,matchedQueryIds:h}=gr(n);u||(u=[]),a||(a=[]),o=w(o);const f=mr(s,m(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:h,references:l,ngContentIndex:-1,childCount:r,bindings:a,bindingFlags:Nr(a),outputs:u,element:null,provider:{token:i,value:o,deps:f},text:null,query:null,ngContent:null}}function vi(t,e){return bi(t,e)}function gi(t,e){let n=t;for(;n.parent&&!yr(n);)n=n.parent;return wi(n.parent,dr(n),!0,e.provider.value,e.provider.deps)}function mi(t,e){const n=wi(t,e.parent,(32768&e.flags)>0,e.provider.value,e.provider.deps);if(e.outputs.length)for(let r=0;r<e.outputs.length;r++){const i=e.outputs[r],o=n[i.propName];if(!sn(o))throw new Error(`@Output ${i.propName} not initialized in '${n.constructor.name}'.`);{const n=o.subscribe(_i(t,e.parent.nodeIndex,i.eventName));t.disposables[e.outputIndex+r]=n.unsubscribe.bind(n)}}return n}function _i(t,e,n){return r=>hr(t,e,n,r)}function bi(t,e){const n=(8192&e.flags)>0,r=e.provider;switch(201347067&e.flags){case 512:return wi(t,e.parent,n,r.value,r.deps);case 1024:return function(t,e,n,r,i){const o=i.length;switch(o){case 0:return r();case 1:return r(Ci(t,e,n,i[0]));case 2:return r(Ci(t,e,n,i[0]),Ci(t,e,n,i[1]));case 3:return r(Ci(t,e,n,i[0]),Ci(t,e,n,i[1]),Ci(t,e,n,i[2]));default:const s=Array(o);for(let r=0;r<o;r++)s[r]=Ci(t,e,n,i[r]);return r(...s)}}(t,e.parent,n,r.value,r.deps);case 2048:return Ci(t,e.parent,n,r.deps[0]);case 256:return r.value}}function wi(t,e,n,r,i){const o=i.length;switch(o){case 0:return new r;case 1:return new r(Ci(t,e,n,i[0]));case 2:return new r(Ci(t,e,n,i[0]),Ci(t,e,n,i[1]));case 3:return new r(Ci(t,e,n,i[0]),Ci(t,e,n,i[1]),Ci(t,e,n,i[2]));default:const s=new Array(o);for(let r=0;r<o;r++)s[r]=Ci(t,e,n,i[r]);return new r(...s)}}const Ei={};function Ci(t,e,n,r,i=Pe.THROW_IF_NOT_FOUND){if(8&r.flags)return r.token;const o=t;2&r.flags&&(i=null);const s=r.tokenKey;s===li&&(n=!(!e||!e.element.componentView)),e&&1&r.flags&&(n=!1,e=e.parent);let a=t;for(;a;){if(e)switch(s){case oi:return ei(Oi(a,e,n));case si:return Oi(a,e,n).renderer;case ai:return new vn(Xn(a,e.nodeIndex).renderElement);case ui:return Xn(a,e.nodeIndex).viewContainer;case ci:if(e.element.template)return Xn(a,e.nodeIndex).template;break;case li:return Yr(Oi(a,e,n));case hi:case fi:return Jr(a,e);default:const t=(n?e.element.allProviders:e.element.publicProviders)[s];if(t){let e=$n(a,t.nodeIndex);return e||(e={instance:bi(a,t)},a.nodes[t.nodeIndex]=e),e.instance}}n=yr(a),e=dr(a),a=a.parent,4&r.flags&&(a=null)}const u=o.root.injector.get(r.token,Ei);return u!==Ei||i===Ei?u:o.root.ngModule.injector.get(r.token,i)}function Oi(t,e,n){let r;if(n)r=Xn(t,e.nodeIndex).componentView;else for(r=t;r.parent&&!yr(r);)r=r.parent;return r}function Ti(t,e,n,r,i,o){if(32768&n.flags){const e=Xn(t,n.parent.nodeIndex).componentView;2&e.def.flags&&(e.state|=8)}if(e.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};const e=We.unwrap(t.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new an(e,i,0!=(2&t.state))}return t.oldValues[n.bindingIndex+r]=i,o}function Ii(t,e){if(!(t.def.nodeFlags&e))return;const n=t.def.nodes;let r=0;for(let i=0;i<n.length;i++){const o=n[i];let s=o.parent;for(!s&&o.flags&e&&xi(t,i,o.flags&e,r++),0==(o.childFlags&e)&&(i+=o.childCount);s&&1&s.flags&&i===s.nodeIndex+s.childCount;)s.directChildFlags&e&&(r=Si(t,s,e,r)),s=s.parent}}function Si(t,e,n,r){for(let i=e.nodeIndex+1;i<=e.nodeIndex+e.childCount;i++){const e=t.def.nodes[i];e.flags&n&&xi(t,i,e.flags&n,r++),i+=e.childCount}return r}function xi(t,e,n,r){const i=$n(t,e);if(!i)return;const o=i.instance;o&&(tr.setCurrentNode(t,e),1048576&n&&Kn(t,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&Kn(t,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}const Ni=new S("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>st}),ki={},Ai=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}(),ji=void 0;var Ri=["en",[["a","p"],["AM","PM"],ji],[["AM","PM"],ji,ji],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ji,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ji,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ji,"{1} 'at' {0}",ji],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];function Pi(t){return Di(t)[Ai.PluralCase]}function Di(t){const e=t.toLowerCase().replace(/_/g,"-");let n=ki[e];if(n)return n;const r=e.split("-")[0];if(n=ki[r],n)return n;if("en"===r)return Ri;throw new Error(`Missing locale data for the locale "${t}".`)}class Mi extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}}function Li(){return this._results[ze()]()}class Fi{constructor(){this.dirty=!0,this._results=[],this.changes=new Mi,this.length=0;const t=ze(),e=Fi.prototype;e[t]||(e[t]=Li)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const Vi=new S("Application Initializer");class Ui{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();on(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}const qi=new S("AppId");function Hi(){return`${Bi()}${Bi()}${Bi()}`}function Bi(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zi=new S("Platform Initializer"),Qi=new S("Platform ID"),Gi=new S("appBootstrapListener");class Wi{log(t){console.log(t)}warn(t){console.warn(t)}}const Ki=new S("LocaleId");function Yi(){throw new Error("Runtime compiler is not loaded")}const Xi=Yi,$i=Yi,Zi=Yi,Ji=Yi;class to{constructor(){this.compileModuleSync=Xi,this.compileModuleAsync=$i,this.compileModuleAndAllComponentsSync=Zi,this.compileModuleAndAllComponentsAsync=Ji}clearCache(){}clearCacheFor(t){}getModuleId(t){}}class eo{}let no,ro;function io(){const t=I.wtf;return!(!t||(no=t.trace,!no)||(ro=no.events,0))}const oo=io();function so(t,e){return null}const ao=oo?function(t,e=null){return ro.createScope(t,e)}:(t,e)=>so,uo=oo?function(t,e){return no.leaveScope(t,e),e}:(t,e)=>e,co=(()=>Promise.resolve(0))();function lo(t){"undefined"==typeof Zone?co.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ho{constructor({enableLongStackTrace:t=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi(!1),this.onMicrotaskEmpty=new Mi(!1),this.onStable=new Mi(!1),this.onError=new Mi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");var e;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(e=this)._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,i,o,s)=>{try{return vo(e),t.invokeTask(r,i,o,s)}finally{go(e)}},onInvoke:(t,n,r,i,o,s,a)=>{try{return vo(e),t.invoke(r,i,o,s,a)}finally{go(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e.hasPendingMicrotasks=i.microTask,yo(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ho.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ho.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,po,fo,fo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function fo(){}const po={};function yo(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function vo(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function go(t){t._nesting--,yo(t)}class mo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mi,this.onMicrotaskEmpty=new Mi,this.onStable=new Mi,this.onError=new Mi}run(t){return t()}runGuarded(t){return t()}runOutsideAngular(t){return t()}runTask(t){return t()}}class _o{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ho.assertNotInAngularZone(),lo(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())lo(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}class bo{constructor(){this._applications=new Map,Oo.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Oo.findTestabilityInTree(this,t,e)}}class wo{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Eo(t){Oo=t}let Co,Oo=new wo;const To=new S("AllowMultipleToken");class Io{constructor(t,e){this.name=t,this.token=e}}function So(t,e,n=[]){const r="Platform: "+e,i=new S(r);return(e=[])=>{let o=xo();if(!o||o.injector.get(To,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0});!function(t){if(Co&&!Co.destroyed&&!Co.injector.get(To,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Co=t.get(No);const e=t.get(zi,null);e&&e.forEach(t=>t())}(Pe.create({providers:t,name:r}))}return function(t){const e=xo();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function xo(){return Co&&!Co.destroyed?Co:null}class No{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t){let e;return e="noop"===t?new mo:("zone.js"===t?void 0:t)||new ho({enableLongStackTrace:Lt()}),e}(e?e.ngZone:void 0),r=[{provide:ho,useValue:n}];return n.run(()=>{const e=Pe.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Pt,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>jo(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return on(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Ui);return t.runInitializers(),t.donePromise.then(()=>(this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=ko({},e);return function(t,e,n){return t.get(eo).createCompiler([e]).compileModuleAsync(n)}(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ao);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${m(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}function ko(t,e){return Array.isArray(e)?e.reduce(ko,t):Object.assign({},t,e)}let Ao=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Lt(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ho.assertNotInAngularZone(),lo(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ho.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof un?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n instanceof pn?null:this._injector.get(L),i=n.create(Pe.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(_o,null);return o&&i.injector.get(bo).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Lt()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");const e=t._tickScope();try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1,uo(e)}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;jo(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Gi,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),jo(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t._tickScope=ao("ApplicationRef#tick()"),t})();function jo(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ro{constructor(t,e){this.name=t,this.callback=e}}class Po{constructor(t,e,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=t,e&&e instanceof Do&&e.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class Do extends Po{constructor(t,e,n){super(t,e,n),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=t}addChild(t){t&&(this.childNodes.push(t),t.parent=this)}removeChild(t){const e=this.childNodes.indexOf(t);-1!==e&&(t.parent=null,this.childNodes.splice(e,1))}insertChildrenAfter(t,e){const n=this.childNodes.indexOf(t);-1!==n&&(this.childNodes.splice(n+1,0,...e),e.forEach(e=>{e.parent&&e.parent.removeChild(e),t.parent=this}))}insertBefore(t,e){const n=this.childNodes.indexOf(t);-1===n?this.addChild(e):(e.parent&&e.parent.removeChild(e),e.parent=this,this.childNodes.splice(n,0,e))}query(t){return this.queryAll(t)[0]||null}queryAll(t){const e=[];return function t(e,n,r){e.childNodes.forEach(e=>{e instanceof Do&&(n(e)&&r.push(e),t(e,n,r))})}(this,t,e),e}queryAllNodes(t){const e=[];return function t(e,n,r){e instanceof Do&&e.childNodes.forEach(e=>{n(e)&&r.push(e),e instanceof Do&&t(e,n,r)})}(this,t,e),e}get children(){return this.childNodes.filter(t=>t instanceof Do)}triggerEventHandler(t,e){this.listeners.forEach(n=>{n.name==t&&n.callback(e)})}}const Mo=new Map,Lo=function(t){return Mo.get(t)||null};function Fo(t){Mo.set(t.nativeNode,t)}const Vo=So(null,"core",[{provide:Qi,useValue:"unknown"},{provide:No,deps:[Pe]},{provide:bo,deps:[]},{provide:Wi,deps:[]}]);function Uo(){return Fn}function qo(){return Vn}function Ho(t){return t||"en-US"}function Bo(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}class zo{constructor(t){}}function Qo(t,e,n,r,i,o){t|=1;const{matchedQueries:s,references:a,matchedQueryIds:u}=gr(e);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:t,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:s,matchedQueryIds:u,references:a,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?wr(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||er},provider:null,text:null,query:null,ngContent:null}}function Go(t,e,n,r,i,o,s=[],a,u,c,l,h){c||(c=er);const{matchedQueries:f,references:d,matchedQueryIds:p}=gr(n);let y=null,v=null;o&&([y,v]=xr(o)),a=a||[];const g=new Array(a.length);for(let b=0;b<a.length;b++){const[t,e,n]=a[b],[r,i]=xr(e);let o=void 0,s=void 0;switch(15&t){case 4:s=n;break;case 1:case 8:o=n}g[b]={flags:t,ns:r,name:i,nonMinifiedName:i,securityContext:o,suffix:s}}u=u||[];const m=new Array(u.length);for(let b=0;b<u.length;b++){const[t,e]=u[b];m[b]={type:0,target:t,eventName:e,propName:null}}const _=(s=s||[]).map(([t,e])=>{const[n,r]=xr(t);return[n,r,e]});return h=function(t){if(t&&"$$undefined"===t.id){const e=null!=t.encapsulation&&t.encapsulation!==q.None||t.styles.length||Object.keys(t.data).length;t.id=e?"c"+or++:"$$empty"}return t&&"$$empty"===t.id&&(t=null),t||null}(h),l&&(e|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:f,matchedQueryIds:p,references:d,ngContentIndex:r,childCount:i,bindings:g,bindingFlags:Nr(g),outputs:m,element:{ns:y,name:v,attrs:_,template:null,componentProvider:null,componentView:l||null,componentRendererType:h,publicProviders:null,allProviders:null,handleEvent:c||er},provider:null,text:null,query:null,ngContent:null}}function Wo(t,e,n){const r=n.element,i=t.root.selectorOrNode,o=t.renderer;let s;if(t.parent||!i){s=r.name?o.createElement(r.name,r.ns):o.createComment("");const i=_r(t,e,n);i&&o.appendChild(i,s)}else s=o.selectRootElement(i,!!r.componentRendererType&&r.componentRendererType.encapsulation===q.ShadowDom);if(r.attrs)for(let a=0;a<r.attrs.length;a++){const[t,e,n]=r.attrs[a];o.setAttribute(s,e,n,t)}return s}function Ko(t,e,n,r){for(let s=0;s<n.outputs.length;s++){const a=n.outputs[s],u=Yo(t,n.nodeIndex,(o=a.eventName,(i=a.target)?`${i}:${o}`:o));let c=a.target,l=t;"component"===a.target&&(c=null,l=e);const h=l.renderer.listen(c||r,a.eventName,u);t.disposables[n.outputIndex+s]=h}var i,o}function Yo(t,e,n){return r=>hr(t,e,n,r)}function Xo(t,e,n,r){if(!ar(t,e,n,r))return!1;const i=e.bindings[n],o=Xn(t,e.nodeIndex),s=o.renderElement,a=i.name;switch(15&i.flags){case 1:!function(t,e,n,r,i,o){const s=e.securityContext;let a=s?t.root.sanitizer.sanitize(s,o):o;a=null!=a?a.toString():null;const u=t.renderer;null!=o?u.setAttribute(n,i,a,r):u.removeAttribute(n,i,r)}(t,i,s,i.ns,a,r);break;case 2:!function(t,e,n,r){const i=t.renderer;r?i.addClass(e,n):i.removeClass(e,n)}(t,s,a,r);break;case 4:!function(t,e,n,r,i){let o=t.root.sanitizer.sanitize(ae.STYLE,i);if(null!=o){o=o.toString();const t=e.suffix;null!=t&&(o+=t)}else o=null;const s=t.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(t,i,s,a,r);break;case 8:!function(t,e,n,r,i){const o=e.securityContext;let s=o?t.root.sanitizer.sanitize(o,i):i;t.renderer.setProperty(n,r,s)}(33554432&e.flags&&32&i.flags?o.componentView:t,i,s,a,r)}return!0}function $o(t){const e=t.def.nodeMatchedQueries;for(;t.parent&&vr(t);){let n=t.parentNodeDef;t=t.parent;const r=n.nodeIndex+n.childCount;for(let i=0;i<=r;i++){const r=t.def.nodes[i];67108864&r.flags&&536870912&r.flags&&(r.query.filterId&e)===r.query.filterId&&Jn(t,i).setDirty(),!(1&r.flags&&i+r.childCount<n.nodeIndex)&&67108864&r.childFlags&&536870912&r.childFlags||(i+=r.childCount)}}if(134217728&t.def.nodeFlags)for(let n=0;n<t.def.nodes.length;n++){const e=t.def.nodes[n];134217728&e.flags&&536870912&e.flags&&Jn(t,n).setDirty(),n+=e.childCount}}function Zo(t,e){const n=Jn(t,e.nodeIndex);if(!n.dirty)return;let r,i=void 0;if(67108864&e.flags){const n=e.parent.parent;i=Jo(t,n.nodeIndex,n.nodeIndex+n.childCount,e.query,[]),r=$n(t,e.parent.nodeIndex).instance}else 134217728&e.flags&&(i=Jo(t,0,t.def.nodes.length-1,e.query,[]),r=t.component);n.reset(i);const o=e.query.bindings;let s=!1;for(let a=0;a<o.length;a++){const t=o[a];let e;switch(t.bindingType){case 0:e=n.first;break;case 1:e=n,s=!0}r[t.propName]=e}s&&n.notifyOnChanges()}function Jo(t,e,n,r,i){for(let o=e;o<=n;o++){const e=t.def.nodes[o],n=e.matchedQueries[r.id];if(null!=n&&i.push(ts(t,e,n)),1&e.flags&&e.element.template&&(e.element.template.nodeMatchedQueries&r.filterId)===r.filterId){const n=Xn(t,o);if((e.childMatchedQueries&r.filterId)===r.filterId&&(Jo(t,o+1,o+e.childCount,r,i),o+=e.childCount),16777216&e.flags){const t=n.viewContainer._embeddedViews;for(let e=0;e<t.length;e++){const o=t[e],s=fr(o);s&&s===n&&Jo(o,0,o.def.nodes.length-1,r,i)}}const s=n.template._projectedViews;if(s)for(let t=0;t<s.length;t++){const e=s[t];Jo(e,0,e.def.nodes.length-1,r,i)}}(e.childMatchedQueries&r.filterId)!==r.filterId&&(o+=e.childCount)}return i}function ts(t,e,n){if(null!=n)switch(n){case 1:return Xn(t,e.nodeIndex).renderElement;case 0:return new vn(Xn(t,e.nodeIndex).renderElement);case 2:return Xn(t,e.nodeIndex).template;case 3:return Xn(t,e.nodeIndex).viewContainer;case 4:return $n(t,e.nodeIndex).instance}}function es(t,e,n){const r=_r(t,e,n);r&&Or(t,n.ngContent.index,1,r,null,void 0)}function ns(t,e){const n=Object.keys(e),r=n.length,i=new Array(r);for(let o=0;o<r;o++){const t=n[o];i[e[t]]=t}return function(t,e,n){const r=new Array(n.length);for(let i=0;i<n.length;i++){const t=n[i];r[i]={flags:8,name:t,ns:null,nonMinifiedName:t,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:64,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Nr(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}(0,t,i)}function rs(t,e,n){const r=new Array(n.length-1);for(let i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function is(t,e,n){let r;const i=t.renderer;r=i.createText(n.text.prefix);const o=_r(t,e,n);return o&&i.appendChild(o,r),{renderText:r}}function os(t,e){return(null!=t?t.toString():"")+e.suffix}function ss(t,e,n,r){let i=0,o=0,s=0,a=0,u=0,c=null,l=null,h=!1,f=!1,d=null;for(let p=0;p<e.length;p++){const t=e[p];if(t.nodeIndex=p,t.parent=c,t.bindingIndex=i,t.outputIndex=o,t.renderParent=l,s|=t.flags,u|=t.matchedQueryIds,t.element){const e=t.element;e.publicProviders=c?c.element.publicProviders:Object.create(null),e.allProviders=e.publicProviders,h=!1,f=!1,t.element.template&&(u|=t.element.template.nodeMatchedQueries)}if(us(c,t,e.length),i+=t.bindings.length,o+=t.outputs.length,!l&&3&t.flags&&(d=t),20224&t.flags){h||(h=!0,c.element.publicProviders=Object.create(c.element.publicProviders),c.element.allProviders=c.element.publicProviders);const e=0!=(32768&t.flags);0==(8192&t.flags)||e?c.element.publicProviders[rr(t.provider.token)]=t:(f||(f=!0,c.element.allProviders=Object.create(c.element.publicProviders)),c.element.allProviders[rr(t.provider.token)]=t),e&&(c.element.componentProvider=t)}if(c?(c.childFlags|=t.flags,c.directChildFlags|=t.flags,c.childMatchedQueries|=t.matchedQueryIds,t.element&&t.element.template&&(c.childMatchedQueries|=t.element.template.nodeMatchedQueries)):a|=t.flags,t.childCount>0)c=t,as(t)||(l=t);else for(;c&&p===c.nodeIndex+c.childCount;){const t=c.parent;t&&(t.childFlags|=c.childFlags,t.childMatchedQueries|=c.childMatchedQueries),c=t,l=c&&as(c)?c.renderParent:c}}return{factory:null,nodeFlags:s,rootNodeFlags:a,nodeMatchedQueries:u,flags:t,nodes:e,updateDirectives:n||er,updateRenderer:r||er,handleEvent:(t,n,r,i)=>e[n].element.handleEvent(t,r,i),bindingCount:i,outputCount:o,lastRenderRootNode:d}}function as(t){return 0!=(1&t.flags)&&null===t.element.name}function us(t,e,n){const r=e.element&&e.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${e.nodeIndex}!`)}if(20224&e.flags&&0==(1&(t?t.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${e.nodeIndex}!`);if(e.query){if(67108864&e.flags&&(!t||0==(16384&t.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${e.nodeIndex}!`);if(134217728&e.flags&&t)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${e.nodeIndex}!`)}if(e.childCount){const r=t?t.nodeIndex+t.childCount:n-1;if(e.nodeIndex<=r&&e.nodeIndex+e.childCount>r)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${e.nodeIndex}!`)}}function cs(t,e,n,r){const i=fs(t.root,t.renderer,t,e,n);return ds(i,t.component,r),ps(i),i}function ls(t,e,n){const r=fs(t,t.renderer,null,null,e);return ds(r,n,n),ps(r),r}function hs(t,e,n,r){const i=e.element.componentRendererType;let o;return o=i?t.root.rendererFactory.createRenderer(r,i):t.root.renderer,fs(t.root,o,t,e.element.componentProvider,n)}function fs(t,e,n,r,i){const o=new Array(i.nodes.length),s=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:t,renderer:e,oldValues:new Array(i.bindingCount),disposables:s,initIndex:-1}}function ds(t,e,n){t.component=e,t.context=n}function ps(t){let e;yr(t)&&(e=Xn(t.parent,t.parentNodeDef.parent.nodeIndex).renderElement);const n=t.def,r=t.nodes;for(let i=0;i<n.nodes.length;i++){const o=n.nodes[i];let s;switch(tr.setCurrentNode(t,i),201347067&o.flags){case 1:const n=Wo(t,e,o);let a=void 0;if(33554432&o.flags){const e=wr(o.element.componentView);a=tr.createComponentView(t,o,e,n)}Ko(t,a,o,n),s={renderElement:n,componentView:a,viewContainer:null,template:o.element.template?$r(t,o):void 0},16777216&o.flags&&(s.viewContainer=Wr(t,o,s));break;case 2:s=is(t,e,o);break;case 512:case 1024:case 2048:case 256:s=r[i],s||4096&o.flags||(s={instance:vi(t,o)});break;case 16:s={instance:gi(t,o)};break;case 16384:s=r[i],s||(s={instance:mi(t,o)}),32768&o.flags&&ds(Xn(t,o.parent.nodeIndex).componentView,s.instance,s.instance);break;case 32:case 64:case 128:s={value:void 0};break;case 67108864:case 134217728:s=new Fi;break;case 8:es(t,e,o),s=void 0}r[i]=s}Cs(t,Es.CreateViewNodes),Ss(t,201326592,268435456,0)}function ys(t){ms(t),tr.updateDirectives(t,1),Os(t,Es.CheckNoChanges),tr.updateRenderer(t,1),Cs(t,Es.CheckNoChanges),t.state&=-97}function vs(t){1&t.state?(t.state&=-2,t.state|=2):t.state&=-3,Wn(t,0,256),ms(t),tr.updateDirectives(t,0),Os(t,Es.CheckAndUpdate),Ss(t,67108864,536870912,0);let e=Wn(t,256,512);Ii(t,2097152|(e?1048576:0)),tr.updateRenderer(t,0),Cs(t,Es.CheckAndUpdate),Ss(t,134217728,536870912,0),e=Wn(t,512,768),Ii(t,8388608|(e?4194304:0)),2&t.def.flags&&(t.state&=-9),t.state&=-97,Wn(t,768,1024)}function gs(t,e,n,r,i,o,s,a,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,s,a,u,c,l,h){switch(201347067&e.flags){case 1:return function(t,e,n,r,i,o,s,a,u,c,l,h){const f=e.bindings.length;let d=!1;return f>0&&Xo(t,e,0,n)&&(d=!0),f>1&&Xo(t,e,1,r)&&(d=!0),f>2&&Xo(t,e,2,i)&&(d=!0),f>3&&Xo(t,e,3,o)&&(d=!0),f>4&&Xo(t,e,4,s)&&(d=!0),f>5&&Xo(t,e,5,a)&&(d=!0),f>6&&Xo(t,e,6,u)&&(d=!0),f>7&&Xo(t,e,7,c)&&(d=!0),f>8&&Xo(t,e,8,l)&&(d=!0),f>9&&Xo(t,e,9,h)&&(d=!0),d}(t,e,n,r,i,o,s,a,u,c,l,h);case 2:return function(t,e,n,r,i,o,s,a,u,c,l,h){let f=!1;const d=e.bindings,p=d.length;if(p>0&&ar(t,e,0,n)&&(f=!0),p>1&&ar(t,e,1,r)&&(f=!0),p>2&&ar(t,e,2,i)&&(f=!0),p>3&&ar(t,e,3,o)&&(f=!0),p>4&&ar(t,e,4,s)&&(f=!0),p>5&&ar(t,e,5,a)&&(f=!0),p>6&&ar(t,e,6,u)&&(f=!0),p>7&&ar(t,e,7,c)&&(f=!0),p>8&&ar(t,e,8,l)&&(f=!0),p>9&&ar(t,e,9,h)&&(f=!0),f){let f=e.text.prefix;p>0&&(f+=os(n,d[0])),p>1&&(f+=os(r,d[1])),p>2&&(f+=os(i,d[2])),p>3&&(f+=os(o,d[3])),p>4&&(f+=os(s,d[4])),p>5&&(f+=os(a,d[5])),p>6&&(f+=os(u,d[6])),p>7&&(f+=os(c,d[7])),p>8&&(f+=os(l,d[8])),p>9&&(f+=os(h,d[9]));const y=Yn(t,e.nodeIndex).renderText;t.renderer.setValue(y,f)}return f}(t,e,n,r,i,o,s,a,u,c,l,h);case 16384:return function(t,e,n,r,i,o,s,a,u,c,l,h){const f=$n(t,e.nodeIndex),d=f.instance;let p=!1,y=void 0;const v=e.bindings.length;return v>0&&sr(t,e,0,n)&&(p=!0,y=Ti(t,f,e,0,n,y)),v>1&&sr(t,e,1,r)&&(p=!0,y=Ti(t,f,e,1,r,y)),v>2&&sr(t,e,2,i)&&(p=!0,y=Ti(t,f,e,2,i,y)),v>3&&sr(t,e,3,o)&&(p=!0,y=Ti(t,f,e,3,o,y)),v>4&&sr(t,e,4,s)&&(p=!0,y=Ti(t,f,e,4,s,y)),v>5&&sr(t,e,5,a)&&(p=!0,y=Ti(t,f,e,5,a,y)),v>6&&sr(t,e,6,u)&&(p=!0,y=Ti(t,f,e,6,u,y)),v>7&&sr(t,e,7,c)&&(p=!0,y=Ti(t,f,e,7,c,y)),v>8&&sr(t,e,8,l)&&(p=!0,y=Ti(t,f,e,8,l,y)),v>9&&sr(t,e,9,h)&&(p=!0,y=Ti(t,f,e,9,h,y)),y&&d.ngOnChanges(y),65536&e.flags&&Kn(t,256,e.nodeIndex)&&d.ngOnInit(),262144&e.flags&&d.ngDoCheck(),p}(t,e,n,r,i,o,s,a,u,c,l,h);case 32:case 64:case 128:return function(t,e,n,r,i,o,s,a,u,c,l,h){const f=e.bindings;let d=!1;const p=f.length;if(p>0&&ar(t,e,0,n)&&(d=!0),p>1&&ar(t,e,1,r)&&(d=!0),p>2&&ar(t,e,2,i)&&(d=!0),p>3&&ar(t,e,3,o)&&(d=!0),p>4&&ar(t,e,4,s)&&(d=!0),p>5&&ar(t,e,5,a)&&(d=!0),p>6&&ar(t,e,6,u)&&(d=!0),p>7&&ar(t,e,7,c)&&(d=!0),p>8&&ar(t,e,8,l)&&(d=!0),p>9&&ar(t,e,9,h)&&(d=!0),d){const d=Zn(t,e.nodeIndex);let y;switch(201347067&e.flags){case 32:y=new Array(f.length),p>0&&(y[0]=n),p>1&&(y[1]=r),p>2&&(y[2]=i),p>3&&(y[3]=o),p>4&&(y[4]=s),p>5&&(y[5]=a),p>6&&(y[6]=u),p>7&&(y[7]=c),p>8&&(y[8]=l),p>9&&(y[9]=h);break;case 64:y={},p>0&&(y[f[0].name]=n),p>1&&(y[f[1].name]=r),p>2&&(y[f[2].name]=i),p>3&&(y[f[3].name]=o),p>4&&(y[f[4].name]=s),p>5&&(y[f[5].name]=a),p>6&&(y[f[6].name]=u),p>7&&(y[f[7].name]=c),p>8&&(y[f[8].name]=l),p>9&&(y[f[9].name]=h);break;case 128:const t=n;switch(p){case 1:y=t.transform(n);break;case 2:y=t.transform(r);break;case 3:y=t.transform(r,i);break;case 4:y=t.transform(r,i,o);break;case 5:y=t.transform(r,i,o,s);break;case 6:y=t.transform(r,i,o,s,a);break;case 7:y=t.transform(r,i,o,s,a,u);break;case 8:y=t.transform(r,i,o,s,a,u,c);break;case 9:y=t.transform(r,i,o,s,a,u,c,l);break;case 10:y=t.transform(r,i,o,s,a,u,c,l,h)}}d.value=y}return d}(t,e,n,r,i,o,s,a,u,c,l,h);default:throw"unreachable"}}(t,e,r,i,o,s,a,u,c,l,h,f):function(t,e,n){switch(201347067&e.flags){case 1:return function(t,e,n){let r=!1;for(let i=0;i<n.length;i++)Xo(t,e,i,n[i])&&(r=!0);return r}(t,e,n);case 2:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)ar(t,e,o,n[o])&&(i=!0);if(i){let i="";for(let t=0;t<n.length;t++)i+=os(n[t],r[t]);i=e.text.prefix+i;const o=Yn(t,e.nodeIndex).renderText;t.renderer.setValue(o,i)}return i}(t,e,n);case 16384:return function(t,e,n){const r=$n(t,e.nodeIndex),i=r.instance;let o=!1,s=void 0;for(let a=0;a<n.length;a++)sr(t,e,a,n[a])&&(o=!0,s=Ti(t,r,e,a,n[a],s));return s&&i.ngOnChanges(s),65536&e.flags&&Kn(t,256,e.nodeIndex)&&i.ngOnInit(),262144&e.flags&&i.ngDoCheck(),o}(t,e,n);case 32:case 64:case 128:return function(t,e,n){const r=e.bindings;let i=!1;for(let o=0;o<n.length;o++)ar(t,e,o,n[o])&&(i=!0);if(i){const i=Zn(t,e.nodeIndex);let o;switch(201347067&e.flags){case 32:o=n;break;case 64:o={};for(let i=0;i<n.length;i++)o[r[i].name]=n[i];break;case 128:const t=n[0],e=n.slice(1);o=t.transform(...e)}i.value=o}return i}(t,e,n);default:throw"unreachable"}}(t,e,r)}function ms(t){const e=t.def;if(4&e.nodeFlags)for(let n=0;n<e.nodes.length;n++){const r=e.nodes[n];if(4&r.flags){const e=Xn(t,n).template._projectedViews;if(e)for(let n=0;n<e.length;n++){const r=e[n];r.state|=32,lr(r,t)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function _s(t,e,n,r,i,o,s,a,u,c,l,h,f){return 0===n?function(t,e,n,r,i,o,s,a,u,c,l,h){const f=e.bindings.length;f>0&&ur(t,e,0,n),f>1&&ur(t,e,1,r),f>2&&ur(t,e,2,i),f>3&&ur(t,e,3,o),f>4&&ur(t,e,4,s),f>5&&ur(t,e,5,a),f>6&&ur(t,e,6,u),f>7&&ur(t,e,7,c),f>8&&ur(t,e,8,l),f>9&&ur(t,e,9,h)}(t,e,r,i,o,s,a,u,c,l,h,f):function(t,e,n){for(let r=0;r<n.length;r++)ur(t,e,r,n[r])}(t,e,r),!1}function bs(t,e){if(Jn(t,e.nodeIndex).dirty)throw zn(tr.createDebugContext(t,e.nodeIndex),`Query ${e.query.id} not dirty`,`Query ${e.query.id} dirty`,0!=(1&t.state))}function ws(t){if(!(128&t.state)){if(Os(t,Es.Destroy),Cs(t,Es.Destroy),Ii(t,131072),t.disposables)for(let e=0;e<t.disposables.length;e++)t.disposables[e]();!function(t){if(!(16&t.state))return;const e=fr(t);if(e){const n=e.template._projectedViews;n&&(V(n,n.indexOf(t)),tr.dirtyParentQueries(t))}}(t),t.renderer.destroyNode&&function(t){const e=t.def.nodes.length;for(let n=0;n<e;n++){const e=t.def.nodes[n];1&e.flags?t.renderer.destroyNode(Xn(t,n).renderElement):2&e.flags?t.renderer.destroyNode(Yn(t,n).renderText):(67108864&e.flags||134217728&e.flags)&&Jn(t,n).destroy()}}(t),yr(t)&&t.renderer.destroy(),t.state|=128}}const Es=function(){var t={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return t[t.CreateViewNodes]="CreateViewNodes",t[t.CheckNoChanges]="CheckNoChanges",t[t.CheckNoChangesProjectedViews]="CheckNoChangesProjectedViews",t[t.CheckAndUpdate]="CheckAndUpdate",t[t.CheckAndUpdateProjectedViews]="CheckAndUpdateProjectedViews",t[t.Destroy]="Destroy",t}();function Cs(t,e){const n=t.def;if(33554432&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];33554432&i.flags?Ts(Xn(t,r).componentView,e):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function Os(t,e){const n=t.def;if(16777216&n.nodeFlags)for(let r=0;r<n.nodes.length;r++){const i=n.nodes[r];if(16777216&i.flags){const n=Xn(t,r).viewContainer._embeddedViews;for(let t=0;t<n.length;t++)Ts(n[t],e)}else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function Ts(t,e){const n=t.state;switch(e){case Es.CheckNoChanges:0==(128&n)&&(12==(12&n)?ys(t):64&n&&Is(t,Es.CheckNoChangesProjectedViews));break;case Es.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?ys(t):64&n&&Is(t,e));break;case Es.CheckAndUpdate:0==(128&n)&&(12==(12&n)?vs(t):64&n&&Is(t,Es.CheckAndUpdateProjectedViews));break;case Es.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?vs(t):64&n&&Is(t,e));break;case Es.Destroy:ws(t);break;case Es.CreateViewNodes:ps(t)}}function Is(t,e){Os(t,e),Cs(t,e)}function Ss(t,e,n,r){if(!(t.def.nodeFlags&e&&t.def.nodeFlags&n))return;const i=t.def.nodes.length;for(let o=0;o<i;o++){const i=t.def.nodes[o];if(i.flags&e&&i.flags&n)switch(tr.setCurrentNode(t,i.nodeIndex),r){case 0:Zo(t,i);break;case 1:bs(t,i)}i.childFlags&e&&i.childFlags&n||(o+=i.childCount)}}let xs=!1;function Ns(t,e,n,r,i,o){const s=i.injector.get(_n);return ls(As(t,i,s,e,n),r,o)}function ks(t,e,n,r,i,o){const s=i.injector.get(_n),a=As(t,i,new ca(s),e,n),u=qs(r);return aa(Ws.create,ls,null,[a,u,o])}function As(t,e,n,r,i){const o=e.injector.get(ue),s=e.injector.get(Pt),a=n.createRenderer(null,null);return{ngModule:e,injector:t,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:a,errorHandler:s}}function js(t,e,n,r){const i=qs(n);return aa(Ws.create,cs,null,[t,e,i,r])}function Rs(t,e,n,r){return n=Ls.get(e.element.componentProvider.provider.token)||qs(n),aa(Ws.create,hs,null,[t,e,n,r])}function Ps(t,e,n,r){return ri(t,e,n,function(t){const{hasOverrides:e,hasDeprecatedOverrides:n}=function(t){let e=!1,n=!1;return 0===Ds.size||(t.providers.forEach(t=>{const r=Ds.get(t.token);3840&t.flags&&r&&(e=!0,n=n||r.deprecatedBehavior)}),t.modules.forEach(t=>{Ms.forEach((r,i)=>{v(i).providedIn===t&&(e=!0,n=n||r.deprecatedBehavior)})})),{hasOverrides:e,hasDeprecatedOverrides:n}}(t);return e?(function(t){for(let e=0;e<t.providers.length;e++){const r=t.providers[e];n&&(r.flags|=4096);const i=Ds.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=mr(i.deps),r.value=i.value)}if(Ms.size>0){let e=new Set(t.modules);Ms.forEach((r,i)=>{if(e.has(v(i).providedIn)){let e={token:i,flags:r.flags|(n?4096:0),deps:mr(r.deps),value:r.value,index:t.providers.length};t.providers.push(e),t.providersByKey[rr(i)]=e}})}}(t=t.factory(()=>er)),t):t}(r))}const Ds=new Map,Ms=new Map,Ls=new Map;function Fs(t){let e;Ds.set(t.token,t),"function"==typeof t.token&&(e=v(t.token))&&"function"==typeof e.providedIn&&Ms.set(t.token,t)}function Vs(t,e){const n=wr(e.viewDefFactory),r=wr(n.nodes[0].element.componentView);Ls.set(t,r)}function Us(){Ds.clear(),Ms.clear(),Ls.clear()}function qs(t){if(0===Ds.size)return t;const e=function(t){const e=[];let n=null;for(let r=0;r<t.nodes.length;r++){const i=t.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&Ds.has(i.provider.token)&&(e.push(n.nodeIndex),n=null)}return e}(t);if(0===e.length)return t;t=t.factory(()=>er);for(let r=0;r<e.length;r++)n(t,e[r]);return t;function n(t,e){for(let n=e+1;n<t.nodes.length;n++){const e=t.nodes[n];if(1&e.flags)return;if(3840&e.flags){const t=e.provider,n=Ds.get(t.token);n&&(e.flags=-3841&e.flags|n.flags,t.deps=mr(n.deps),t.value=n.value)}}}}function Hs(t,e,n,r,i,o,s,a,u,c,l,h,f){const d=t.def.nodes[e];return gs(t,d,n,r,i,o,s,a,u,c,l,h,f),224&d.flags?Zn(t,e).value:void 0}function Bs(t,e,n,r,i,o,s,a,u,c,l,h,f){const d=t.def.nodes[e];return _s(t,d,n,r,i,o,s,a,u,c,l,h,f),224&d.flags?Zn(t,e).value:void 0}function zs(t){return aa(Ws.detectChanges,vs,null,[t])}function Qs(t){return aa(Ws.checkNoChanges,ys,null,[t])}function Gs(t){return aa(Ws.destroy,ws,null,[t])}const Ws=function(){var t={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return t[t.create]="create",t[t.detectChanges]="detectChanges",t[t.checkNoChanges]="checkNoChanges",t[t.destroy]="destroy",t[t.handleEvent]="handleEvent",t}();let Ks,Ys,Xs;function $s(t,e){Ys=t,Xs=e}function Zs(t,e,n,r){return $s(t,e),aa(Ws.handleEvent,t.def.handleEvent,null,[t,e,n,r])}function Js(t,e){if(128&t.state)throw Gn(Ws[Ks]);return $s(t,ra(t,0)),t.def.updateDirectives((function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?ea(t,o,r,i):na(t,o,r,i),16384&o.flags&&$s(t,ra(t,n)),224&o.flags?Zn(t,o.nodeIndex).value:void 0}),t)}function ta(t,e){if(128&t.state)throw Gn(Ws[Ks]);return $s(t,ia(t,0)),t.def.updateRenderer((function(t,n,r,...i){const o=t.def.nodes[n];return 0===e?ea(t,o,r,i):na(t,o,r,i),3&o.flags&&$s(t,ia(t,n)),224&o.flags?Zn(t,o.nodeIndex).value:void 0}),t)}function ea(t,e,n,r){if(gs(t,e,n,...r)){const o=1===n?r[0]:r;if(16384&e.flags){const n={};for(let t=0;t<e.bindings.length;t++){const r=e.bindings[t],s=o[t];8&r.flags&&(n[(i=r.nonMinifiedName,"ng-reflect-"+i.replace(/[$@]/g,"_").replace(fe,(...t)=>"-"+t[1].toLowerCase()))]=de(s))}const r=e.parent,s=Xn(t,r.nodeIndex).renderElement;if(r.element.name)for(let e in n){const r=n[e];null!=r?t.renderer.setAttribute(s,e,r):t.renderer.removeAttribute(s,e)}else t.renderer.setValue(s,"bindings="+JSON.stringify(n,null,2))}}var i}function na(t,e,n,r){_s(t,e,n,...r)}function ra(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(16384&e.flags&&e.bindings&&e.bindings.length)return n}return null}function ia(t,e){for(let n=e;n<t.def.nodes.length;n++){const e=t.def.nodes[n];if(3&e.flags&&e.bindings&&e.bindings.length)return n}return null}class oa{constructor(t,e){this.view=t,this.nodeIndex=e,null==e&&(this.nodeIndex=e=0),this.nodeDef=t.def.nodes[e];let n=this.nodeDef,r=t;for(;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=dr(r),r=r.parent;this.elDef=n,this.elView=r}get elOrCompView(){return Xn(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return Jr(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const t=[];if(this.elDef)for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&t.push(n.provider.token),e+=n.childCount}return t}get references(){const t={};if(this.elDef){sa(this.elView,this.elDef,t);for(let e=this.elDef.nodeIndex+1;e<=this.elDef.nodeIndex+this.elDef.childCount;e++){const n=this.elView.def.nodes[e];20224&n.flags&&sa(this.elView,n,t),e+=n.childCount}}return t}get componentRenderElement(){const t=function(t){for(;t&&!yr(t);)t=t.parent;return t.parent?Xn(t.parent,dr(t).nodeIndex):null}(this.elOrCompView);return t?t.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?pr(this.view,this.nodeDef):pr(this.elView,this.elDef)}logError(t,...e){let n,r;2&this.nodeDef.flags?(n=this.view.def,r=this.nodeDef.nodeIndex):(n=this.elView.def,r=this.elDef.nodeIndex);const i=function(t,e){let n=-1;for(let r=0;r<=e;r++)3&t.nodes[r].flags&&n++;return n}(n,r);let o=-1;n.factory(()=>(o++,o===i?t.error.bind(t,...e):er)),o<i&&(t.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),t.error(...e))}}function sa(t,e,n){for(let r in e.references)n[r]=ts(t,e,e.references[r])}function aa(t,e,n,r){const i=Ks,o=Ys,s=Xs;try{Ks=t;const a=e.apply(n,r);return Ys=o,Xs=s,Ks=i,a}catch(a){if(At(a)||!Ys)throw a;throw function(t,e){return t instanceof Error||(t=new Error(t.toString())),Qn(t,e),t}(a,ua())}}function ua(){return Ys?new oa(Ys,Xs):null}class ca{constructor(t){this.delegate=t}createRenderer(t,e){return new la(this.delegate.createRenderer(t,e))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class la{constructor(t){this.delegate=t,this.debugContextFactory=ua,this.data=this.delegate.data}createDebugContext(t){return this.debugContextFactory(t)}destroyNode(t){const e=Lo(t);!function(t){Mo.delete(t.nativeNode)}(e),e instanceof Po&&(e.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(t)}destroy(){this.delegate.destroy()}createElement(t,e){const n=this.delegate.createElement(t,e),r=this.createDebugContext(n);if(r){const e=new Do(n,null,r);e.name=t,Fo(e)}return n}createComment(t){const e=this.delegate.createComment(t),n=this.createDebugContext(e);return n&&Fo(new Po(e,null,n)),e}createText(t){const e=this.delegate.createText(t),n=this.createDebugContext(e);return n&&Fo(new Po(e,null,n)),e}appendChild(t,e){const n=Lo(t),r=Lo(e);n&&r&&n instanceof Do&&n.addChild(r),this.delegate.appendChild(t,e)}insertBefore(t,e,n){const r=Lo(t),i=Lo(e),o=Lo(n);r&&i&&r instanceof Do&&r.insertBefore(o,i),this.delegate.insertBefore(t,e,n)}removeChild(t,e){const n=Lo(t),r=Lo(e);n&&r&&n instanceof Do&&n.removeChild(r),this.delegate.removeChild(t,e)}selectRootElement(t,e){const n=this.delegate.selectRootElement(t,e),r=ua();return r&&Fo(new Do(n,null,r)),n}setAttribute(t,e,n,r){const i=Lo(t);i&&i instanceof Do&&(i.attributes[r?r+":"+e:e]=n),this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){const r=Lo(t);r&&r instanceof Do&&(r.attributes[n?n+":"+e:e]=null),this.delegate.removeAttribute(t,e,n)}addClass(t,e){const n=Lo(t);n&&n instanceof Do&&(n.classes[e]=!0),this.delegate.addClass(t,e)}removeClass(t,e){const n=Lo(t);n&&n instanceof Do&&(n.classes[e]=!1),this.delegate.removeClass(t,e)}setStyle(t,e,n,r){const i=Lo(t);i&&i instanceof Do&&(i.styles[e]=n),this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){const r=Lo(t);r&&r instanceof Do&&(r.styles[e]=null),this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){const r=Lo(t);r&&r instanceof Do&&(r.properties[e]=n),this.delegate.setProperty(t,e,n)}listen(t,e,n){if("string"!=typeof t){const r=Lo(t);r&&r.listeners.push(new Ro(e,n))}return this.delegate.listen(t,e,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setValue(t,e){return this.delegate.setValue(t,e)}}function ha(t,e,n){return new fa(t,e,n)}class fa extends class{}{constructor(t,e,n){super(),this.moduleType=t,this._bootstrapComponents=e,this._ngModuleDefFactory=n}create(t){!function(){if(xs)return;xs=!0;const t=Lt()?{setCurrentNode:$s,createRootView:ks,createEmbeddedView:js,createComponentView:Rs,createNgModuleRef:Ps,overrideProvider:Fs,overrideComponentView:Vs,clearOverrides:Us,checkAndUpdateView:zs,checkNoChangesView:Qs,destroyView:Gs,createDebugContext:(t,e)=>new oa(t,e),handleEvent:Zs,updateDirectives:Js,updateRenderer:ta}:{setCurrentNode:()=>{},createRootView:Ns,createEmbeddedView:cs,createComponentView:hs,createNgModuleRef:ri,overrideProvider:er,overrideComponentView:er,clearOverrides:er,checkAndUpdateView:vs,checkNoChangesView:ys,destroyView:ws,createDebugContext:(t,e)=>new oa(t,e),handleEvent:(t,e,n,r)=>t.def.handleEvent(t,e,n,r),updateDirectives:(t,e)=>t.def.updateDirectives(0===e?Hs:Bs,t),updateRenderer:(t,e)=>t.def.updateRenderer(0===e?Hs:Bs,t)};tr.setCurrentNode=t.setCurrentNode,tr.createRootView=t.createRootView,tr.createEmbeddedView=t.createEmbeddedView,tr.createComponentView=t.createComponentView,tr.createNgModuleRef=t.createNgModuleRef,tr.overrideProvider=t.overrideProvider,tr.overrideComponentView=t.overrideComponentView,tr.clearOverrides=t.clearOverrides,tr.checkAndUpdateView=t.checkAndUpdateView,tr.checkNoChangesView=t.checkNoChangesView,tr.destroyView=t.destroyView,tr.resolveDep=Ci,tr.createDebugContext=t.createDebugContext,tr.handleEvent=t.handleEvent,tr.updateDirectives=t.updateDirectives,tr.updateRenderer=t.updateRenderer,tr.dirtyParentQueries=$o}();const e=function(t){const e=Array.from(t.providers),n=Array.from(t.modules),r={};for(const i in t.providersByKey)r[i]=t.providersByKey[i];return{factory:t.factory,isRoot:t.isRoot,providers:e,modules:n,providersByKey:r}}(wr(this._ngModuleDefFactory));return tr.createNgModuleRef(this.moduleType,t||Pe.NULL,this._bootstrapComponents,e)}}},"9ppp":function(t,e,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(e,"a",(function(){return i})),r.prototype=Object.create(Error.prototype);const i=r},CRDf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("kJWO");const i=t=>e=>{const n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Cfvw:function(t,e,n){"use strict";var r=n("HDdC"),i=n("c2HN"),o=n("I55L"),s=n("kJWO"),a=n("Lhse"),u=n("yCtX"),c=n("quSY"),l=n("a7t3"),h=n("pLzU"),f=n("CRDf"),d=n("SeVD");function p(t,e){if(!e)return t instanceof r.a?t:new r.a(Object(d.a)(t));if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(e?n=>{const r=new c.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r}:Object(f.a)(t))}(t,e);if(Object(i.a)(t))return function(t,e){return new r.a(e?n=>{const r=new c.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r}:Object(l.a)(t))}(t,e);if(Object(o.a)(t))return Object(u.a)(t,e);if(function(t){return t&&"function"==typeof t[a.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(e?n=>{const r=new c.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[a.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r}:Object(h.a)(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}n.d(e,"a",(function(){return p}))},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=Array.isArray||(t=>t&&"number"==typeof t.length)},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("KqfI"),u=n("2fFW");n.d(e,"a",(function(){return c}));let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:((e=t)?1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)}:a.a)(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();n.d(e,"a",(function(){return i}));class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.9","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",(function(){return r}))},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("z+Ro"),i=n("yCtX"),o=n("EY2u"),s=n("XUOw");function a(...t){let e=t[t.length-1];switch(Object(r.a)(e)?t.pop():e=void 0,t.length){case 0:return Object(o.a)(e);case 1:return e?Object(i.a)(t,e):Object(s.a)(t[0]);default:return Object(i.a)(t,e)}}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t})}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("HDdC"),i=n("ngJS"),o=n("a7t3"),s=n("pLzU"),a=n("CRDf"),u=n("I55L"),c=n("c2HN"),l=n("XoHu"),h=n("Lhse"),f=n("kJWO");const d=t=>{if(t instanceof r.a)return e=>t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e);if(t&&"function"==typeof t[f.a])return Object(a.a)(t);if(Object(u.a)(t))return Object(i.a)(t);if(Object(c.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[h.a])return Object(s.a)(t);{const e=Object(l.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XUOw:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("HDdC");function i(t){const e=new r.a(e=>{e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("51Dv"),i=n("SeVD");function o(t,e,n,o,s=new r.a(t,n,o)){if(!s.closed)return Object(i.a)(e)(s)}},a7t3:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("NJ4a");const i=t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,r.a),e)},bHdf:function(t,e,n){"use strict";var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");class u{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new c(t,this.project,this.concurrent))}}class c extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,void 0,void 0);this.destination.add(i),Object(r.a)(this,t,e,n,i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var l=n("SpAZ");function h(t=Number.POSITIVE_INFINITY){return function t(e,n,r=Number.POSITIVE_INFINITY){return"function"==typeof n?i=>i.pipe(t((t,r)=>Object(a.a)(e(t,r)).pipe(Object(s.a)((e,i)=>n(t,e,r,i))),r)):("number"==typeof n&&(r=n),t=>t.lift(new u(e,r)))}(l.a,t)}n.d(e,"a",(function(){return h}))},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jmUF:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return b})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return T})),n.d(e,"h",(function(){return E})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return v})),n.d(e,"k",(function(){return C}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("8Y7J"),c=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const y=["ngOnDestroy"],v=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(y.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),g=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.k("angularfire2.app.options"),_=new u.k("angularfire2.app.nameOrConfig");class b{}const w=new u.D("6.1.4");function E(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.K)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);class I{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.C.full)}static initializeApp(t,e){return{ngModule:I,providers:[{provide:m,useValue:t},{provide:_,useValue:e}]}}}}).call(this,n("3UD+")(t))},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}},pLzU:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("Lhse");const i=t=>e=>{const n=t[r.a]();for(;;){const t=n.next();if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e}},pxpQ:function(t,e,n){"use strict";var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.a)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return O})),n.d(e,"c",(function(){return C})),n.d(e,"d",(function(){return L})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return j})),n.d(e,"j",(function(){return F})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return H})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return A})),n.d(e,"p",(function(){return v})),n.d(e,"q",(function(){return g})),n.d(e,"r",(function(){return _})),n.d(e,"s",(function(){return P})),n.d(e,"t",(function(){return b})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return y})),n.d(e,"w",(function(){return E})),n.d(e,"x",(function(){return m})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return k})),n.d(e,"A",(function(){return S})),n.d(e,"B",(function(){return D})),n.d(e,"C",(function(){return M})),n.d(e,"D",(function(){return R})),n.d(e,"E",(function(){return G})),n.d(e,"F",(function(){return Q})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return q})),n.d(e,"I",(function(){return B})),n.d(e,"J",(function(){return z}));var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function g(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return d().indexOf("Electron/")>=0}function b(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function E(){return!1}var C=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,O.prototype.create),o}return Object(r.c)(e,t),e}(Error),O=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new C(i,a,r);return u},t}();function T(t,e){return t.replace(I,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var I=/\{\$([^}]+)}/g;function S(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var N=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=S(c(o[0])||""),n=S(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},k=function(t){var e=N(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},A=function(t){var e=N(t).claims;return"object"==typeof e&&!0===e.admin};function j(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function P(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var Q=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}n.d(e,"a",(function(){return a}));const a=new s(i)},quSY:function(t,e,n){"use strict";var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");function s(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}s.prototype=Object.create(Error.prototype);const a=s;n.d(e,"a",(function(){return u}));let u=(()=>{class t{constructor(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let t,e=!1;if(this.closed)return;let{_parent:n,_parents:s,_unsubscribe:u,_subscriptions:l}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let h=-1,f=s?s.length:0;for(;n;)n.remove(this),n=++h<f&&s[h]||null;if(Object(o.a)(u))try{u.call(this)}catch(d){e=!0,t=d instanceof a?c(d.errors):[d]}if(Object(r.a)(l))for(h=-1,f=l.length;++h<f;){const n=l[h];if(Object(i.a)(n))try{n.unsubscribe()}catch(d){e=!0,t=t||[],d instanceof a?t=t.concat(c(d.errors)):t.push(d)}}if(e)throw new a(t)}add(e){let n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){const t=this._subscriptions;t?t.push(n):this._subscriptions=[n]}return n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}_addParent(t){let{_parent:e,_parents:n}=this;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function c(t){return t.reduce((t,e)=>t.concat(e instanceof a?e.errors:e),[])}},"tf+s":function(t,e,n){"use strict";var r=n("HDdC");let i=1;const o={},s={setImmediate(t){const e=i++;return o[e]=t,Promise.resolve().then(()=>function(t){const e=o[t];e&&e()}(e)),e},clearImmediate(t){delete o[t]}};var a=n("3N8a");class u extends a.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=s.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(s.clearImmediate(e),t.scheduled=void 0)}}var c=n("IjjT");class l extends c.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const h=new l(u);var f=n("DH7j");class d extends r.a{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(f.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new y(t,e))}}n.d(e,"a",(function(){return p}));class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}const l=class extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t}refCount(){return a()(this)}}.prototype,h={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}};class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}n.d(e,"a",(function(){return p}))},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("quSY"),o=n("ngJS");function s(t,e){return new r.a(e?n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:Object(o.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion(h,"0.6.15",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J");class i{}class o{constructor(){this.title="Angular10FirebaseStorage"}}class s{}const a=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}(),u=r.ib,c=new r.k("UseV4Plurals");class l{}class h extends l{constructor(t,e){super(),this.locale=t,this.deprecatedPluralFn=e}getPluralCategory(t,e){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(e||this.locale,t):u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}class f{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class d{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.K)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new f(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new p(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new p(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}class p{constructor(t,e){this.record=t,this.view=e}}class y{constructor(t,e){this._viewContainer=t,this._context=new v,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){g("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){g("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class v{constructor(){this.$implicit=null,this.ngIf=null}}function g(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.tb)(e)}'.`)}class m{}class _{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n}getValue(){return null}setNgStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}applyChanges(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}}let b=(()=>{class t{constructor(t){this._delegate=t}getValue(){return this._delegate.getValue()}}return t.ngDirectiveDef=void 0,t})();class w extends b{constructor(t){super(t)}set ngStyle(t){this._delegate.setNgStyle(t)}ngDoCheck(){this._delegate.applyChanges()}}class E{}const C=new r.k("DocumentToken");function O(t){return"server"===t}class T{constructor(t){this.file=t}}class I{constructor(t){this.uploadService=t}ngOnInit(){}selectFile(t){this.selectedFiles=t.target.files}upload(){const t=this.selectedFiles.item(0);this.selectedFiles=void 0,this.currentFileUpload=new T(t),this.uploadService.pushFileToStorage(this.currentFileUpload).subscribe(t=>{this.percentage=Math.round(t)},t=>{console.log(t)})}}var S=n("mrSG"),x=n("7o/Q"),N=n("quSY");class k{constructor(t){this.callback=t}call(t,e){return e.subscribe(new A(t,this.callback))}}class A extends x.a{constructor(t,e){super(t),this.add(new N.a(e))}}var j=n("D0XW"),R=n("HDdC"),P=n("LRne"),D=n("VRyK"),M=n("lJxs"),L=n("w1tV"),F=n("l7GE"),V=n("51Dv"),U=n("ZUHj"),q=n("Cfvw");function H(t,e){return"function"==typeof e?n=>n.pipe(H((n,r)=>Object(q.a)(t(n,r)).pipe(Object(M.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new B(t))}class B{constructor(t){this.project=t}call(t,e){return e.subscribe(new z(t,this.project))}}class z extends F.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new V.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(U.a)(this,t,e,n,i)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function Q(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new G(t,e,n))}}class G{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new W(t,this.accumulator,this.seed,this.hasSeed))}}class W extends x.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function K(t,e){return n=>n.lift(new Y(t,e))}class Y{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new X(t,this.compare,this.keySelector))}}class X extends x.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class ${constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Z(t,this.observables,this.project))}}class Z extends F.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(U.a)(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class J{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new tt(t,this.predicate))}}class tt extends x.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var et=n("jmUF"),nt=(n("6Uf2"),n("XNiG"),n("pxpQ"));function rt(t,e){return function(n){return n.lift(new it(t,e))}}n("qgXg"),n("9ppp"),n("Ylt2"),Error;class it{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ot(t,this.predicate,this.thisArg))}}class ot extends x.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}Error;var st=n("EY2u");n("vkgz"),n("SpAZ"),n("tf+s");const at=new r.k("angularfire2.auth.use-emulator");var ut=n("Jgta");function ct(t){return null==t}function lt(t){return"function"==typeof t.set}function ht(t,e){return lt(e)?e:t.ref(e)}function ft(t,e){if("string"==typeof t)return e.stringCase();if(lt(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function dt(t,e,n="on",r=j.a){return new R.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(M.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(L.a)())}function pt(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function yt(t,e){const{payload:n,prevKey:r,key:i}=e,o=pt(t,i),s=function(t,e){if(ct(e))return 0;{const n=pt(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function vt(t){return(ct(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function gt(t,e,n){return function(t,e,n){return dt(t,"value","once",n).pipe(H(r=>{const i=[Object(P.a)(r)];return e.forEach(e=>i.push(dt(t,e,"on",n))),Object(D.a)(...i).pipe(Q(yt,[]))}),K())}(t,e=vt(e),n)}function mt(t,e,n){const r=(e=vt(e)).map(e=>dt(t,e,"on",n));return Object(D.a)(...r)}function _t(t,e){return function(n,r){return ft(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function bt(t,e){return function(){return dt(t,"value","on",e)}}const wt=new r.k("angularfire2.realtimeDatabaseURL"),Et=new r.k("angularfire2.database.use-emulator");let Ct=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new et.e(i),this.keepUnstableUntilFirst=Object(et.i)(this.schedulers);const a=o,u=Object(et.h)(t,i,e);!ut.a.auth&&s&&Object(et.k)(),this.database=Object(et.g)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>ht(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:_t(r,"update"),set:_t(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?ft(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>gt(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>mt(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return dt(t,"value","on",e).pipe(Object(M.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new $(t,n))}}(e),Object(M.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new J(r))),Object(M.a)(t=>t.actions));var r}(t,mt(t,e).pipe(Q((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>gt(t,r,n).pipe(Object(M.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>ht(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>bt(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>bt(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(M.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275prov=Object(r.zb)({factory:function(){return new t(Object(r.Ab)(et.c),Object(r.Ab)(et.b,8),Object(r.Ab)(wt,8),Object(r.Ab)(r.t),Object(r.Ab)(r.r),Object(r.Ab)(Et,8),Object(r.Ab)(at,8))},token:t,providedIn:"any"}),t})();class Ot{}class Tt{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new It(t,this.dueTime,this.scheduler))}}class It extends x.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(St,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function St(t){t.debouncedNext()}var xt=n("zIRd"),Nt=n("qOnz"),kt=n("/6Yf"),At=function(t){function e(n,r){var i=t.call(this,jt(n),"Firebase Storage: "+r+" ("+jt(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(S.c)(e,t),e.prototype._codeEquals=function(t){return jt(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Nt.c);function jt(t){return"storage/"+t}function Rt(){return new At("unknown","An unknown error occurred, please check the error payload for server response.")}function Pt(){return new At("canceled","User canceled the upload/download.")}function Dt(){return new At("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Mt(t){return new At("invalid-argument",t)}function Lt(){return new At("app-deleted","The Firebase app was deleted.")}function Ft(t){return new At("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vt(t,e){return new At("invalid-format","String does not match format '"+t+"': "+e)}function Ut(t){throw new At("internal-error","Internal error: "+t)}var qt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ht=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Bt(t,e){switch(t){case qt.RAW:return new Ht(zt(e));case qt.BASE64:case qt.BASE64URL:return new Ht(Qt(t,e));case qt.DATA_URL:return new Ht((n=new Gt(e)).base64?Qt(qt.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(gv){throw Vt(qt.DATA_URL,"Malformed data URL.")}return zt(e)}(n.rest),function(t){return new Gt(t).contentType}(e))}var n;throw Rt()}function zt(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Qt(t,e){switch(t){case qt.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Vt(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case qt.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Vt(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(gv){throw Vt(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Gt=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Vt(qt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),Wt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kt(t){switch(t){case"running":case"pausing":case"canceling":return Wt.RUNNING;case"paused":return Wt.PAUSED;case"success":return Wt.SUCCESS;case"canceled":return Wt.CANCELED;case"error":default:return Wt.ERROR}}var Yt=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Xt=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Yt.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Yt.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Yt.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Ut("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ut("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ut("cannot .getStatus() before sending");try{return this.xhr_.status}catch(gv){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ut("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),$t=function(){function t(){}return t.prototype.createXhrIo=function(){return new Xt},t}();function Zt(t){return"string"==typeof t||t instanceof String}function Jt(t){return te()&&t instanceof Blob}function te(){return"undefined"!=typeof Blob}function ee(t,e,n,r){if(r<e)throw Mt("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Mt("Invalid value for '"+t+"'. Expected "+n+" or less.")}function ne(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ne();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(te())return new Blob(t);throw new At("unsupported-environment","This browser doesn't seem to support creating Blobs")}var ie=function(){function t(t,e){var n=0,r="";Jt(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Jt(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(te()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(re.apply(null,r))}var i=e.map((function(t){return Zt(t)?Bt(qt.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),oe=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(gv){return new t(e,"")}if(""===n.path)return n;throw new At("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(e);if(c){var l=c[u.indices.path];l||(l=""),n=new t(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(t){return new At("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function se(t){var e,n;try{e=JSON.parse(t)}catch(gv){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function ae(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function ue(t){return"https://firebasestorage.googleapis.com/v0"+t}function ce(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function le(t,e){return e}var he=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||le}}(),fe=null;function de(){if(fe)return fe;var t=[];t.push(new he("bucket")),t.push(new he("generation")),t.push(new he("metageneration")),t.push(new he("name","fullPath",!0));var e=new he("name");e.xform=function(t,e){return function(t){return!Zt(t)||t.length<2?t:ae(t)}(e)},t.push(e);var n=new he("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new he("timeCreated")),t.push(new he("updated")),t.push(new he("md5Hash",null,!0)),t.push(new he("cacheControl",null,!0)),t.push(new he("contentDisposition",null,!0)),t.push(new he("contentEncoding",null,!0)),t.push(new he("contentLanguage",null,!0)),t.push(new he("contentType",null,!0)),t.push(new he("metadata","customMetadata",!0)),fe=t}function pe(t,e,n){var r=se(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new oe(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function ye(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var ve=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function ge(t){if(!t)throw Rt()}function me(t,e){return function(n,r){var i=pe(t,r,e);return ge(null!==i),i}}function _e(t){return function(e,n){var r;return(r=401===e.getStatus()?new At("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new At("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new At("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function be(t){var e=_e(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new At("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function we(t,e,n){var r=ue(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new ve(r,"GET",me(t,n),i);return o.errorHandler=be(e),o}function Ee(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var Ce=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function Oe(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(gv){ge(!1)}return ge(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Te=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Ie(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Se=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=de(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Ee(e,r,i),a={name:s.fullPath},u=ue(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=ye(s,n),h=new ve(u,"POST",(function(t){var e;Oe(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(gv){ge(!1)}return ge(Zt(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=_e(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new ve(n,"POST",(function(t){var e=Oe(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(gv){ge(!1)}n||ge(!1);var i=Number(n);return ge(!isNaN(i)),new Ce(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=_e(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new Ce(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new Ce(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new At("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Dt();var p=new ve(n,"POST",(function(t,n){var i,s=Oe(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?me(e,o)(t,n):null,new Ce(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=_e(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(gv){return t._error=gv,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=we(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Ee(e,r,i),c=ye(u,n),l=ie.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Dt();var h={name:u.fullPath},f=ue(o),d=t.maxUploadRetryTime,p=new ve(f,"POST",me(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=_e(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Pt(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Kt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Te(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Kt(this._state)){case Wt.SUCCESS:Ie(this._resolve.bind(null,this.snapshot))();break;case Wt.CANCELED:case Wt.ERROR:Ie(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Kt(this._state)){case Wt.RUNNING:case Wt.PAUSED:t.next&&Ie(t.next.bind(t,this.snapshot))();break;case Wt.SUCCESS:t.complete&&Ie(t.complete.bind(t))();break;case Wt.CANCELED:case Wt.ERROR:t.error&&Ie(t.error.bind(t,this._error))();break;default:t.error&&Ie(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),xe=function(){function t(t,e){this._service=t,this._location=e instanceof oe?e:oe.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new oe(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return ae(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new oe(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Ft(t)},t}();function Ne(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&ee("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=ue(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new ve(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=se(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new oe(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new oe(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return ge(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=_e(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function ke(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new oe(t._location.bucket,n);return new xe(t.storage,r)}var Ae=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),je=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Ae(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Ae(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Ae(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Ae(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Re=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Pe(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Pe(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Pe=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(ke(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new je(function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Se(t,new ie(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=qt.RAW),this._throwIfRoot("putString");var r=Bt(e,t),i=Object(S.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new je(new Se(this._delegate,new ie(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:return[4,Ne(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new Re(t,n.storage)}))},t.prototype.list=function(t){var e=this;return Ne(this._delegate,t).then((function(t){return new Re(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=we(t.storage,t._location,de()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=ue(e.fullServerUrl()),o=ye(n,r),s=t.maxOperationRetryTime,a=new ve(i,"PATCH",me(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=be(e),a}(t.storage,t._location,e,de()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=ue(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new ve(r,"GET",function(t,e){return function(n,r){var i=pe(t,r,e);return ge(null!==i),function(t,e){var n=se(e);if(null===n)return null;if(!Zt(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return ue("/b/"+i(t.bucket)+"/o/"+i(n))+ce({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=be(e),o}(t.storage,t._location,de()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new At("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=ue(e.fullServerUrl()),r=new ve(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=be(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Ft(t)},t}(),De=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Me=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(gv){o(gv)}else null!==s?((r=Rt()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Lt():Pt():new At("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Le(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Le(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Yt.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Le(s,n))}else{var a=n.getErrorCode()===Yt.ABORT;e(!1,new Le(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(S.g)([null,t],e));else{var r,o=u()||s;o?l.call.apply(l,Object(S.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Le=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Fe(t){return/^[A-Za-z]+:\/\//.test(t)}function Ve(t,e){if(e&&Fe(e)){if(t instanceof He)return new xe(t,e);throw Mt("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof He){var r=e;if(null==r._bucket)throw new At("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new xe(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw Mt('`path` param cannot contain ".."');return ke(e,n)}return e}(t,e)}var Ue,qe,He=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?oe.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:oe.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){ee("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){ee("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new xe(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new De(Lt());var r=function(t,e,n,r,i){var o=ce(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new Me(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),Be=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Fe(t))throw Mt("ref() expected a child path but got a URL, use refFromURL instead.");return new Pe(Ve(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Fe(t))throw Mt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{oe.makeFromUrl(t)}catch(gv){throw Mt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pe(Ve(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function ze(t){const e=function(t){return new R.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=j.a){return n=>n.lift(new Tt(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(M.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function Qe(t,e,n){return{getDownloadURL:()=>Object(P.a)(void 0).pipe(Object(nt.b)(e.outsideAngular),H(()=>t.getDownloadURL()),n),getMetadata:()=>Object(P.a)(void 0).pipe(Object(nt.b)(e.outsideAngular),H(()=>t.getMetadata()),n),delete:()=>Object(q.a)(t.delete()),child:r=>Qe(t.child(r),e,n),updateMetadata:e=>Object(q.a)(t.updateMetadata(e)),put:(e,n)=>ze(t.put(e,n)),putString:(e,n,r)=>ze(t.putString(e,n,r)),listAll:()=>Object(q.a)(t.listAll())}}qe={TaskState:Wt,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:qt,Storage:He,Reference:Pe},(Ue=xt.a).INTERNAL.registerComponent(new kt.a("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Be(n,new He(n,r,new $t,e,xt.a.SDK_VERSION))}),"PUBLIC").setServiceProps(qe).setMultipleInstances(!0)),Ue.registerVersion("@firebase/storage","0.4.3");const Ge=new r.k("angularfire2.storageBucket"),We=new r.k("angularfire2.storage.maxUploadRetryTime"),Ke=new r.k("angularfire2.storage.maxOperationRetryTime");let Ye=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new et.e(i),this.keepUnstableUntilFirst=Object(et.i)(this.schedulers);const a=Object(et.h)(t,i,e);this.storage=Object(et.g)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return Qe(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return Qe(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Qe(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275prov=Object(r.zb)({factory:function(){return new t(Object(r.Ab)(et.c),Object(r.Ab)(et.b,8),Object(r.Ab)(Ge,8),Object(r.Ab)(r.t),Object(r.Ab)(r.r),Object(r.Ab)(We,8),Object(r.Ab)(Ke,8))},token:t,providedIn:"any"}),t})();class Xe{}class $e{}var Ze=n("yCtX"),Je=n("XUOw"),tn=n("bHdf"),en=n("z+Ro");function nn(...t){return e=>{let n=t[t.length-1];Object(en.a)(n)?t.pop():n=null;const r=t.length;return function(...t){return Object(tn.a)(1)(Object(P.a)(...t))}(1!==r||n?r>0?Object(Ze.a)(t,n):Object(st.a)(n):Object(Je.a)(t[0]),e)}}function rn(){return t=>t.lift(new on)}class on{call(t,e){return e.subscribe(new sn(t))}}class sn extends x.a{constructor(t){super(t),this.hasPrev=!1}_next(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t}}var an=n("q/0M"),un=function(t,e){return(un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function cn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var ln,hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fn=fn||{},dn=hn||self;function pn(){}function yn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function vn(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var gn="closure_uid_"+(1e9*Math.random()>>>0),mn=0;function _n(t,e,n){return t.call.apply(t.bind,arguments)}function bn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function wn(t,e,n){return(wn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_n:bn).apply(null,arguments)}function En(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Cn(){return Date.now()}function On(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Tn(){this.j=this.j,this.i=this.i}Tn.prototype.j=!1,Tn.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,gn)&&t[gn]||(t[gn]=++mn)}(this)},Tn.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var In=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Sn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function xn(t){return Array.prototype.concat.apply([],arguments)}function Nn(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function kn(t){return/^[\s\xa0]*$/.test(t)}var An,jn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Rn(t,e){return-1!=t.indexOf(e)}function Pn(t,e){return t<e?-1:t>e?1:0}t:{var Dn=dn.navigator;if(Dn){var Mn=Dn.userAgent;if(Mn){An=Mn;break t}}An=""}function Ln(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Fn(t){var e={};for(var n in t)e[n]=t[n];return e}var Vn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Un(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Vn.length;o++)n=Vn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function qn(t){return qn[" "](t),t}qn[" "]=pn;var Hn,Bn,zn=Rn(An,"Opera"),Qn=Rn(An,"Trident")||Rn(An,"MSIE"),Gn=Rn(An,"Edge"),Wn=Gn||Qn,Kn=Rn(An,"Gecko")&&!(Rn(An.toLowerCase(),"webkit")&&!Rn(An,"Edge"))&&!(Rn(An,"Trident")||Rn(An,"MSIE"))&&!Rn(An,"Edge"),Yn=Rn(An.toLowerCase(),"webkit")&&!Rn(An,"Edge");function Xn(){var t=dn.document;return t?t.documentMode:void 0}t:{var $n="",Zn=(Bn=An,Kn?/rv:([^\);]+)(\)|;)/.exec(Bn):Gn?/Edge\/([\d\.]+)/.exec(Bn):Qn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bn):Yn?/WebKit\/(\S+)/.exec(Bn):zn?/(?:Version)[ \/]?(\S+)/.exec(Bn):void 0);if(Zn&&($n=Zn?Zn[1]:""),Qn){var Jn=Xn();if(null!=Jn&&Jn>parseFloat($n)){Hn=String(Jn);break t}}Hn=$n}var tr={};function er(t){return function(t,e){var n=tr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=jn(String(Hn)).split("."),r=jn(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Pn(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Pn(0==s[2].length,0==a[2].length)||Pn(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var nr=dn.document&&Qn&&(Xn()||parseInt(Hn,10))||void 0,rr=!Qn||9<=Number(nr),ir=Qn&&!er("9"),or=function(){if(!dn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{dn.addEventListener("test",pn,e),dn.removeEventListener("test",pn,e)}catch(n){}return t}();function sr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function ar(t,e){if(sr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Kn){t:{try{qn(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ur[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}sr.prototype.b=function(){this.defaultPrevented=!0},On(ar,sr);var ur={2:"touch",3:"pen",4:"mouse"};ar.prototype.b=function(){ar.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ir)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var cr="closure_listenable_"+(1e6*Math.random()|0),lr=0;function hr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++lr,this.Y=this.Z=!1}function fr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function dr(t){this.src=t,this.a={},this.b=0}function pr(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=In(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(fr(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function yr(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}dr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=yr(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new hr(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vr="closure_lm_"+(1e6*Math.random()|0),gr={};function mr(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ir(r),e&&e[cr]?e.wa(n,r,vn(i)?!!i.capture:!!i,o):_r(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mr(t,e[o],n,r,i);return null}return n=Ir(n),t&&t[cr]?t.va(e,n,vn(r)?!!r.capture:!!r,i):_r(t,e,n,!1,r,i)}function _r(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=vn(i)?!!i.capture:!!i;if(s&&!rr)return null;var a=Or(t);if(a||(t[vr]=a=new dr(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Cr,e=rr?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)or||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(wr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function br(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[cr])pr(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(wr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Or(e))?(pr(n,t),0==n.b&&(n.src=null,e[vr]=null)):fr(t)}}}function wr(t){return t in gr?gr[t]:gr[t]="on"+t}function Er(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&br(t),n.call(r,e)}function Cr(t,e){if(t.Y)return!0;if(!rr){if(!e)t:{e=["window","event"];for(var n=dn,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Er(t,e=new ar(e,this))}return Er(t,new ar(e,this))}function Or(t){return(t=t[vr])instanceof dr?t:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ir(t){return"function"==typeof t?t:(t[Tr]||(t[Tr]=function(e){return t.handleEvent(e)}),t[Tr])}function Sr(){Tn.call(this),this.c=new dr(this),this.J=this,this.C=null}function xr(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new sr(e,t);else if(e instanceof sr)e.target=e.target||t;else{var i=e;Un(e=new sr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Nr(s,r,!0,e)&&i}if(i=Nr(s=e.a=t,r,!0,e)&&i,i=Nr(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Nr(s=e.a=n[o],r,!1,e)&&i}function Nr(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&pr(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}On(Sr,Tn),Sr.prototype[cr]=!0,(ln=Sr.prototype).addEventListener=function(t,e,n,r){mr(this,t,e,n,r)},ln.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=vn(i)?!!i.capture:!!i,r=Ir(r),e&&e[cr]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=yr(s=e.a[n],r,i,o))&&(fr(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Or(e))&&(n=e.a[n.toString()],e=-1,n&&(e=yr(n,r,i,o)),(r=-1<e?n[e]:null)&&br(r))}(this,t,e,n,r)},ln.G=function(){if(Sr.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)fr(n[r]);delete e.a[t],e.b--}}this.C=null},ln.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},ln.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kr=dn.JSON.stringify;function Ar(){this.b=this.a=null}var jr,Rr=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new Dr}),(function(t){t.reset()}));function Pr(){var t=Vr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dr(){this.next=this.b=this.a=null}function Mr(t){dn.setTimeout((function(){throw t}),0)}function Lr(t,e){jr||function(){var t=dn.Promise.resolve(void 0);jr=function(){t.then(Ur)}}(),Fr||(jr(),Fr=!0),Vr.add(t,e)}Ar.prototype.add=function(t,e){var n=Rr.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dr.prototype.reset=function(){this.next=this.b=this.a=null};var Fr=!1,Vr=new Ar;function Ur(){for(var t;t=Pr();){try{t.a.call(t.b)}catch(n){Mr(n)}var e=Rr;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Fr=!1}function qr(t,e){Sr.call(this),this.b=t||1,this.a=e||dn,this.f=wn(this.Za,this),this.g=Cn()}function Hr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Br(t,e,n){if("function"==typeof t)n&&(t=wn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=wn(t.handleEvent,t)}return 2147483647<Number(e)?-1:dn.setTimeout(t,e||0)}function zr(t){t.a=Br((function(){t.a=null,t.c&&(t.c=!1,zr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}On(qr,Sr),(ln=qr.prototype).aa=!1,ln.M=null,ln.Za=function(){if(this.aa){var t=Cn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),xr(this,"tick"),this.aa&&(Hr(this),this.start()))}},ln.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Cn())},ln.G=function(){qr.X.G.call(this),Hr(this),delete this.a};var Qr=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}un(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:zr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(dn.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Tn);function Gr(t){Tn.call(this),this.b=t,this.a={}}On(Gr,Tn);var Wr=[];function Kr(t,e,n,r){Array.isArray(n)||(n&&(Wr[0]=n.toString()),n=Wr);for(var i=0;i<n.length;i++){var o=mr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Yr(t){Ln(t.a,(function(t,e){this.a.hasOwnProperty(e)&&br(t)}),t),t.a={}}function Xr(){this.a=!0}function $r(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return kr(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Gr.prototype.G=function(){Gr.X.G.call(this),Yr(this)},Gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xr.prototype.info=function(){};var Zr={},Jr=null;function ti(){return Jr=Jr||new Sr}function ei(t){sr.call(this,Zr.Fa,t)}function ni(t){var e=ti();xr(e,new ei(e,t))}function ri(t,e){sr.call(this,Zr.STAT_EVENT,t),this.stat=e}function ii(t){var e=ti();xr(e,new ri(e,t))}function oi(t){sr.call(this,Zr.Ga,t)}function si(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return dn.setTimeout((function(){t()}),e)}Zr.Fa="serverreachability",On(ei,sr),Zr.STAT_EVENT="statevent",On(ri,sr),Zr.Ga="timingevent",On(oi,sr);var ai={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ui={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ci(){}function li(){}ci.prototype.a=null;var hi,fi={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function di(){sr.call(this,"d")}function pi(){sr.call(this,"c")}function yi(){}function vi(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Gr(this),this.P=gi,this.R=new qr(t=Wn?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}On(di,sr),On(pi,sr),On(yi,ci),hi=new yi;var gi=45e3,mi={},_i={};function bi(t,e,n){t.H=1,t.i=Hi(Mi(e)),t.j=n,t.I=!0,wi(t,null)}function wi(t,e){t.u=Cn(),Oi(t),t.l=Mi(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),eo(n.b,"t",r),t.D=0,t.a=Xo(t.g,t.g.C?e:null),0<t.O&&(t.F=new Qr(wn(t.Ca,t,t.a),t.O)),Kr(t.J,t.a,"readystatechange",t.Xa),e=t.B?Fn(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ni(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function Ei(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ci(t,n);if(i==_i){4==e&&(t.h=4,ii(14),r=!1),$r(t.c,t.f,null,"[Incomplete Response]");break}if(i==mi){t.h=4,ii(15),$r(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}$r(t.c,t.f,i,null),Ni(t,i)}4==e&&0==n.length&&(t.h=1,ii(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ho(e),e.F=!0,ii(11))):($r(t.c,t.f,n,"[Invalid Chunked Response]"),xi(t),Si(t))}function Ci(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?_i:(n=Number(e.substring(n,r)),isNaN(n)?mi:(r+=1)+n>e.length?_i:(e=e.substr(r,n),t.D=r+n,e))}function Oi(t){t.T=Cn()+t.P,Ti(t,t.P)}function Ti(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=si(wn(t.Va,t),e)}function Ii(t){t.o&&(dn.clearTimeout(t.o),t.o=null)}function Si(t){0==t.g.v||t.A||Qo(t.g,t)}function xi(t){Ii(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Hr(t.R),Yr(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ni(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||uo(n.b,t)))if(n.I=t.N,!t.C&&uo(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(ky){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;zo(n),Ro(n)}qo(n),ii(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=si(wn(n.Sa,n),6e3));if(1>=ao(n.b)&&n.ea){try{n.ea()}catch(ky){}n.ea=void 0}}else Wo(n,11)}else if((t.C||n.a==t)&&zo(n),!kn(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Rn(l,"spdy")||Rn(l,"quic")||Rn(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(co(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,qi(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Cn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Yo(u,u.C?u.ga:null,u.fa),d.C){lo(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(Ii(p),Oi(p)),u.a=d}else Uo(u);0<n.g.length&&Mo(n)}else"stop"!=i[0]&&"close"!=i[0]||Wo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wo(n,7):jo(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ni(4)}catch(ky){}}function ki(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yn(t)||"string"==typeof t)Sn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(yn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(yn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ai(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ai)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ji(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ri(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ri(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ri(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(ln=vi.prototype).setTimeout=function(t){this.P=t},ln.Xa=function(t){t=t.target;var e=this.F;e&&3==xo(t)?e.f():this.Ca(t)},ln.Ca=function(t){try{if(t==this.a)t:{var e=xo(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Wn&&!this.a.$())){this.A||4!=e||7==n||ni(8==n||0>=r?3:2),Ii(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kn(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,ii(12),xi(this),Si(this);break t}$r(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ni(this,u)}this.I?(Ei(this,e,o),Wn&&this.b&&3==e&&(Kr(this.J,this.R,"tick",this.Wa),this.R.start())):($r(this.c,this.f,o,null),Ni(this,o)),4==e&&xi(this),this.b&&!this.A&&(4==e?Qo(this.g,this):(this.b=!1,Oi(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ii(12)):(this.h=0,ii(13)),xi(this),Si(this)}}}catch(c){}},ln.Wa=function(){if(this.a){var t=xo(this.a),e=this.a.$();this.D<e.length&&(Ii(this),Ei(this,t,e),this.b&&4!=t&&Oi(this))}},ln.cancel=function(){this.A=!0,xi(this)},ln.Va=function(){this.o=null;var t=Cn();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(ni(3),ii(17)),xi(this),this.h=2,Si(this)):Ti(this,this.T-t)},(ln=Ai.prototype).K=function(){ji(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},ln.L=function(){return ji(this),this.a.concat()},ln.get=function(t,e){return Ri(this.b,t)?this.b[t]:e},ln.set=function(t,e){Ri(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},ln.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Di(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Di){this.a=void 0!==e?e:t.a,Li(this,t.f),this.j=t.j,Fi(this,t.c),Vi(this,t.h),this.g=t.g,e=t.b;var n=new $i;n.c=e.c,e.a&&(n.a=new Ai(e.a),n.b=e.b),Ui(this,n),this.i=t.i}else t&&(n=String(t).match(Pi))?(this.a=!!e,Li(this,n[1]||"",!0),this.j=Bi(n[2]||""),Fi(this,n[3]||"",!0),Vi(this,n[4]),this.g=Bi(n[5]||"",!0),Ui(this,n[6]||"",!0),this.i=Bi(n[7]||"")):(this.a=!!e,this.b=new $i(null,this.a))}function Mi(t){return new Di(t)}function Li(t,e,n){t.f=n?Bi(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Fi(t,e,n){t.c=n?Bi(e,!0):e}function Vi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ui(t,e,n){e instanceof $i?(t.b=e,function(t,e){e&&!t.f&&(Zi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ji(this,e),eo(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=zi(e,Yi)),t.b=new $i(e,t.a))}function qi(t,e,n){t.b.set(e,n)}function Hi(t){return qi(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Cn()).toString(36)),t}function Bi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qi),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qi(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Di.prototype.toString=function(){var t=[],e=this.f;e&&t.push(zi(e,Gi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(zi(e,Gi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(zi(n,"/"==n.charAt(0)?Ki:Wi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",zi(n,Xi)),t.join("")};var Gi=/[#\/\?@]/g,Wi=/[#\?:]/g,Ki=/[#\?]/g,Yi=/[#\?@]/g,Xi=/#/g;function $i(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Zi(t){t.a||(t.a=new Ai,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ji(t,e){Zi(t),e=no(t,e),Ri(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ri((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ji(t)))}function to(t,e){return Zi(t),e=no(t,e),Ri(t.a.b,e)}function eo(t,e,n){Ji(t,e),0<n.length&&(t.c=null,t.a.set(no(t,e),Nn(n)),t.b+=n.length)}function no(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(ln=$i.prototype).add=function(t,e){Zi(this),this.c=null,t=no(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},ln.forEach=function(t,e){Zi(this),this.a.forEach((function(n,r){Sn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},ln.L=function(){Zi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},ln.K=function(t){Zi(this);var e=[];if("string"==typeof t)to(this,t)&&(e=xn(e,this.a.get(no(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=xn(e,t[n])}return e},ln.set=function(t,e){return Zi(this),this.c=null,to(this,t=no(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},ln.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},ln.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ro=function(){return function(t,e){this.b=t,this.a=e}}();function io(t){this.g=t||oo,t=dn.PerformanceNavigationTiming?0<(t=dn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(dn.ia&&dn.ia.ya&&dn.ia.ya()&&dn.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var oo=10;function so(t){return!!t.b||!!t.a&&t.a.size>=t.f}function ao(t){return t.b?1:t.a?t.a.size:0}function uo(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function co(t,e){t.a?t.a.add(e):t.b=e}function lo(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ho(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=cn(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Nn(t.c)}function fo(){}function po(){this.a=new fo}function yo(t,e,n){var r=n||"";try{ki(t,(function(t,n){var i=t;vn(t)&&(i=kr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(gv){throw e.push(r+"type="+encodeURIComponent("_badmap")),gv}}function vo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}io.prototype.cancel=function(){var t,e;if(this.c=ho(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=cn(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},fo.prototype.stringify=function(t){return dn.JSON.stringify(t,void 0)},fo.prototype.parse=function(t){return dn.JSON.parse(t,void 0)};var go=dn.JSON.parse;function mo(t){Sr.call(this),this.headers=new Ai,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=_o,this.D=this.F=!1}On(mo,Sr);var _o="",bo=/^https?$/i,wo=["POST","PUT"];function Eo(t){return"content-type"==t.toLowerCase()}function Co(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Oo(t),Io(t)}function Oo(t){t.u||(t.u=!0,xr(t,"complete"),xr(t,"error"))}function To(t){if(t.b&&void 0!==fn&&(!t.s[1]||4!=xo(t)||2!=t.W()))if(t.l&&4==xo(t))Br(t.za,0,t);else if(xr(t,"readystatechange"),4==xo(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Pi)[1]||null;if(!o&&dn.self&&dn.self.location){var s=dn.self.location.protocol;o=s.substr(0,s.length-1)}i=!bo.test(o?o.toLowerCase():"")}e=i}if(e)xr(t,"complete"),xr(t,"success");else{t.h=6;try{var a=2<xo(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Oo(t)}}finally{Io(t)}}}function Io(t,e){if(t.a){So(t);var n=t.a,r=t.s[0]?pn:null;t.a=null,t.s=null,e||xr(t,"ready");try{n.onreadystatechange=r}catch(gv){}}}function So(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(dn.clearTimeout(t.m),t.m=null)}function xo(t){return t.a?t.a.readyState:0}function No(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ln(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):qi(t,e,n))}function ko(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ao(t){this.pa=0,this.g=[],this.c=new Xr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ko("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ko("baseRetryDelayMs",5e3,t),this.Ra=ko("retryDelaySeedMs",1e4,t),this.Ma=ko("forwardChannelMaxRetries",2,t),this.ma=ko("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new io(t&&t.concurrentRequestLimit),this.ka=new po,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function jo(t){if(Po(t),3==t.v){var e=t.R++,n=Mi(t.B);qi(n,"SID",t.J),qi(n,"RID",e),qi(n,"TYPE","terminate"),Fo(t,n),(e=new vi(t,t.c,e,void 0)).H=2,e.i=Hi(Mi(n)),n=!1,dn.navigator&&dn.navigator.sendBeacon&&(n=dn.navigator.sendBeacon(e.i.toString(),"")),!n&&dn.Image&&((new Image).src=e.i,n=!0),n||(e.a=Xo(e.g,null),e.a.ba(e.i)),e.u=Cn(),Oi(e)}Ko(t)}function Ro(t){t.a&&(Ho(t),t.a.cancel(),t.a=null)}function Po(t){Ro(t),t.j&&(dn.clearTimeout(t.j),t.j=null),zo(t),t.b.cancel(),t.h&&("number"==typeof t.h&&dn.clearTimeout(t.h),t.h=null)}function Do(t,e){t.g.push(new ro(t.Oa++,e)),3==t.v&&Mo(t)}function Mo(t){so(t.b)||t.h||(t.h=!0,Lr(t.Ba,t),t.u=0)}function Lo(t,e){var n;n=e?e.f:t.R++;var r=Mi(t.B);qi(r,"SID",t.J),qi(r,"RID",n),qi(r,"AID",t.P),Fo(t,r),t.i&&t.l&&No(r,t.i,t.l),n=new vi(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Vo(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),co(t.b,n),bi(n,r,e)}function Fo(t,e){t.f&&ki({},(function(t,n){qi(e,n,t)}))}function Vo(t,e,n){n=Math.min(t.g.length,n);var r=t.f?wn(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{yo(l,s,"req"+c+"_")}catch(As){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Uo(t){t.a||t.j||(t.T=1,Lr(t.Aa,t),t.o=0)}function qo(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=si(wn(t.Aa,t),Go(t,t.o)),t.o++,0))}function Ho(t){null!=t.s&&(dn.clearTimeout(t.s),t.s=null)}function Bo(t){t.a=new vi(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Mi(t.la);qi(e,"RID","rpc"),qi(e,"SID",t.J),qi(e,"CI",t.H?"0":"1"),qi(e,"AID",t.P),Fo(t,e),qi(e,"TYPE","xmlhttp"),t.i&&t.l&&No(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Hi(Mi(e)),n.j=null,n.I=!0,wi(n,t)}function zo(t){null!=t.m&&(dn.clearTimeout(t.m),t.m=null)}function Qo(t,e){var n=null;if(t.a==e){zo(t),Ho(t),t.a=null;var r=2}else{if(!uo(t.b,e))return;n=e.s,lo(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Cn()-e.u;var i=t.u;xr(r=ti(),new oi(r,n,e,i)),Mo(t)}else Uo(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ao(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=si(wn(t.Ba,t,e),Go(t,t.u)),t.u++,0)))}(t,e)||2==r&&qo(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wo(t,5);break;case 4:Wo(t,10);break;case 3:Wo(t,6);break;default:Wo(t,2)}}function Go(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Wo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=wn(t.Ya,t);n||(n=new Di("//www.google.com/images/cleardot.gif"),dn.location&&"http"==dn.location.protocol||Li(n,"https"),Hi(n)),function(t,e){var n=new Xr;if(dn.Image){var r=new Image;r.onload=En(vo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=En(vo,n,r,"TestLoadImage: error",!1,e),r.onabort=En(vo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=En(vo,n,r,"TestLoadImage: timeout",!1,e),dn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ii(2);t.v=0,t.f&&t.f.ra(e),Ko(t),Po(t)}function Ko(t){t.v=0,t.I=-1,t.f&&(0==ho(t.b).length&&0==t.g.length||(t.b.c.length=0,Nn(t.g),t.g.length=0),t.f.qa())}function Yo(t,e,n){var r=function(t){return t instanceof Di?Mi(t):new Di(t,void 0)}(n);if(""!=r.c)e&&Fi(r,e+"."+r.c),Vi(r,r.h);else{var i=dn.location;r=function(t,e,n,r){var i=new Di(null,void 0);return t&&Li(i,t),e&&Fi(i,e),n&&Vi(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Ln(t.V,(function(t,e){qi(r,e,t)})),n=t.na,(e=t.A)&&n&&qi(r,e,n),qi(r,"VER",t.ha),Fo(t,r),r}function Xo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new mo(t.Na)).F=t.C,e}function $o(){}function Zo(){if(Qn&&!(10<=Number(nr)))throw Error("Environmental error: no available transport.")}function Jo(t,e){Sr.call(this),this.a=new Ao(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!kn(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new ns(this)}function ts(t){di.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function es(){pi.call(this),this.status=1}function ns(t){this.a=t}(ln=mo.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:hi),this.a.onreadystatechange=wn(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Co(this,o)}t=n||"";var i=new Ai(this.headers);r&&ki(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Eo,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=dn.FormData&&t instanceof dn.FormData,!(0<=In(wo,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{So(this),0<this.o&&((this.D=function(t){return Qn&&er(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=wn(this.xa,this)):this.m=Br(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Co(this,o)}},ln.xa=function(){void 0!==fn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,xr(this,"timeout"),this.abort(8))},ln.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,xr(this,"complete"),xr(this,"abort"),Io(this))},ln.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Io(this,!0)),mo.X.G.call(this)},ln.za=function(){this.j||(this.A||this.l||this.g?To(this):this.Ua())},ln.Ua=function(){To(this)},ln.W=function(){try{return 2<xo(this)?this.a.status:-1}catch(Bn){return-1}},ln.$=function(){try{return this.a?this.a.responseText:""}catch(Bn){return""}},ln.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),go(e)}},ln.ua=function(){return this.h},ln.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(ln=Ao.prototype).ha=8,ln.v=1,ln.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new vi(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Un(r=Fn(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Vo(this,n,e),qi(i=Mi(this.B),"RID",t),qi(i,"CVER",22),this.A&&qi(i,"X-HTTP-Session-Id",this.A),Fo(this,i),this.i&&r&&No(i,this.i,r),co(this.b,n),this.Ia&&qi(i,"TYPE","init"),this.da?(qi(i,"$req",e),qi(i,"SID","null"),n.U=!0,bi(n,i,null)):bi(n,i,e),this.v=2}}else 3==this.v&&(t?Lo(this,t):0==this.g.length||so(this.b)||Lo(this))},ln.Aa=function(){if(this.j=null,Bo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=si(wn(this.Ta,this),t)}},ln.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,ii(10),Ro(this),Bo(this))},ln.Sa=function(){null!=this.m&&(this.m=null,Ro(this),qo(this),ii(19))},ln.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),ii(2)):(this.c.info("Failed to ping google.com"),ii(1))},(ln=$o.prototype).ta=function(){},ln.sa=function(){},ln.ra=function(){},ln.qa=function(){},ln.Ja=function(){},Zo.prototype.a=function(t,e){return new Jo(t,e)},On(Jo,Sr),Jo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;ii(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Yo(t,null,t.fa),Mo(t)},Jo.prototype.close=function(){jo(this.a)},Jo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Do(this.a,e)}else this.l?((e={}).__data__=kr(t),Do(this.a,e)):Do(this.a,t)},Jo.prototype.G=function(){this.a.f=null,delete this.f,jo(this.a),delete this.a,Jo.X.G.call(this)},On(ts,di),On(es,pi),On(ns,$o),ns.prototype.ta=function(){xr(this.a,"a")},ns.prototype.sa=function(t){xr(this.a,new ts(t))},ns.prototype.ra=function(t){xr(this.a,new es(t))},ns.prototype.qa=function(){xr(this.a,"b")},Zo.prototype.createWebChannel=Zo.prototype.a,Jo.prototype.send=Jo.prototype.h,Jo.prototype.open=Jo.prototype.g,Jo.prototype.close=Jo.prototype.close,ai.NO_ERROR=0,ai.TIMEOUT=8,ai.HTTP_ERROR=6,ui.COMPLETE="complete",li.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",Sr.prototype.listen=Sr.prototype.va,mo.prototype.listenOnce=mo.prototype.wa,mo.prototype.getLastError=mo.prototype.Qa,mo.prototype.getLastErrorCode=mo.prototype.ua,mo.prototype.getStatus=mo.prototype.W,mo.prototype.getResponseJson=mo.prototype.Pa,mo.prototype.getResponseText=mo.prototype.$,mo.prototype.send=mo.prototype.ba;var rs=ai,is=ui,os=Zr,ss=li,as=mo,us=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},cs=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ls=new an.b("@firebase/firestore");function hs(){return ls.logLevel}function fs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ls.logLevel<=an.a.DEBUG){var r=e.map(ys);ls.debug.apply(ls,Object(S.g)(["Firestore (8.2.9): "+t],r))}}function ds(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ls.logLevel<=an.a.ERROR){var r=e.map(ys);ls.error.apply(ls,Object(S.g)(["Firestore (8.2.9): "+t],r))}}function ps(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ls.logLevel<=an.a.WARN){var r=e.map(ys);ls.warn.apply(ls,Object(S.g)(["Firestore (8.2.9): "+t],r))}}function ys(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(gv){return t}}function vs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw ds(e),new Error(e)}function gs(t,e){t||vs()}function ms(t,e){return t}function _s(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var bs=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=_s(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ws(t,e){return t<e?-1:t>e?1:0}function Es(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Cs(t){return t+"\0"}var Os=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return ws(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();Os.T=new Os("");var Ts={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Is=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(S.c)(e,t),e}(Error),Ss=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(Os.fromBase64String(e))}catch(e){throw new Is(Ts.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Os.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),xs=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();xs.UNAUTHENTICATED=new xs(null),xs.R=new xs("google-credentials-uid"),xs.P=new xs("first-party-uid");var Ns=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},ks=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(xs.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),As=function(){function t(t){var e=this;this.D=null,this.currentUser=xs.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(fs("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(gs("string"==typeof n.accessToken),new Ns(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return gs(null===t||"string"==typeof t),new xs(t)},t}(),js=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=xs.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Rs=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new js(this.F,this.O))},t.prototype.v=function(t){t(xs.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),Ps=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();Ps.q=-1;var Ds=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Is(Ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Is(Ts.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Is(Ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Is(Ts.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?ws(this.nanoseconds,t.nanoseconds):ws(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ms=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new Ds(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),Ls=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&vs(),void 0===n?n=t.length-e:n>t.length-e&&vs(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Is(Ts.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(Ls),Vs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Us=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Vs.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Is(Ts.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Is(Ts.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Is(Ts.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Is(Ts.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(Ls),qs=function(){function t(t){this.path=t}return t._t=function(e){return new t(Fs.ot(e))},t.ft=function(e){return new t(Fs.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Fs.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Fs.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Fs(e.slice()))},t}();function Hs(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Qs=function(){function t(t){this.fields=t,t.sort(Us.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return Es(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Gs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(t){if(gs(!!t),"string"==typeof t){var e=0,n=Gs.exec(t);if(gs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ks(t.seconds),nanos:Ks(t.nanos)}}function Ks(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ys(t){return"string"==typeof t?Os.fromBase64String(t):Os.fromUint8Array(t)}function Xs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $s(t){var e=Ws(t.mapValue.fields.__local_write_time__.timestampValue);return new Ds(e.seconds,e.nanos)}function Zs(t){return null==t}function Js(t){return 0===t&&1/t==-1/0}function ta(t){return"number"==typeof t&&Number.isInteger(t)&&!Js(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ea(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xs(t)?4:10:vs()}function na(t,e){var n=ea(t);if(n!==ea(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $s(t).isEqual($s(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ws(t.timestampValue),r=Ws(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ys(t.bytesValue).isEqual(Ys(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ks(t.geoPointValue.latitude)===Ks(e.geoPointValue.latitude)&&Ks(t.geoPointValue.longitude)===Ks(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ks(t.integerValue)===Ks(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Ks(t.doubleValue),r=Ks(e.doubleValue);return n===r?Js(n)===Js(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Es(t.arrayValue.values||[],e.arrayValue.values||[],na);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Hs(n)!==Hs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!na(n[i],r[i])))return!1;return!0}(t,e);default:return vs()}}function ra(t,e){return void 0!==(t.values||[]).find((function(t){return na(t,e)}))}function ia(t,e){var n=ea(t),r=ea(e);if(n!==r)return ws(n,r);switch(n){case 0:return 0;case 1:return ws(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Ks(t.integerValue||t.doubleValue),r=Ks(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return oa(t.timestampValue,e.timestampValue);case 4:return oa($s(t),$s(e));case 5:return ws(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ys(t),r=Ys(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ws(n[i],r[i]);if(0!==o)return o}return ws(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ws(Ks(t.latitude),Ks(e.latitude));return 0!==n?n:ws(Ks(t.longitude),Ks(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ia(n[i],r[i]);if(o)return o}return ws(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ws(r[s],o[s]);if(0!==a)return a;var u=ia(n[r[s]],i[o[s]]);if(0!==u)return u}return ws(r.length,o.length)}(t.mapValue,e.mapValue);default:throw vs()}}function oa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ws(t,e);var n=Ws(t),r=Ws(e),i=ws(n.seconds,r.seconds);return 0!==i?i:ws(n.nanos,r.nanos)}function sa(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Ws(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ys(e.bytesValue).toBase64():"referenceValue"in e?qs.ft(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):vs();var n}(t)}function aa(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function ua(t){return!!t&&"integerValue"in t}function ca(t){return!!t&&"arrayValue"in t}function la(t){return!!t&&"nullValue"in t}function ha(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fa(t){return!!t&&"mapValue"in t}var da=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!fa(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return na(this.proto,t.proto)},t}(),pa=function(){function t(t){void 0===t&&(t=da.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===ea(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Us.ct(),this.At);return null!=t?new da(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=fa(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function ya(t){var e=[];return Bs(t.fields||{},(function(t,n){var r=new Us([t]);if(fa(n)){var i=ya(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Qs(e)}var va=function(t,e){this.key=t,this.version=e},ga=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(S.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(va),ma=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(S.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(va),_a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(va),ba=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function wa(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ba(t,e,n,r,i,o,s)}function Ea(t){var e=ms(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+sa(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),Zs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Da(e.startAt)),e.endAt&&(n+="|ub:",n+=Da(e.endAt)),e.vt=n}return e.vt}function Ca(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!La(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!na(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Va(t.startAt,e.startAt)&&Va(t.endAt,e.endAt)}function Oa(t){return qs.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ta=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(S.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new Ia(t,n,r):"array-contains"===n?new ka(t,r):"in"===n?new Aa(t,r):"not-in"===n?new ja(t,r):"array-contains-any"===n?new Ra(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Sa(t,n):new xa(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(ia(e,this.value)):null!==e&&ea(this.value)===ea(e)&&this.Dt(ia(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return vs()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ia=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=qs.ft(r.referenceValue),i}return Object(S.c)(e,t),e.prototype.matches=function(t){var e=qs.H(t.key,this.key);return this.Dt(e)},e}(Ta),Sa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Na(0,n),r}return Object(S.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ta),xa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Na(0,n),r}return Object(S.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ta);function Na(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return qs.ft(t.referenceValue)}))}var ka=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(S.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ca(e)&&ra(e.arrayValue,this.value)},e}(Ta),Aa=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(S.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ra(this.value.arrayValue,e)},e}(Ta),ja=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(S.c)(e,t),e.prototype.matches=function(t){if(ra(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ra(this.value.arrayValue,e)},e}(Ta),Ra=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(S.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ca(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ra(e.value.arrayValue,t)}))},e}(Ta),Pa=function(t,e){this.position=t,this.before=e};function Da(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return sa(t)})).join(",")}var Ma=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function La(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Fa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?qs.H(qs.ft(s.referenceValue),n.key):ia(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Va(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!na(t.position[n],e.position[n]))return!1;return!0}var Ua=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function qa(t,e,n,r,i,o,s,a){return new Ua(t,e,n,r,i,o,s,a)}function Ha(t){return new Ua(t)}function Ba(t){return!Zs(t.limit)&&"F"===t.limitType}function za(t){return!Zs(t.limit)&&"L"===t.limitType}function Qa(t){return t.xt.length>0?t.xt[0].field:null}function Ga(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Wa(t){return null!==t.collectionGroup}function Ka(t){var e=ms(t);if(null===e.Nt){e.Nt=[];var n=Ga(e),r=Qa(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Ma(n)),e.Nt.push(new Ma(Us.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Ma(Us.ht(),u))}}}return e.Nt}function Ya(t){var e=ms(t);if(!e.$t)if("F"===e.limitType)e.$t=wa(e.path,e.collectionGroup,Ka(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ka(e);r<i.length;r++){var o=i[r];n.push(new Ma(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Pa(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Pa(e.startAt.position,!e.startAt.before):null;e.$t=wa(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Xa(t,e,n){return new Ua(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $a(t,e){return Ca(Ya(t),Ya(e))&&t.limitType===e.limitType}function Za(t){return Ea(Ya(t))+"|lt:"+t.limitType}function Ja(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+sa(e.value);var e})).join(", ")+"]"),Zs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Da(t.startAt)),t.endAt&&(e+=", endAt: "+Da(t.endAt)),"Target("+e+")"}(Ya(t))+"; limitType="+t.limitType+")"}function tu(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):qs.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Fa(t.startAt,Ka(t),e)||t.endAt&&Fa(t.endAt,Ka(t),e))}(t,e)}function eu(t){return function(e,n){for(var r=!1,i=0,o=Ka(t);i<o.length;i++){var s=o[i],a=nu(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function nu(t,e,n){var r=t.field.ut()?qs.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ia(r,i):vs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return vs()}}var ru=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ms.min()),void 0===o&&(o=Ms.min()),void 0===s&&(s=Os.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function iu(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Js(e)?"-0":e}}function ou(t){return{integerValue:""+t}}function su(t,e){return ta(e)?ou(e):iu(t,e)}var au=function(){this.qt=void 0};function uu(t,e,n){return t instanceof hu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof fu?du(t,e):t instanceof pu?yu(t,e):function(t,e){var n=lu(t,e),r=gu(n)+gu(t.Ut);return ua(n)&&ua(t.Ut)?ou(r):iu(t.Qt,r)}(t,e)}function cu(t,e,n){return t instanceof fu?du(t,e):t instanceof pu?yu(t,e):n}function lu(t,e){return t instanceof vu?ua(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var hu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e}(au),fu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(S.c)(e,t),e}(au);function du(t,e){for(var n=mu(e),r=function(t){n.some((function(e){return na(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var pu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(S.c)(e,t),e}(au);function yu(t,e){for(var n=mu(e),r=function(t){n=n.filter((function(e){return!na(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var vu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(S.c)(e,t),e}(au);function gu(t){return Ks(t.integerValue||t.doubleValue)}function mu(t){return ca(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var _u=function(t,e){this.field=t,this.transform=e},bu=function(t,e){this.version=t,this.transformResults=e},wu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Eu(t,e){return void 0!==t.updateTime?e instanceof ga&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof ga}var Cu=function(){};function Ou(t,e,n){return t instanceof Nu?function(t,e,n){var r=t.value;if(n.transformResults){var i=ju(t.fieldTransforms,e,n.transformResults);r=Pu(t.fieldTransforms,r,i)}return new ga(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ku?function(t,e,n){if(!Eu(t.jt,e))return new _a(t.key,n.version);var r=Au(t,e,n.transformResults?ju(t.fieldTransforms,e,n.transformResults):[]);return new ga(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new ma(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Tu(t,e,n){return t instanceof Nu?function(t,e,n){if(!Eu(t.jt,e))return e;var r=t.value,i=Ru(t.fieldTransforms,n,e);r=Pu(t.fieldTransforms,r,i);var o=xu(e);return new ga(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof ku?function(t,e,n){if(!Eu(t.jt,e))return e;var r=xu(e),i=Au(t,e,Ru(t.fieldTransforms,n,e));return new ga(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return Eu(t.jt,e)?new ma(t.key,Ms.min()):e}(t,e)}function Iu(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof ga?e.field(o.field):void 0,a=lu(o.transform,s||null);null!=a&&(n=null==n?(new pa).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Su(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Es(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof fu&&e instanceof fu||t instanceof pu&&e instanceof pu?Es(t.elements,e.elements,na):t instanceof vu&&e instanceof vu?na(t.Ut,e.Ut):t instanceof hu&&e instanceof hu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function xu(t){return t instanceof ga?t.version:Ms.min()}var Nu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(S.c)(e,t),e}(Cu),ku=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(S.c)(e,t),e}(Cu);function Au(t,e,n){var r;return r=function(t,e){var n=new pa(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof ga?e.data():da.empty()),Pu(t.fieldTransforms,r,n)}function ju(t,e,n){var r=[];gs(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof ga&&(a=e.field(o.field)),r.push(cu(s,a,n[i]))}return r}function Ru(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof ga&&(u=n.field(s.field)),r.push(uu(a,u,e))}return r}function Pu(t,e,n){for(var r=new pa(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var Du,Mu,Lu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(S.c)(e,t),e}(Cu),Fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(S.c)(e,t),e}(Cu),Vu=function(t){this.count=t};function Uu(t){switch(t){case Ts.OK:return vs();case Ts.CANCELLED:case Ts.UNKNOWN:case Ts.DEADLINE_EXCEEDED:case Ts.RESOURCE_EXHAUSTED:case Ts.INTERNAL:case Ts.UNAVAILABLE:case Ts.UNAUTHENTICATED:return!1;case Ts.INVALID_ARGUMENT:case Ts.NOT_FOUND:case Ts.ALREADY_EXISTS:case Ts.PERMISSION_DENIED:case Ts.FAILED_PRECONDITION:case Ts.ABORTED:case Ts.OUT_OF_RANGE:case Ts.UNIMPLEMENTED:case Ts.DATA_LOSS:return!0;default:return vs()}}function qu(t){if(void 0===t)return ds("GRPC error has no .code"),Ts.UNKNOWN;switch(t){case Du.OK:return Ts.OK;case Du.CANCELLED:return Ts.CANCELLED;case Du.UNKNOWN:return Ts.UNKNOWN;case Du.DEADLINE_EXCEEDED:return Ts.DEADLINE_EXCEEDED;case Du.RESOURCE_EXHAUSTED:return Ts.RESOURCE_EXHAUSTED;case Du.INTERNAL:return Ts.INTERNAL;case Du.UNAVAILABLE:return Ts.UNAVAILABLE;case Du.UNAUTHENTICATED:return Ts.UNAUTHENTICATED;case Du.INVALID_ARGUMENT:return Ts.INVALID_ARGUMENT;case Du.NOT_FOUND:return Ts.NOT_FOUND;case Du.ALREADY_EXISTS:return Ts.ALREADY_EXISTS;case Du.PERMISSION_DENIED:return Ts.PERMISSION_DENIED;case Du.FAILED_PRECONDITION:return Ts.FAILED_PRECONDITION;case Du.ABORTED:return Ts.ABORTED;case Du.OUT_OF_RANGE:return Ts.OUT_OF_RANGE;case Du.UNIMPLEMENTED:return Ts.UNIMPLEMENTED;case Du.DATA_LOSS:return Ts.DATA_LOSS;default:return vs()}}(Mu=Du||(Du={}))[Mu.OK=0]="OK",Mu[Mu.CANCELLED=1]="CANCELLED",Mu[Mu.UNKNOWN=2]="UNKNOWN",Mu[Mu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mu[Mu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mu[Mu.NOT_FOUND=5]="NOT_FOUND",Mu[Mu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mu[Mu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mu[Mu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mu[Mu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mu[Mu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mu[Mu.ABORTED=10]="ABORTED",Mu[Mu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mu[Mu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mu[Mu.INTERNAL=13]="INTERNAL",Mu[Mu.UNAVAILABLE=14]="UNAVAILABLE",Mu[Mu.DATA_LOSS=15]="DATA_LOSS";var Hu=function(){function t(t,e){this.H=t,this.root=e||zu.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,zu.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,zu.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Bu(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Bu(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Bu(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Bu(this.root,t,this.H,!0)},t}(),Bu=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),zu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw vs();if(this.right.le())throw vs();var t=this.left.Ie();if(t!==this.right.Ie())throw vs();return t+(this.le()?0:1)},t}();zu.EMPTY=null,zu.RED=!0,zu.Ht=!1,zu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw vs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw vs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw vs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw vs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw vs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new zu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Qu=function(){function t(t){this.H=t,this.data=new Hu(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new Gu(this.data.te())},t.prototype.ee=function(t){return new Gu(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),Gu=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Wu=new Hu(qs.H);function Ku(){return Wu}function Yu(){return Ku()}var Xu=new Hu(qs.H);function $u(){return Xu}var Zu=new Hu(qs.H);function Ju(){return Zu}var tc=new Qu(qs.H);function ec(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=tc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var nc=new Qu(ws);function rc(){return nc}var ic=function(){function t(t){this.H=t?function(e,n){return t(e,n)||qs.H(e.key,n.key)}:function(t,e){return qs.H(t.key,e.key)},this.ge=$u(),this.Ve=new Hu(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),oc=function(){function t(){this.be=new Hu(qs.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):vs():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),sc=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,ic.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&$a(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),ac=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,uc.Le(e,n)),new t(Ms.min(),r,rc(),Ku(),ec())},t}(),uc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(Os.T,n,ec(),ec(),ec())},t}(),cc=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},lc=function(t,e){this.targetId=t,this.je=e},hc=function(t,e,n,r){void 0===n&&(n=Os.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fc=function(){function t(){this.Ge=0,this.ze=yc(),this.He=Os.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=ec(),e=ec(),n=ec();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:vs()}})),new uc(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=yc()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),dc=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Ku(),this._n=pc(),this.fn=new Qu(ws)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof ga?this.wn(r,t.We):t.We instanceof ma&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:vs()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(Oa(i))if(0===n){var o=new qs(i.path);this.En(e,o,new ma(o,Ms.min()))}else gs(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&Oa(o.target)){var s=new qs(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new ma(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=ec();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new ac(t,n,this.fn,this.ln,r);return this.ln=Ku(),this._n=pc(),this.fn=new Qu(ws),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new fc,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Qu(ws),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||fs("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new fc),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function pc(){return new Hu(qs.H)}function yc(){return new Hu(qs.H)}var vc={asc:"ASCENDING",desc:"DESCENDING"},gc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mc=function(t,e){this.t=t,this.Bt=e};function _c(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function bc(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function wc(t,e){return _c(t,e.j())}function Ec(t){return gs(!!t),Ms.K(function(t){var e=Ws(t);return new Ds(e.seconds,e.nanos)}(t))}function Cc(t,e){return function(t){return new Fs(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function Oc(t){var e=Fs.ot(t);return gs(Wc(e)),e}function Tc(t,e){return Cc(t.t,e.path)}function Ic(t,e){var n=Oc(e);if(n.get(1)!==t.t.projectId)throw new Is(Ts.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new Is(Ts.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new qs(kc(n))}function Sc(t,e){return Cc(t.t,e)}function xc(t){var e=Oc(t);return 4===e.length?Fs.ct():kc(e)}function Nc(t){return new Fs(["projects",t.t.projectId,"databases",t.t.database]).rt()}function kc(t){return gs(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Ac(t,e,n){return{name:Tc(t,e),fields:n.proto.mapValue.fields}}function jc(t,e,n){var r=Ic(t,e.name),i=Ec(e.updateTime),o=new da({mapValue:{fields:e.fields}});return new ga(r,i,o,{hasCommittedMutations:!!n})}function Rc(t,e){var n;if(e instanceof Nu)n={update:Ac(t,e.key,e.value)};else if(e instanceof Lu)n={delete:Tc(t,e.key)};else if(e instanceof ku)n={update:Ac(t,e.key,e.data),updateMask:Gc(e.Gt)};else{if(!(e instanceof Fu))return vs();n={verify:Tc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof hu)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof fu)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof pu)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof vu)return{fieldPath:e.field.rt(),increment:n.Ut};throw vs()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:wc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:vs()}(t,e.jt)),n}function Pc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?wu.updateTime(Ec(t.updateTime)):void 0!==t.exists?wu.exists(t.exists):wu.Kt()}(e.currentDocument):wu.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(gs("REQUEST_TIME"===e.setToServerValue),n=new hu):"appendMissingElements"in e?n=new fu(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new pu(e.removeAllFromArray.values||[]):"increment"in e?n=new vu(t,e.increment):vs();var r=Us.lt(e.fieldPath);return new _u(r,n)}(t,e)})):[];if(e.update){var i=Ic(t,e.update.name),o=new da({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Qs((t.fieldPaths||[]).map((function(t){return Us.lt(t)})))}(e.updateMask);return new ku(i,o,s,n,r)}return new Nu(i,o,n,r)}if(e.delete){var a=Ic(t,e.delete);return new Lu(a,n)}if(e.verify){var u=Ic(t,e.verify);return new Fu(u,n)}return vs()}function Dc(t,e){return{documents:[Sc(t,e.path)]}}function Mc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Sc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Sc(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ha(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NAN"}};if(la(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ha(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NAN"}};if(la(t.value))return{unaryFilter:{field:Hc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(t.field),op:qc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Hc(t.field),direction:Uc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Zs(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Fc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Fc(e.endAt)),n}function Lc(t){var e=xc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){gs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Qc(e)]:void 0!==e.fieldFilter?[zc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):vs():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ma(Bc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Zs(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Vc(n.startAt));var l=null;return n.endAt&&(l=Vc(n.endAt)),qa(e,i,a,s,u,"F",c,l)}function Fc(t){return{before:t.before,values:t.position}}function Vc(t){return new Pa(t.values||[],!!t.before)}function Uc(t){return vc[t]}function qc(t){return gc[t]}function Hc(t){return{fieldPath:t.rt()}}function Bc(t){return Us.lt(t.fieldPath)}function zc(t){return Ta.create(Bc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return vs()}}(t.fieldFilter.op),t.fieldFilter.value)}function Qc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bc(t.unaryFilter.field);return Ta.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bc(t.unaryFilter.field);return Ta.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bc(t.unaryFilter.field);return Ta.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bc(t.unaryFilter.field);return Ta.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return vs()}}function Gc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Wc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Kc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Yc=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&vs(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),Xc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Kc,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Jc(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=il(e.target.error);n.Bn.reject(new Jc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Jc(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(fs("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new el(e)},t}(),$c=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(Nt.n)())&&ds("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return fs("SimpleDb","Removing database:",t),nl(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(Nt.n)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n=this;return Object(S.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(fs("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Jc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Is(Ts.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Jc(t,n))},i.onupgradeneeded=function(t){fs("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){fs("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(S.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(S.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=Xc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Yc.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return fs("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Zc=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return nl(this.Zn.delete())},t}(),Jc=function(t){function e(e,n){var r=this;return(r=t.call(this,Ts.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(S.c)(e,t),e}(Is);function tl(t){return"IndexedDbTransactionError"===t.name}var el=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(fs("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(fs("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),nl(n)},t.prototype.add=function(t){return fs("SimpleDb","ADD",this.store.name,t,t),nl(this.store.add(t))},t.prototype.get=function(t){var e=this;return nl(this.store.get(t)).next((function(n){return void 0===n&&(n=null),fs("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return fs("SimpleDb","DELETE",this.store.name,t),nl(this.store.delete(t))},t.prototype.count=function(){return fs("SimpleDb","COUNT",this.store.name),nl(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){fs("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new Yc((function(n,r){e.onerror=function(t){var e=il(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new Yc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Zc(i),s=e(i.primaryKey,i.value,o);if(s instanceof Yc){var a=s.catch((function(t){return o.done(),Yc.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return Yc.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function nl(t){return new Yc((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=il(t.target.error);n(e)}}))}var rl=!1;function il(t){var e=$c.Qn(Object(Nt.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Is("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rl||(rl=!0,setTimeout((function(){throw r}),0)),r}}return t}var ol=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Kc,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new Is(Ts.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function sl(t,e){if(ds("AsyncQueue",e+": "+t),tl(t))return new Is(Ts.UNAVAILABLE,e+": "+t);throw t}var al="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ul=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();function cl(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=hl(e)),e=ll(t.get(n),e);return hl(e)}function ll(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function hl(t){return t+"\x01\x01"}function fl(t){var e=t.length;if(gs(e>=2),2===e)return gs("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Fs.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&vs(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:vs()}o=s+2}return new Fs(r)}var dl=function(t,e){this.seconds=t,this.nanoseconds=e},pl=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};pl.store="owner",pl.key="owner";var yl=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};yl.store="mutationQueues",yl.keyPath="userId";var vl=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};vl.store="mutations",vl.keyPath="batchId",vl.userMutationsIndex="userMutationsIndex",vl.userMutationsKeyPath=["userId","batchId"];var gl=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,cl(e)]},t.key=function(t,e,n){return[t,cl(e),n]},t}();gl.store="documentMutations",gl.PLACEHOLDER=new gl;var ml=function(t,e){this.path=t,this.readTime=e},_l=function(t,e){this.path=t,this.version=e},bl=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};bl.store="remoteDocuments",bl.readTimeIndex="readTimeIndex",bl.readTimeIndexPath="readTime",bl.collectionReadTimeIndex="collectionReadTimeIndex",bl.collectionReadTimeIndexPath=["parentPath","readTime"];var wl=function(t){this.byteSize=t};wl.store="remoteDocumentGlobal",wl.key="remoteDocumentGlobalKey";var El=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};El.store="targets",El.keyPath="targetId",El.queryTargetsIndexName="queryTargetsIndex",El.queryTargetsKeyPath=["canonicalId","targetId"];var Cl=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Cl.store="targetDocuments",Cl.keyPath=["targetId","path"],Cl.documentTargetsIndex="documentTargetsIndex",Cl.documentTargetsKeyPath=["path","targetId"];var Ol=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Ol.key="targetGlobalKey",Ol.store="targetGlobal";var Tl=function(t,e){this.collectionId=t,this.parent=e};Tl.store="collectionParents",Tl.keyPath=["collectionId","parent"];var Il=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Il.store="clientMetadata",Il.keyPath="clientId";var Sl=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Sl.store="bundles",Sl.keyPath="bundleId";var xl=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};xl.store="namedQueries",xl.keyPath="name";var Nl=Object(S.g)(Object(S.g)(Object(S.g)(Object(S.g)([yl.store,vl.store,gl.store,bl.store,El.store,pl.store,Ol.store,Cl.store],[Il.store]),[wl.store]),[Tl.store]),[Sl.store,xl.store]),kl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(S.c)(e,t),e}(ul);function Al(t,e){var n=ms(t);return $c.zn(n.ps,e)}var jl=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ou(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Tu(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Tu(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),ec())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Es(this.mutations,t.mutations,(function(t,e){return Su(t,e)}))&&Es(this.baseMutations,t.baseMutations,(function(t,e){return Su(t,e)}))},t}(),Rl=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){gs(e.mutations.length===r.length);for(var i=Ju(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Pl=function(t){this.Fs=t};function Dl(t,e){if(e.document)return jc(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=qs.Et(e.noDocument.path),r=Ul(e.noDocument.readTime);return new ma(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=qs.Et(e.unknownDocument.path);return r=Ul(e.unknownDocument.version),new _a(i,r)}return vs()}function Ml(t,e,n){var r=Ll(n),i=e.key.path.X().it();if(e instanceof ga){var o=function(t,e){return{name:Tc(t,e.key),fields:e.bt().mapValue.fields,updateTime:_c(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new bl(null,null,o,s,r,i)}if(e instanceof ma){var a=e.key.path.it(),u=Vl(e.version);return s=e.hasCommittedMutations,new bl(null,new ml(a,u),null,s,r,i)}if(e instanceof _a){var c=e.key.path.it(),l=Vl(e.version);return new bl(new _l(c,l),null,null,!0,r,i)}return vs()}function Ll(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Fl(t){var e=new Ds(t[0],t[1]);return Ms.K(e)}function Vl(t){var e=t.j();return new dl(e.seconds,e.nanoseconds)}function Ul(t){var e=new Ds(t.seconds,t.nanoseconds);return Ms.K(e)}function ql(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Pc(t.Fs,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return Pc(t.Fs,e)})),o=Ds.fromMillis(e.localWriteTimeMs);return new jl(e.batchId,o,n,i)}function Hl(t){var e,n,r=Ul(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ul(t.lastLimboFreeSnapshotVersion):Ms.min();return void 0!==t.query.documents?(gs(1===(n=t.query).documents.length),e=Ya(Ha(xc(n.documents[0])))):e=function(t){return Ya(Lc(t))}(t.query),new ru(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Os.fromBase64String(t.resumeToken))}function Bl(t,e){var n,r=Vl(e.Ot),i=Vl(e.lastLimboFreeSnapshotVersion);n=Oa(e.target)?Dc(t.Fs,e.target):Mc(t.Fs,e.target);var o=e.resumeToken.toBase64();return new El(e.targetId,Ea(e.target),r,o,e.sequenceNumber,i,n)}function zl(t){var e=Lc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Xa(e,e.limit,"L"):e}var Ql=function(){function t(){}return t.prototype.Os=function(t,e){return Gl(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Ul(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return Gl(t).put({bundleId:(n=e).id,createTime:Vl(Ec(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Wl(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:zl(e.bundledQuery),readTime:Ul(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return Wl(t).put(function(t){return{name:t.name,readTime:Vl(Ec(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Gl(t){return Al(t,Sl.store)}function Wl(t){return Al(t,xl.store)}var Kl=function(){function t(){this.Bs=new Yl}return t.prototype.qs=function(t,e){return this.Bs.add(e),Yc.resolve()},t.prototype.Us=function(t,e){return Yc.resolve(this.Bs.getEntries(e))},t}(),Yl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Qu(Fs.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Qu(Fs.H)).it()},t}(),Xl=function(){function t(){this.Qs=new Yl}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:cl(i)};return $l(t).put(o)}return Yc.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Cs(e),""],!1,!0);return $l(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(fl(o.parent))}return n}))},t}();function $l(t){return Al(t,Tl.store)}var Zl={Ks:!1,Ws:0,js:0,Gs:0},Jl=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function th(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){if(t.code!==Ts.FAILED_PRECONDITION||t.message!==al)throw t;return fs("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}Jl.Xs=10,Jl.Zs=1e3,Jl.ti=new Jl(41943040,Jl.Xs,Jl.Zs),Jl.ei=new Jl(-1,0,0);var eh=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Bs(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.et=function(){return zs(this.ii)},t}(),nh=function(){function t(){this.ri=new eh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Ms.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?Yc.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function rh(t,e,n){var r=t.store(vl.store),i=t.store(gl.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){gs(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=gl.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Yc.Mn(o).next((function(){return c}))}function ih(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw vs();e=t.noDocument}return JSON.stringify(e).length}var oh=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return gs(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ah(t).hs({index:vl.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=uh(t),s=ah(t);return s.add({}).next((function(a){gs("number"==typeof a);for(var u=new jl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Rc(t.Fs,e)})),i=n.mutations.map((function(e){return Rc(t.Fs,e)}));return new vl(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Qu((function(t,e){return ws(t.rt(),e.rt())})),f=0,d=r;f<d.length;f++){var p=d[f],y=gl.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(y,gl.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),Yc.Mn(l).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return ah(t).get(e).next((function(t){return t?(gs(t.userId===n.userId),ql(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?Yc.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ah(t).hs({index:vl.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(gs(e.batchId>=r),o=ql(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ah(t).hs({index:vl.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ah(t).rs(vl.userMutationsIndex,n).next((function(t){return t.map((function(t){return ql(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=gl.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return uh(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[2],c=fl(r[1]);if(a===n.userId&&e.path.isEqual(c))return ah(t).get(u).next((function(t){if(!t)throw vs();gs(t.userId===n.userId),o.push(ql(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Qu(ws),i=[];return e.forEach((function(e){var o=gl.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=uh(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[2],u=fl(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Yc.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=gl.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Qu(ws);return uh(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[2],c=fl(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ah(t).get(e).next((function(t){if(null===t)throw vs();gs(t.userId===n.userId),r.push(ql(n.Qt,t))})))})),Yc.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return rh(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),Yc.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return Yc.resolve();var r=IDBKeyRange.lowerBound(gl.prefixForUser(e.userId)),i=[];return uh(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=fl(t[1]);i.push(o)}else r.done()})).next((function(){gs(0===i.length)}))}))},t.prototype.Fi=function(t,e){return sh(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return ch(t).get(this.userId).next((function(t){return t||new yl(e.userId,-1,"")}))},t}();function sh(t,e,n){var r=gl.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return uh(t).hs({range:o,us:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function ah(t){return Al(t,vl.store)}function uh(t){return Al(t,gl.store)}function ch(t){return Al(t,yl.store)}var lh=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),hh=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new lh(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return Ms.K(new Ds(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return fh(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return gs(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return fh(t).hs((function(s,a){var u=Hl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return Yc.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return fh(t).hs((function(t,n){var r=Hl(n);e(r)}))},t.prototype.qi=function(t){return dh(t).get(Ol.key).next((function(t){return gs(null!==t),t}))},t.prototype.Ui=function(t,e){return dh(t).put(Ol.key,e)},t.prototype.Gi=function(t,e){return fh(t).put(Bl(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=Ea(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return fh(t).hs({range:r,index:El.queryTargetsIndexName},(function(t,n,r){var o=Hl(n);Ca(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=ph(t);return e.forEach((function(e){var s=cl(e.path);i.push(o.put(new Cl(n,s))),i.push(r.Ti.nr(t,n,e))})),Yc.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=ph(t);return Yc.forEach(e,(function(e){var o=cl(e.path);return Yc.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=ph(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ph(t),i=ec();return r.hs({range:n,us:!0},(function(t,e,n){var r=fl(t[1]),o=new qs(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=cl(e.path),r=IDBKeyRange.bound([n],[Cs(n)],!1,!0),i=0;return ph(t).hs({index:Cl.documentTargetsIndex,us:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return fh(t).get(e).next((function(t){return t?Hl(t):null}))},t}();function fh(t){return Al(t,El.store)}function dh(t){return Al(t,Ol.store)}function ph(t){return Al(t,Cl.store)}function yh(t,e){var n=t[1],r=e[1],i=ws(t[0],e[0]);return 0===i?ws(n,r):i}var vh=function(){function t(t){this.cr=t,this.buffer=new Qu(yh),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();yh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),gh=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;fs("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return Object(S.b)(e,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return tl(e=n.sent())?(fs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,th(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),mh=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return Yc.resolve(Ps.q);var r=new vh(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(fs("LruGarbageCollector","Garbage collection skipped; disabled"),Yc.resolve(Zl)):this.pr(t).next((function(r){return r<n.params.zs?(fs("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Zl):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(fs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),hs()<=an.a.DEBUG&&fs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Yc.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),_h=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new mh(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return bh(t,n)},t.prototype.ir=function(t,e,n){return bh(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return bh(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return ch(t).ls((function(r){return sh(t,r,e).next((function(t){return t&&(n=!0),Yc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),ph(t).delete([0,cl(s.path)])}))}));i.push(u)}})).next((function(){return Yc.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return bh(t,e)},t.prototype.Dr=function(t,e){var n,r=ph(t),i=Ps.q;return r.hs({index:Cl.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ps.q&&e(new qs(fl(n)),i),i=s,n=o):i=Ps.q})).next((function(){i!==Ps.q&&e(new qs(fl(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function bh(t,e){return ph(t).put(function(t,e){return new Cl(0,cl(t.path),e)}(e,t.bs))}var wh=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return Oh(t).put(Th(e),n)},t.prototype.li=function(t,e){var n=Oh(t),r=Th(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return Oh(t).get(Th(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return Oh(t).get(Th(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:ih(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Yu();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=Yu(),i=new Hu(qs.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,ih(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return Yc.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return Oh(t).hs({range:r},(function(t,e,r){for(var s=qs.Et(t);o&&qs.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=$u(),o=e.path.length+1,s={};if(n.isEqual(Ms.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=Ll(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=bl.collectionReadTimeIndex}return Oh(t).hs(s,(function(t,n,s){if(t.length===o){var a=Dl(r.Qt,n);e.path.nt(a.key.path)?a instanceof ga&&tu(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new Eh(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ch(t).get(wl.key).next((function(t){return gs(!!t),t}))},t.prototype.kr=function(t,e){return Ch(t).put(wl.key,e)},t.prototype.Mr=function(t){if(t){var e=Dl(this.Qt,t);return e instanceof ma&&e.version.isEqual(Ms.min())?null:e}return null},t}(),Eh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new eh((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(S.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Qu((function(t,e){return ws(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Ml(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=ih(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=Ml(e.jr.Qt,new ma(o,Ms.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),Yc.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(nh);function Ch(t){return Al(t,wl.store)}function Oh(t){return Al(t,bl.store)}function Th(t){return t.path.it()}var Ih=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;gs(n<r&&n>=0&&r<=11);var o=new Xc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(pl.store)}(t),function(t){t.createObjectStore(yl.store,{keyPath:yl.keyPath}),t.createObjectStore(vl.store,{keyPath:vl.keyPath,autoIncrement:!0}).createIndex(vl.userMutationsIndex,vl.userMutationsKeyPath,{unique:!0}),t.createObjectStore(gl.store)}(t),Sh(t),function(t){t.createObjectStore(bl.store)}(t));var s=Yc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Cl.store),t.deleteObjectStore(El.store),t.deleteObjectStore(Ol.store)}(t),Sh(t)),s=s.next((function(){return function(t){var e=t.store(Ol.store),n=new Ol(0,0,Ms.min().j(),0);return e.put(Ol.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(vl.store).rs().next((function(n){t.deleteObjectStore(vl.store),t.createObjectStore(vl.store,{keyPath:vl.keyPath,autoIncrement:!0}).createIndex(vl.userMutationsIndex,vl.userMutationsKeyPath,{unique:!0});var r=e.store(vl.store),i=n.map((function(t){return r.put(t)}));return Yc.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Il.store,{keyPath:Il.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(wl.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(bl.store);e.createIndex(bl.readTimeIndex,bl.readTimeIndexPath,{unique:!1}),e.createIndex(bl.collectionReadTimeIndex,bl.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Sl.store,{keyPath:Sl.keyPath})}(t),function(t){t.createObjectStore(xl.store,{keyPath:xl.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(bl.store).hs((function(t,n){e+=ih(n)})).next((function(){var n=new wl(e);return t.store(wl.store).put(wl.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(yl.store),r=t.store(vl.store);return n.rs().next((function(n){return Yc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(vl.userMutationsIndex,i).next((function(r){return Yc.forEach(r,(function(r){gs(r.userId===n.userId);var i=ql(e.Qt,r);return rh(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(Cl.store),n=t.store(bl.store);return t.store(Ol.store).get(Ol.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Fs(n),s=function(t){return[0,cl(t)]}(o);r.push(e.get(s).next((function(n){return n?Yc.resolve():function(n){return e.put(new Cl(0,cl(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Yc.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(Tl.store,{keyPath:Tl.keyPath});var n=e.store(Tl.store),r=new Yl,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:cl(i)})}};return e.store(bl.store).hs({us:!0},(function(t,e){var n=new Fs(t);return i(n.X())})).next((function(){return e.store(gl.store).hs({us:!0},(function(t,e){var n=fl(t[1]);return i(n.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(El.store);return n.hs((function(t,r){var i=Hl(r),o=Bl(e.Qt,i);return n.put(o)}))},t}();function Sh(t){t.createObjectStore(Cl.store,{keyPath:Cl.keyPath}).createIndex(Cl.documentTargetsIndex,Cl.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(El.store,{keyPath:El.keyPath}).createIndex(El.queryTargetsIndexName,El.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Ol.store)}var xh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nh=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new Is(Ts.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new _h(this,i),this.ho=n+"main",this.Qt=new Pl(u),this.lo=new $c(this.ho,11,new Ih(this.Qt)),this._o=new hh(this.Ti,this.Qt),this.Ei=new Xl,this.fo=function(t,e){return new wh(t,e)}(this.Qt,this.Ei),this.wo=new Ql,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&ds("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Is(Ts.FAILED_PRECONDITION,xh);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new Ps(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(S.b)(e,void 0,void 0,(function(){return Object(S.d)(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return Object(S.b)(e,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return Object(S.b)(e,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Ah(e).put(new Il(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if(tl(e))return fs("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return fs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return kh(t).get(pl.key).next((function(t){return Yc.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Ah(t).delete(this.clientId)},t.prototype.xo=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(S.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Al(t,Il.store);return e.rs().next((function(t){var n=r.$o(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Yc.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?Yc.resolve(!0):kh(t).get(pl.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new Is(Ts.FAILED_PRECONDITION,xh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ah(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&fs("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return Object(S.b)(this,void 0,void 0,(function(){var t=this;return Object(S.d)(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[pl.store,Il.store],(function(e){var n=new kl(e,Ps.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Ah(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return oh.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return fs("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Nl,(function(o){return r=new kl(o,i.so?i.so.next():Ps.q),"readwrite-primary"===e?i.Vo(r).next((function(t){return!!t||i.bo(r)})).next((function(e){if(!e)throw ds("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po((function(){return i.uo(!1)})),new Is(Ts.FAILED_PRECONDITION,al);return n(r)})).next((function(t){return i.So(r).next((function(){return t}))})):i.jo(r).next((function(){return n(r)}))})).then((function(t){return r.Vs(),t}))},t.prototype.jo=function(t){var e=this;return kh(t).get(pl.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Is(Ts.FAILED_PRECONDITION,xh)}))},t.prototype.So=function(t){var e=new pl(this.clientId,this.allowTabSynchronization,Date.now());return kh(t).put(pl.key,e)},t.Kn=function(){return $c.Kn()},t.prototype.vo=function(t){var e=this,n=kh(t);return n.get(pl.key).next((function(t){return e.Do(t)?(fs("IndexedDbPersistence","Releasing primary lease."),n.delete(pl.key)):Yc.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ds("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return fs("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ds("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){ds("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function kh(t){return Al(t,pl.store)}function Ah(t){return Al(t,Il.store)}function jh(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Rh=function(t,e){this.progress=t,this.Go=e},Ph=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=Yu();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Ku();return i.forEach((function(t,e){e||(e=new ma(t,Ms.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return qs.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Wa(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new qs(e)).next((function(t){var e=$u();return t instanceof ga&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=$u();return this.Ei.Us(t,i).next((function(s){return Yc.forEach(s,(function(s){var a=function(t,e){return new Ua(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return o.sc(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Tu(u,r.get(c),o.vs);r=l instanceof ga?r.zt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){tu(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=ec(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ku&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof ga&&(c=c.zt(t,e))})),c}))},t}(),Dh=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=ec(),i=ec(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Mh=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(Ms.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(Ba(e)||za(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(hs()<=an.a.DEBUG&&fs("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ja(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Qu(eu(t));return e.forEach((function(e,r){r instanceof ga&&tu(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return hs()<=an.a.DEBUG&&fs("QueryEngine","Using full collection scan to execute query:",Ja(e)),this.ac.Kr(t,e,Ms.min())},t}(),Lh=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Hu(ws),this.dc=new eh((function(t){return Ea(t)}),Ca),this.wc=Ms.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Ph(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();function Fh(t,e,n,r){return new Lh(t,e,n,r)}function Vh(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(S.d)(this,(function(s){switch(s.label){case 0:return n=ms(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new Ph(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=ec(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,v=p.mutations;y<v.length;y++)s=s.add(v[y].key)}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Uh(t,e){var n=ms(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Yc.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);gs(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function qh(t){var e=ms(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function Hh(t,e){var n=ms(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return gs(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=Ku();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(Bh(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(Ms.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return Yc.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function Bh(t,e,n,r,i){var o=ec();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Ku();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof ma&&s.version.isEqual(Ms.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):fs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function zh(t,e){var n=ms(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Qh(t,e){var n=ms(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?Yc.resolve(r=i):n._o.Bi(t).next((function(i){return r=new ru(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function Gh(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:r=ms(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!tl(s=a.sent()))throw s;return fs("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Wh(t,e,n){var r=ms(t),i=Ms.min(),o=ec();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ms(t),i=r.dc.get(n);return void 0!==i?Yc.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,Ya(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:Ms.min(),n?o:ec())})).next((function(t){return{documents:t,Rc:o}}))}))}function Kh(t,e){var n=ms(t),r=ms(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function Yh(t){var e=ms(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ms(t),i=Ku(),o=Ll(n),s=Oh(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:bl.readTimeIndex,range:a},(function(t,e){var n=Dl(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:Fl(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go;return e.wc=t.readTime,n}))}function Xh(t){return Object(S.b)(this,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){return[2,(e=ms(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Oh(t),n=Ms.min();return e.hs({index:bl.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Fl(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function $h(t,e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,d;return Object(S.d)(this,(function(p){switch(p.label){case 0:for(i=ms(t),o=ec(),s=Ku(),a=Ju(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,Qh(i,function(t){return Ya(Ha(Fs.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Bh(t,f,s,Ms.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i._o.Yi(t,d.targetId).next((function(){return i._o.er(t,o,d.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function Zh(t,e,n){return void 0===n&&(n=ec()),Object(S.b)(this,void 0,void 0,(function(){var r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return[4,Qh(t,Ya(zl(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ms(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Ec(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(Os.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))}var Jh=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return Yc.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:Ec(n.createTime)}),Yc.resolve()},t.prototype.Ms=function(t,e){return Yc.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:zl(t.bundledQuery),readTime:Ec(t.readTime)}}(e)),Yc.resolve()},t}(),tf=function(){function t(){this.vc=new Qu(ef.Sc),this.Dc=new Qu(ef.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new ef(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new ef(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new qs(new Fs([])),r=new ef(n,t),i=new ef(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new qs(new Fs([])),n=new ef(e,t),r=new ef(e,t+1),i=ec();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new ef(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),ef=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return qs.H(t.key,e.key)||ws(t.Mc,e.Mc)},t.Cc=function(t,e){return ws(t.Mc,e.Mc)||qs.H(t.key,e.key)},t}(),nf=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Qu(ef.Sc)}return t.prototype.Ai=function(t){return Yc.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new jl(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new ef(u.key,i)),this.Ei.qs(t,u.key.path.X())}return Yc.resolve(o)},t.prototype.Pi=function(t,e){return Yc.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return Yc.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return Yc.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return Yc.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new ef(e,0),i=new ef(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),Yc.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Qu(ws);return e.forEach((function(t){var e=new ef(t,0),i=new ef(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),Yc.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;qs.wt(i)||(i=i.child(""));var o=new ef(new qs(i),0),s=new Qu(ws);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),Yc.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;gs(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return Yc.forEach(e.mutations,(function(i){var o=new ef(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new ef(e,0),r=this.Bc.Re(n);return Yc.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return Yc.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),rf=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Hu(qs.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return Yc.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=Yu();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),Yc.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=$u(),i=new qs(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof ga&&tu(e,u)&&(r=r.zt(u.key,u))}return Yc.resolve(r)},t.prototype.jc=function(t,e){return Yc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new of(this)},t.prototype.Or=function(t){return Yc.resolve(this.size)},t}(),of=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(S.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),Yc.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(nh),sf=function(){function t(t){this.persistence=t,this.Gc=new eh((function(t){return Ea(t)}),Ca),this.lastRemoteSnapshotVersion=Ms.min(),this.highestTargetId=0,this.zc=0,this.Hc=new tf,this.targetCount=0,this.Jc=lh.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),Yc.resolve()},t.prototype.Qi=function(t){return Yc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return Yc.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),Yc.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),Yc.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new lh(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,Yc.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),Yc.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,Yc.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),Yc.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return Yc.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return Yc.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),Yc.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),Yc.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),Yc.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return Yc.resolve(n)},t.prototype.Fi=function(t,e){return Yc.resolve(this.Hc.Fi(e))},t}(),af=function(){function t(t,e){var n=this;this.Yc={},this.so=new Ps(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new sf(this),this.Ei=new Kl,this.fo=function(t,e){return new rf(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new Pl(e),this.wo=new Jh(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new nf(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;fs("MemoryPersistence","Starting transaction:",t);var i=new uf(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return Yc.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),uf=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(S.c)(e,t),e}(ul),cf=function(){function t(t){this.persistence=t,this.na=new tf,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw vs()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),Yc.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),Yc.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),Yc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return Yc.forEach(this.ra,(function(r){var i=qs._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return Yc.Ln([function(){return Yc.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function lf(t,e){return"firestore_clients_"+t+"_"+e}function hf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function ff(t,e){return"firestore_targets_"+t+"_"+e}var df=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Is(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ds("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),pf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Is(i.error.code,i.error.message)),o?new t(e,i.state,r):(ds("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=rc(),s=0;i&&s<r.activeTargetIds.length;++s)i=ta(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ds("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),vf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ds("SharedClientState","Failed to parse online state: "+e),null)},t}(),gf=function(){function t(){this.activeTargetIds=rc()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),mf=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Hu(ws),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=lf(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new gf),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(S.d)(this,(function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(lf(this.persistenceKey,r)))&&(o=yf.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(ff(this.persistenceKey,t));if(n){var r=pf.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(ff(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return fs("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){fs("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){fs("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(fs("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void ds("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return Object(S.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(S.d)(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=Ps.q;if(null!=t)try{var n=JSON.parse(t);gs("number"==typeof n),e=n}catch(t){ds("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ps.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new df(this.currentUser,t,e,n),i=hf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=hf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=ff(this.persistenceKey,t),i=new pf(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return yf.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return df.ca(new xs(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return pf.ca(r,e)},t.prototype.pa=function(t){return vf.ca(t)},t.prototype.Ya=function(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(fs("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=rc();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),_f=function(){function t(){this.iu=new gf,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new gf,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),bf=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),wf=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){fs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){fs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ef={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Cf=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),Of=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(S.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new as;s.listenOnce(is.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case rs.NO_ERROR:var e=s.getResponseJson();fs("Connection","XHR received:",JSON.stringify(e)),i(e);break;case rs.TIMEOUT:fs("Connection",'RPC "'+t+'" timed out'),o(new Is(Ts.DEADLINE_EXCEEDED,"Request time out"));break;case rs.HTTP_ERROR:var n=s.getStatus();if(fs("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ts).indexOf(e)>=0?e:Ts.UNKNOWN}(r.status);o(new Is(a,r.message))}else o(new Is(Ts.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Is(Ts.UNAVAILABLE,"Connection failed."));break;default:vs()}}finally{fs("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Zo,i=ti(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(Nt.u)()||Object(Nt.x)()||Object(Nt.r)()||Object(Nt.t)()||Object(Nt.y)()||Object(Nt.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");fs("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Cf({fu:function(t){c?fs("Connection","Not sending because WebChannel is closed:",t):(u||(fs("Connection","Opening WebChannel transport."),a.open(),u=!0),fs("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,ss.EventType.OPEN,(function(){c||fs("Connection","WebChannel transport opened.")})),h(a,ss.EventType.CLOSE,(function(){c||(c=!0,fs("Connection","WebChannel transport closed"),l.Ru())})),h(a,ss.EventType.ERROR,(function(t){c||(c=!0,ps("Connection","WebChannel transport errored:",t),l.Ru(new Is(Ts.UNAVAILABLE,"The operation could not be completed")))})),h(a,ss.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];gs(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){fs("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Du[t];if(void 0!==e)return qu(e)}(i),s=r.message;void 0===o&&(o=Ts.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new Is(o,s)),a.close()}else fs("Connection","WebChannel received:",n),l.Pu(n)}})),h(i,os.STAT_EVENT,(function(t){10===t.stat?fs("Connection","Detected buffering proxy"):11===t.stat&&fs("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Au()}),0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);fs("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return fs("RestConnection","Received: ",t),t}),(function(e){throw ps("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+Ef[t]},t}());function Tf(){return"undefined"!=typeof window?window:null}function If(){return"undefined"!=typeof document?document:null}function Sf(t){return new mc(t,!0)}var xf=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&fs("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Nf=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new xf(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===Ts.RESOURCE_EXHAUSTED?(ds(e.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===Ts.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new Is(Ts.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return Object(S.b)(t,void 0,void 0,(function(){return Object(S.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return fs("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(fs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),kf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(S.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:vs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(gs(void 0===e||"string"==typeof e),Os.fromBase64String(e||"")):(gs(void 0===e||e instanceof Uint8Array),Os.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ts.UNKNOWN:qu(t.code);return new Is(e,t.message||"")}(a);n=new hc(r,i,o,s||null)}else if("documentChange"in e){i=Ic(t,(r=e.documentChange).document.name),o=Ec(r.document.updateTime);var a=new da({mapValue:{fields:r.document.fields}}),u=(s=new ga(i,o,a,{}),r.targetIds||[]);n=new cc(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ic(t,(r=e.documentDelete).document),o=r.readTime?Ec(r.readTime):Ms.min(),a=new ma(i,o),n=new cc([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Ic(t,(r=e.documentRemove).document),n=new cc([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return vs();var c=e.filter;i=new Vu(r=c.count||0),n=new lc(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Ms.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ms.min():e.readTime?Ec(e.readTime):Ms.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Nc(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=Oa(r)?{documents:Dc(t,r)}:{query:Mc(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=bc(t,e.resumeToken):e.Ot._(Ms.min())>0&&(n.readTime=_c(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vs()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Nc(this.Qt),e.removeTarget=t,this.th(e)},e}(Nf),Af=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(gs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(gs(void 0!==e),t.map((function(t){return function(t,e){var n=Ec(t.updateTime?t.updateTime:e);n.isEqual(Ms.min())&&(n=Ec(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new bu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ec(t.commitTime);return this.listener.dh(n,e)}return gs(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Nc(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Rc(e.Qt,t)}))};this.th(n)},e}(Nf),jf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(S.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new Is(Ts.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===Ts.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===Ts.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),Rf=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(ds(e),this.Rh=!1):fs("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),Pf=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return Object(S.b)(o,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return Bf(this)?(fs("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(S.b)(this,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return(e=ms(t)).Nh.add(4),[4,Mf(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Df(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new Rf(n,r)};function Df(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:if(!Bf(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Mf(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Lf(t,e){var n=ms(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Hf(n)?qf(n):id(n).Hu()&&Vf(n,e))}function Ff(t,e){var n=ms(t),r=id(n);n.xh.delete(e),r.Hu()&&Uf(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Bf(n)&&n.Oh.set("Unknown"))}function Vf(t,e){t.kh.on(e.targetId),id(t).uh(e)}function Uf(t,e){t.kh.on(e),id(t).hh(e)}function qf(t){t.kh=new dc({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),id(t).start(),t.Oh.Ph()}function Hf(t){return Bf(t)&&!id(t).zu()&&t.xh.size>0}function Bf(t){return 0===ms(t).Nh.size}function zf(t){t.kh=void 0}function Qf(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){return t.xh.forEach((function(e,n){Vf(t,e)})),[2]}))}))}function Gf(t,e){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(n){return zf(t),Hf(t)?(t.Oh.Vh(e),qf(t)):t.Oh.set("Unknown"),[2]}))}))}function Wf(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o;return Object(S.d)(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof hc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(S.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),fs("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Kf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof cc?t.kh.dn(e):e instanceof lc?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Ms.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,qh(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(Os.T,n.Ot)),Uf(t,e);var r=new ru(n.target,e,1,n.sequenceNumber);Vf(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return fs("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Kf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Kf(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r=this;return Object(S.d)(this,(function(i){switch(i.label){case 0:if(!tl(e))throw e;return t.Nh.add(1),[4,Mf(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return qh(t.bh)}),t._s.po((function(){return Object(S.b)(r,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return fs("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Df(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Yf(t,e){return e().catch((function(n){return Kf(t,n,e)}))}function Xf(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(S.d)(this,(function(s){switch(s.label){case 0:e=ms(t),n=od(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Bf(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,zh(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=od(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Kf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return $f(e)&&Zf(e),[2]}}))}))}function $f(t){return Bf(t)&&!od(t).zu()&&t.Ch.length>0}function Zf(t){od(t).start()}function Jf(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){return od(t).Eh(),[2]}))}))}function td(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n,r;return Object(S.d)(this,(function(i){for(e=od(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]}))}))}function ed(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=Rl.from(r,e,n),[4,Yf(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,Xf(t)];case 2:return o.sent(),[2]}}))}))}function nd(t,e){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(n){switch(n.label){case 0:return e&&od(t)._h?[4,function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:return Uu(r=e.code)&&r!==Ts.ABORTED?(n=t.Ch.shift(),od(t).Yu(),[4,Yf(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Xf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return $f(t)&&Zf(t),[2]}}))}))}function rd(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return n=ms(t),e?(n.Nh.delete(2),[4,Df(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Mf(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function id(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=ms(t);return r.Ih(),new kf(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Qf.bind(null,t),Tu:Gf.bind(null,t),ah:Wf.bind(null,t)}),t.$h.push((function(n){return Object(S.b)(e,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Hf(t)?qf(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),zf(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function od(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=ms(t);return r.Ih(),new Af(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Jf.bind(null,t),Tu:nd.bind(null,t),wh:td.bind(null,t),dh:ed.bind(null,t)}),t.$h.push((function(n){return Object(S.b)(e,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Xf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(fs("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh}var sd=function(){this.Kh=void 0,this.listeners=[]},ad=function(){this.queries=new eh((function(t){return Za(t)}),$a),this.onlineState="Unknown",this.Wh=new Set};function ud(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(S.d)(this,(function(c){switch(c.label){case 0:if(n=ms(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new sd),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=sl(a,"Initialization of query '"+Ja(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&fd(n),[2]}}))}))}function cd(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(S.d)(this,(function(a){return n=ms(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function ld(t,e){for(var n=ms(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&fd(n)}function hd(t,e,n){var r=ms(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function fd(t){t.Wh.forEach((function(t){t.next()}))}var dd=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new sc(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=sc.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),pd=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),yd=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return Ic(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?jc(this.Qt,t.document,!1):new ma(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return Ec(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new yd(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||ec()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return[4,$h(this.bh,new yd(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Zh(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Rh(Object.assign({},this.progress),t))]}}))}))}}();var vd=function(t){this.key=t},gd=function(t){this.key=t},md=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=ec(),this.De=ec(),this.hl=eu(t),this.ll=new ic(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new oc,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Ba(this.query)&&i.size===this.query.limit?i.last():null,c=za(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var l=i.get(t),h=e instanceof ga?e:null;h&&(h=tu(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Ba(this.query)||za(this.query))for(;s.size>this.query.limit;){var l=Ba(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vs()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new sc(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new oc,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=ec(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new gd(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new vd(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=ec();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return sc.Ne(this.query,this.ll,this.De,0===this.al)},t}(),_d=function(t,e,n){this.query=t,this.targetId=e,this.view=n},bd=function(t){this.key=t,this.Pl=!1},wd=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new eh((function(t){return Za(t)}),$a),this.Sl=new Map,this.Dl=new Set,this.Cl=new Hu(qs.H),this.xl=new Map,this.Nl=new tf,this.$l={},this.Fl=new Map,this.Ol=lh.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function Ed(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:return n=$d(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,Qh(n.bh,Ya(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,Cd(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&Lf(n.yl,o),a.label=4;case 4:return[2,r]}}))}))}function Cd(t,e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(S.d)(this,(function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,Wh(t.bh,e.query,!1).then((function(t){return e.view.fl(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Md(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Wh(t.bh,e,!0)];case 1:return i=l.sent(),o=new md(e,i.Rc),s=o.fl(i.documents),a=uc.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Md(t,n,u.Il),c=new _d(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function Od(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return n=ms(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!$a(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Gh(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),Ff(n.yl,r.targetId),Pd(n,r.targetId)})).catch(th)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Pd(n,r.targetId),[4,Gh(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Td(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:r=Zd(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ms(t),i=Ds.now(),o=e.reduce((function(t,e){return t.add(e.key)}),ec());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Iu(c,n.get(c.key));null!=l&&s.push(new ku(c.key,l,ya(l.proto.mapValue),wu.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Hu(ws)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Vd(r,i.ri)];case 3:return a.sent(),[4,Xf(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=sl(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Id(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:n=ms(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Hh(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(gs(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?gs(r.Pl):t.Qe.size>0&&(gs(r.Pl),r.Pl=!1))})),[4,Vd(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,th(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Sd(t,e,n){var r=ms(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ms(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&fd(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function xd(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(S.d)(this,(function(c){switch(c.label){case 0:return(r=ms(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Hu(qs.H)).zt(o,new ma(o,Ms.min())),a=ec().add(o),u=new ac(Ms.min(),new Map,new Qu(ws),s,a),[4,Id(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),Fd(r),[3,4];case 2:return[4,Gh(r.bh,e,!1).then((function(){return Pd(r,e,n)})).catch(th)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Nd(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:n=ms(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Uh(n.bh,e)];case 2:return i=o.sent(),Rd(n,r,null),jd(n,r),n.Vl.Na(r,"acknowledged"),[4,Vd(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,th(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function kd(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:r=ms(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ms(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return gs(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),Rd(r,e,n),jd(r,e),r.Vl.Na(e,"rejected",n),[4,Vd(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,th(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ad(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:Bf((n=ms(t)).yl)||fs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ms(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=sl(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function jd(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function Rd(t,e,n){var r=ms(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function Pd(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Dd(t,e)}))}function Dd(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Ff(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),Fd(t))}function Md(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof vd?(t.Nl.nr(o.key,e),Ld(t,o)):o instanceof gd?(fs("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Dd(t,o.key)):vs()}}function Ld(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(fs("SyncEngine","New document in limbo: "+n),t.Dl.add(r),Fd(t))}function Fd(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new qs(Fs.ot(e)),r=t.Ol.next();t.xl.set(r,new bd(n)),t.Cl=t.Cl.zt(n,r),Lf(t.yl,new ru(Ya(Ha(n.path)),r,2,Ps.q))}}function Vd(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:return r=ms(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Dh.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(S.d)(this,(function(l){switch(l.label){case 0:n=ms(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Yc.forEach(e,(function(e){return Yc.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return Yc.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!tl(r=l.sent()))throw r;return fs("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Ud(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:return(n=ms(t)).currentUser.isEqual(e)?[3,3]:(fs("SyncEngine","User change. New user:",e.A()),[4,Vh(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new Is(Ts.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Vd(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function qd(t,e){var n=ms(t),r=n.xl.get(e);if(r&&r.Pl)return ec().add(r.key);var i=ec(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function Hd(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return[4,Wh((n=ms(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Md(n,e.targetId,i.Il),i)]}}))}))}function Bd(t){return Object(S.b)(this,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){return[2,Yh((e=ms(t)).bh).then((function(t){return Vd(e,t)}))]}))}))}function zd(t,e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o;return Object(S.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ms(t),r=ms(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):Yc.resolve(null)}))}))}((i=ms(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Xf(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Rd(i,e,r||null),jd(i,e),function(t,e){ms(ms(t).zo).xi(e)}(i.bh,e)):vs(),s.label=4;case 4:return[4,Vd(i,o)];case 5:return s.sent(),[3,7];case 6:fs("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Qd(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(S.d)(this,(function(c){switch(c.label){case 0:return $d(n=ms(t)),Zd(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,Gd(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,rd(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Lf(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then((function(){return Pd(n,e),Gh(n.bh,e,!0)})),Ff(n.yl,e)})),[4,u]);case 4:return c.sent(),[4,Gd(n,a)];case 5:return c.sent(),function(t){var e=ms(t);e.xl.forEach((function(t,n){Ff(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new Hu(qs.H)}(n),n.kl=!1,[4,rd(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function Gd(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(S.d)(this,(function(y){switch(y.label){case 0:n=ms(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,Qh(n.bh,Ya(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,Hd(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Kh(n.bh,a)];case 8:return p=y.sent(),[4,Qh(n.bh,p)];case 9:return u=y.sent(),[4,Cd(n,Wd(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Wd(t){return qa(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Kd(t){var e=ms(t);return ms(ms(e.bh).persistence).Uo()}function Yd(t,e,n,r){return Object(S.b)(this,void 0,void 0,(function(){var i,o,s;return Object(S.d)(this,(function(a){switch(a.label){case 0:return(i=ms(t)).kl?(fs("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Yh(i.bh)];case 3:return o=a.sent(),s=ac.Me(e,"current"===n),[4,Vd(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Gh(i.bh,e,!0)];case 6:return a.sent(),Pd(i,e,r),[3,8];case 7:vs(),a.label=8;case 8:return[2]}}))}))}function Xd(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(S.d)(this,(function(f){switch(f.label){case 0:if(!(r=$d(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(fs("SyncEngine","Adding an already active target "+s),[3,5]):[4,Kh(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,Qh(r.bh,a)];case 3:return u=f.sent(),[4,Cd(r,Wd(a),u.targetId,!1)];case 4:f.sent(),Lf(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(S.d)(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,Gh(r.bh,t,!1).then((function(){Ff(r.yl,t),Pd(r,t)})).catch(th)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function $d(t){var e=ms(t);return e.yl.Dh.Lh=Id.bind(null,e),e.yl.Dh.vn=qd.bind(null,e),e.yl.Dh.Mh=xd.bind(null,e),e.bl.ah=ld.bind(null,e.gl),e.bl.Bl=hd.bind(null,e.gl),e}function Zd(t){var e=ms(t);return e.yl.Dh.Bh=Nd.bind(null,e),e.yl.Dh.qh=kd.bind(null,e),e}var Jd=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return this.Qt=Sf(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Fh(this.persistence,new Mh,t.Jl,this.Qt)},t.prototype.jl=function(t){return new af(cf.ia,this.Qt)},t.prototype.Wl=function(t){return new _f},t.prototype.terminate=function(){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(S.c)(e,t),e.prototype.initialize=function(e){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Xh(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Zd(this.Yl._a)];case 4:return n.sent(),[4,Xf(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Fh(this.persistence,new Mh,t.Jl,this.Qt)},e.prototype.zl=function(t){return new gh(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=jh(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Jl.Ys(this.cacheSizeBytes):Jl.ti;return new Nh(this.synchronizeTabs,e,t.clientId,n,t._s,Tf(),If(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new _f},e}(Jd),ep=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(S.c)(e,t),e.prototype.initialize=function(e){return Object(S.b)(this,void 0,void 0,(function(){var n,r=this;return Object(S.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof mf?(this.Vl._a={eu:zd.bind(null,n),nu:Yd.bind(null,n),su:Xd.bind(null,n),Uo:Kd.bind(null,n),tu:Bd.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return Object(S.b)(r,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return[4,Qd(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=Tf();if(!mf.Kn(e))throw new Is(Ts.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=jh(t.yu.t,t.yu.persistenceKey);return new mf(e,t._s,n,t.clientId,t.Jl)},e}(tp),np=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n=this;return Object(S.d)(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return Sd(n._a,t,1)},this.yl.Dh.n_=Ud.bind(null,this._a),[4,rd(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new ad},t.prototype.Xl=function(t){var e=Sf(t.yu.t),n=new Of(t.yu);return function(t,e,n){return new jf(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return Sd(s._a,t,0)},o=wf.Kn()?new wf:new bf,new Pf(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new wd(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(S.b)(this,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return e=ms(t),fs("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Mf(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),rp=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ip=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Kc,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new pd(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return Object(S.b)(this,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Is(Ts.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Us(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),op=function(t){this._methodName=t},sp=function(t){this.d_=t};function ap(t,e,n){if(!n)throw new Is(Ts.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function up(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Is(Ts.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function cp(t,e,n,r){if(!0===e&&!0===r)throw new Is(Ts.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function lp(t){if(!qs.wt(t))throw new Is(Ts.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function hp(t){if(qs.wt(t))throw new Is(Ts.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function fp(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":vs()}function dp(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new Is(Ts.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=fp(t);throw new Is(Ts.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function pp(t,e){if(e<=0)throw new Is(Ts.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var yp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Is(Ts.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Is(Ts.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,cp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),vp=new Map,gp=function(){function t(t,e){this.w_="(lite)",this.E_=new yp({}),this.T_=!1,t instanceof cs?(this.I_=t,this.m_=new ks):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Is(Ts.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cs(t.options.projectId)}(t),this.m_=new As(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new Is(Ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new Is(Ts.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new yp(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new ks;switch(t.type){case"gapi":var e=t.client;return gs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Rs(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Is(Ts.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=vp.get(this))&&(fs("ComponentProvider","Removing Datastore"),vp.delete(this),t.terminate()),Promise.resolve();var t},t}(),mp=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new bp(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),_p=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),bp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ha(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new mp(this.firestore,null,new qs(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(_p);function wp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof sp&&(t=t.d_),ap("collection","path",e),t instanceof gp)return hp(n=Fs.ot.apply(Fs,Object(S.g)([e],r))),new bp(t,null,n);if(!(t instanceof mp||t instanceof bp))throw new Is(Ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return hp(n=Fs.ot.apply(Fs,Object(S.g)([t.path],r)).child(Fs.ot(e))),new bp(t.firestore,null,n)}function Ep(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof sp&&(t=t.d_),1===arguments.length&&(e=bs.u()),ap("doc","path",e),t instanceof gp)return lp(n=Fs.ot.apply(Fs,Object(S.g)([e],r))),new mp(t,null,new qs(n));if(!(t instanceof mp||t instanceof bp))throw new Is(Ts.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lp(n=t.D_.child(Fs.ot.apply(Fs,Object(S.g)([e],r)))),new mp(t.firestore,t instanceof bp?t.v_:null,new qs(n))}function Cp(t,e){return t instanceof sp&&(t=t.d_),e instanceof sp&&(e=e.d_),(t instanceof mp||t instanceof bp)&&(e instanceof mp||e instanceof bp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function Op(t,e){return t instanceof sp&&(t=t.d_),e instanceof sp&&(e=e.d_),t instanceof _p&&e instanceof _p&&t.firestore===e.firestore&&$a(t.C_,e.C_)&&t.v_===e.v_}var Tp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Is(Ts.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Is(Ts.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return ws(this.x_,t.x_)||ws(this.N_,t.N_)},t}(),Ip=/^__.*__$/,Sp=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new ku(t,this.data,this.Gt,e,this.fieldTransforms):new Nu(t,this.data,e,this.fieldTransforms)},t}(),xp=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new ku(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function Np(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vs()}}var kp=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Xp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Np(this.k_)&&Ip.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Ap=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Sf(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new kp({k_:t,methodName:e,j_:n,path:Us.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function jp(t){var e=t.p_(),n=Sf(t.I_);return new Ap(t.I_,!!e.ignoreUndefinedProperties,n)}function Rp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);Gp("Data must be an object, but it was:",s,r);var a,u,c=zp(r,s);if(o.merge)a=new Qs(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Wp(e,f[h],n);if(!s.contains(d))throw new Is(Ts.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");$p(l,d)||l.push(d)}a=new Qs(l),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new Sp(new da(c),a,u)}var Pp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(op);function Dp(t,e,n){return new kp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Mp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.z_=function(t){return new _u(t.path,new hu)},e.prototype.isEqual=function(t){return t instanceof e},e}(op),Lp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(S.c)(e,t),e.prototype.z_=function(t){var e=Dp(this,t,!0),n=this.H_.map((function(t){return Bp(t,e)})),r=new fu(n);return new _u(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(op),Fp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(S.c)(e,t),e.prototype.z_=function(t){var e=Dp(this,t,!0),n=this.H_.map((function(t){return Bp(t,e)})),r=new pu(n);return new _u(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(op),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(S.c)(e,t),e.prototype.z_=function(t){var e=new vu(t.Qt,su(t.Qt,this.J_));return new _u(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(op);function Up(t,e,n,r){var i=t.G_(1,e,n);Gp("Data must be an object, but it was:",i,r);var o=[],s=new pa;Bs(r,(function(t,r){var a=Yp(e,t,n);r instanceof sp&&(r=r.d_);var u=i.U_(a);if(r instanceof Pp)o.push(a);else{var c=Bp(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Qs(o);return new xp(s.Pt(),a,i.fieldTransforms)}function qp(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Wp(e,r,n)],u=[i];if(o.length%2!=0)throw new Is(Ts.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Wp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new pa,f=a.length-1;f>=0;--f)if(!$p(l,a[f])){var d=a[f],p=u[f];p instanceof sp&&(p=p.d_);var y=s.U_(d);if(p instanceof Pp)l.push(d);else{var v=Bp(p,y);null!=v&&(l.push(d),h.set(d,v))}}var g=new Qs(l);return new xp(h.Pt(),g,s.fieldTransforms)}function Hp(t,e,n,r){return void 0===r&&(r=!1),Bp(n,t.G_(r?4:3,e))}function Bp(t,e){if(t instanceof sp&&(t=t.d_),Qp(t))return Gp("Unsupported field value:",e,t),zp(t,e);if(t instanceof op)return function(t,e){if(!Np(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Bp(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof sp&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return su(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ds.fromDate(t);return{timestampValue:_c(e.Qt,n)}}if(t instanceof Ds)return n=new Ds(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:_c(e.Qt,n)};if(t instanceof Tp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ss)return{bytesValue:bc(e.Qt,t.I)};if(t instanceof mp){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Cc(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+fp(t))}(t,e)}function zp(t,e){var n={};return zs(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Bs(t,(function(t,r){var i=Bp(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Qp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ds||t instanceof Tp||t instanceof Ss||t instanceof mp||t instanceof op)}function Gp(t,e,n){if(!Qp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=fp(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Wp(t,e,n){if(e instanceof sp&&(e=e.d_),e instanceof ip)return e.f_;if("string"==typeof e)return Yp(t,e);throw Xp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Kp=new RegExp("[~\\*/\\[\\]]");function Yp(t,e,n){if(e.search(Kp)>=0)throw Xp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ip.bind.apply(ip,Object(S.g)([void 0],e.split("."))))).f_}catch(r){throw Xp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Xp(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Is(Ts.INVALID_ARGUMENT,(a+=". ")+t+u)}function $p(t,e){return t.some((function(t){return t.isEqual(e)}))}var Zp=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n=this;return Object(S.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new Is(Ts.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(S.d)(this,(function(u){switch(u.label){case 0:return n=ms(t),r=Nc(n.Qt)+"/documents",i={documents:e.map((function(t){return Tc(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){gs(!!e.found);var n=Ic(t,e.found.name),r=Ec(e.found.updateTime),i=new da({mapValue:{fields:e.found.fields}});return new ga(n,r,i,{})}(t,e):"missing"in e?function(t,e){gs(!!e.missing),gs(!!e.readTime);var n=Ic(t,e.missing),r=Ec(e.readTime);return new ma(n,r)}(t,e):vs()}(n.Qt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());gs(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof ma||t instanceof ga?n.sf(t):vs()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new Lu(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e=this;return Object(S.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=qs._t(n);e.mutations.push(new Fu(r,e.jt(r)))})),[4,function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return n=ms(t),r=Nc(n.Qt)+"/documents",i={writes:e.map((function(t){return Rc(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof ga)e=t.version;else{if(!(t instanceof ma))throw vs();e=Ms.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Is(Ts.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?wu.updateTime(e):wu.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Ms.min()))throw new Is(Ts.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wu.updateTime(e)}return wu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Jp=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new xf(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return Object(S.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(S.d)(this,(function(r){return t=new Zp(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Zs(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Uu(e)}return!1},t}(),ty=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=xs.UNAUTHENTICATED,this.clientId=bs.u(),this._f=function(){},this.C=new Kc,this.credentials.v((function(t){fs("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new Is(Ts.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Kc;return this._s.Tf((function(){return Object(S.b)(t,void 0,void 0,(function(){var t,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=sl(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function ey(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(S.d)(this,(function(o){switch(o.label){case 0:return t._s.Af(),fs("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return Object(S.b)(i,void 0,void 0,(function(){return Object(S.d)(this,(function(t){switch(t.label){case 0:return[4,Vh(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function ny(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,ry(t)];case 1:return n=i.sent(),fs("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return Object(S.b)(this,void 0,void 0,(function(){var n,r;return Object(S.d)(this,(function(i){switch(i.label){case 0:return(n=ms(t))._s.Af(),fs("RemoteStore","RemoteStore received new credentials"),r=Bf(n),n.Nh.add(3),[4,Mf(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Df(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function ry(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(fs("FirestoreClient","Using default OfflineComponentProvider"),[4,ey(t,new Jd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function iy(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(fs("FirestoreClient","Using default OnlineComponentProvider"),[4,ny(t,new np)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function oy(t){return ry(t).then((function(t){return t.persistence}))}function sy(t){return ry(t).then((function(t){return t.bh}))}function ay(t){return iy(t).then((function(t){return t.yl}))}function uy(t){return iy(t).then((function(t){return t._a}))}function cy(t){return Object(S.b)(this,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return[4,iy(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=Ed.bind(null,e._a),n.Hh=Od.bind(null,e._a),n)]}}))}))}function ly(t,e,n){var r=this;void 0===n&&(n={});var i=new Kc;return t._s.Ps((function(){return Object(S.b)(r,void 0,void 0,(function(){var r;return Object(S.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new rp({next:function(o){e.Ps((function(){return cd(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Is(Ts.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Is(Ts.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new dd(Ha(n.path),o,{includeMetadataChanges:!0,nl:!0});return ud(t,s)},[4,cy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function hy(t,e,n){var r=this;void 0===n&&(n={});var i=new Kc;return t._s.Ps((function(){return Object(S.b)(r,void 0,void 0,(function(){var r;return Object(S.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new rp({next:function(n){e.Ps((function(){return cd(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Is(Ts.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new dd(n,o,{includeMetadataChanges:!0,nl:!0});return ud(t,s)},[4,cy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var fy=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new xf(this,"async_queue_retry"),this.vf=function(){var e=If();e&&fs("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=If();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=If();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(S.b)(this,void 0,void 0,(function(){var t,e=this;return Object(S.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!tl(t=n.sent()))throw t;return fs("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,ds("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=ol.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&vs()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(S.b)(this,void 0,void 0,(function(){var t;return Object(S.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function dy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new Kc,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var py=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new fy,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(S.c)(e,t),e.prototype.b_=function(){return this.qf||vy(this),this.qf.terminate()},e}(gp);function yy(t){return t.qf||vy(t),t.qf.df(),t.qf}function vy(t){var e=t.p_(),n=function(t,e,n){return new us(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new ty(t.m_,t.Bf,n)}function gy(t,e,n){var r=this,i=new Kc;return t._s.enqueue((function(){return Object(S.b)(r,void 0,void 0,(function(){var r;return Object(S.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ey(t,n)];case 1:return o.sent(),[4,ny(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ts.FAILED_PRECONDITION||t.code===Ts.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function my(t){if(t.R_||t.P_)throw new Is(Ts.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var _y=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),ea(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ks(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Ys(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw vs()}},t.prototype.Hf=function(t,e){var n=this,r={};return Bs(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new Tp(Ks(t.latitude),Ks(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Xs(n)?t(n):n}(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf($s(t));default:return null}},t.prototype.Qf=function(t){var e=Ws(t);return new Ds(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Fs.ot(t);gs(Wc(n));var r=new cs(n.get(1),n.get(3)),i=new qs(n.Y(5));return r.isEqual(e)||ds("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),by=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new mp(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new wy(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(Ey("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),wy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(by);function Ey(t,e){return"string"==typeof e?Yp(t,e):e instanceof sp?e.d_.f_:e.f_}function Cy(t){if(za(t)&&0===t.xt.length)throw new Is(Ts.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Oy=function(){};function Ty(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var Iy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(S.c)(e,t),e.prototype.td=function(t){var e=jp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new Is(Ts.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Ry(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(jy(r,t,l[c]));a={arrayValue:{values:u}}}else a=jy(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Ry(s,o),a=Hp(n,"where",s,"in"===o||"not-in"===o);var h=Ta.create(i,o,a);return function(t,e){if(e.Ct()){var n=Ga(t);if(null!==n&&!n.isEqual(e.field))throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Qa(t);null!==r&&Py(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Is(Ts.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new _p(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Ua(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(Oy),Sy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(S.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ma(e,n);return function(t,e){if(null===Qa(t)){var n=Ga(t);null!==n&&Py(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new _p(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Ua(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(Oy),xy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(S.c)(e,t),e.prototype.td=function(t){return new _p(t.firestore,t.v_,Xa(t.C_,this.od,this.ad))},e}(Oy),Ny=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(S.c)(e,t),e.prototype.td=function(t){var e=Ay(t,this.type,this.ud,this.hd);return new _p(t.firestore,t.v_,function(t,e){return new Ua(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(Oy),ky=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(S.c)(e,t),e.prototype.td=function(t){var e=Ay(t,this.type,this.ud,this.hd);return new _p(t.firestore,t.v_,function(t,e){return new Ua(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(Oy);function Ay(t,e,n,r){if(n[0]instanceof sp&&(n[0]=n[0].d_),n[0]instanceof by)return function(t,e,n,r,i){if(!r)throw new Is(Ts.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ka(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(aa(e,r.key));else{var c=r.field(u.field);if(Xs(c))throw new Is(Ts.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Pa(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=jp(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new Is(Ts.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Wa(t)&&-1!==c.indexOf("/"))throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Fs.ot(c));if(!qs.wt(l))throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new qs(l);a.push(aa(e,h))}else{var f=Hp(n,r,c);a.push(f)}}return new Pa(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function jy(t,e,n){if(n instanceof sp&&(n=n.d_),"string"==typeof n){if(""===n)throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wa(e)&&-1!==n.indexOf("/"))throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Fs.ot(n));if(!qs.wt(r))throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return aa(t,new qs(r))}if(n instanceof mp)return aa(t,n.S_);throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+fp(n)+".")}function Ry(t,e){if(!Array.isArray(t)||0===t.length)throw new Is(Ts.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Is(Ts.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Py(t,e,n){if(!n.isEqual(e))throw new Is(Ts.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Dy(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var My=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(S.c)(e,t),e.prototype.Wf=function(t){return new Ss(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new mp(this.firestore,null,e)},e}(_y),Ly=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Fy=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(S.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Vy(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(Ey("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(by),Vy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Fy),Uy=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new Ly(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new Vy(n.Yf,n.Xf,r.key,r,new Ly(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new Is(Ts.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){return{type:"added",doc:new Vy(t.Yf,t.Xf,e.doc.key,e.doc,new Ly(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Vy(t.Yf,t.Xf,e.doc.key,e.doc,new Ly(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:qy(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();function qy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vs()}}function Hy(t,e){return t instanceof Fy&&e instanceof Fy?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Uy&&e instanceof Uy&&t.Yf===e.Yf&&Op(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var By=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(S.c)(e,t),e.prototype.Wf=function(t){return new Ss(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new mp(this.firestore,null,e)},e}(_y);function zy(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=dp(t,mp);var o=dp(t.firestore,py),s=jp(o);return e instanceof sp&&(e=e.d_),Gy(o,[("string"==typeof e||e instanceof ip?qp(s,"updateDoc",t.S_,e,n,r):Up(s,"updateDoc",t.S_,e)).F_(t.S_,wu.exists(!0))])}function Qy(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof sp&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||dy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(dy(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof mp)c=dp(t.firestore,py),l=Ha(t.S_.path),u={next:function(e){i[a]&&i[a](Wy(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=dp(t,_p);c=dp(d.firestore,py),l=d.C_;var p=new By(c);u={next:function(t){i[a]&&i[a](new Uy(c,p,d,t))},error:i[a+1],complete:i[a+2]},Cy(t.C_)}return function(t,e,n,r){var i=this,o=new rp(r),s=new dd(e,o,n);return t._s.Ps((function(){return Object(S.b)(i,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return e=ud,[4,cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return Object(S.b)(i,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return e=cd,[4,cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(yy(c),l,h,u)}function Gy(t,e){return function(t,e){var n=this,r=new Kc;return t._s.Ps((function(){return Object(S.b)(n,void 0,void 0,(function(){var n;return Object(S.d)(this,(function(i){switch(i.label){case 0:return n=Td,[4,uy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(yy(t),e)}function Wy(t,e,n){var r=n.docs.get(e.S_),i=new By(t);return new Fy(t,i,e.S_,r,new Ly(n.hasPendingWrites,n.fromCache),e.v_)}var Ky=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=jp(t)}return t.prototype.set=function(t,e,n){this.md();var r=Yy(t,this.Yf),i=Dy(r.v_,e,n),o=Rp(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,wu.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=Yy(t,this.Yf);return e instanceof sp&&(e=e.d_),o="string"==typeof e||e instanceof ip?qp(this.Id,"WriteBatch.update",s.S_,e,n,r):Up(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,wu.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=Yy(t,this.Yf);return this.Ed=this.Ed.concat(new Lu(e.S_,wu.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new Is(Ts.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Yy(t,e){if(t instanceof sp&&(t=t.d_),t.firestore!==e)throw new Is(Ts.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(S.c)(e,t),e.prototype.get=function(e){var n=this,r=Yy(e,this.Yf),i=new By(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new Fy(n.Yf,i,r.S_,t.Zf,new Ly(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=jp(t)}return t.prototype.get=function(t){var e=this,n=Yy(t,this.Yf),r=new My(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return vs();var i=t[0];if(i instanceof ma)return new by(e.Yf,r,n.S_,null,n.v_);if(i instanceof ga)return new by(e.Yf,r,i.key,i,n.v_);throw vs()}))},t.prototype.set=function(t,e,n){var r=Yy(t,this.Yf),i=Dy(r.v_,e,n),o=Rp(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Yy(t,this.Yf);return e instanceof sp&&(e=e.d_),o="string"==typeof e||e instanceof ip?qp(this.Id,"Transaction.update",s.S_,e,n,r):Up(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=Yy(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function $y(){if("undefined"==typeof Uint8Array)throw new Is(Ts.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Zy(){if("undefined"==typeof atob)throw new Is(Ts.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Jy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.fromBase64String=function(t){return Zy(),new e(Ss.fromBase64String(t))},e.fromUint8Array=function(t){return $y(),new e(Ss.fromUint8Array(t))},e.prototype.toBase64=function(){return Zy(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return $y(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(sp),tv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){my(t=dp(t,py));var n=yy(t),r=t.p_(),i=new np;return gy(n,i,new tp(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){my(t=dp(t,py));var e=yy(t),n=t.p_(),r=new np;return gy(e,r,new ep(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new Is(Ts.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Kc;return t.Bf.Tf((function(){return Object(S.b)(e,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(S.b)(this,void 0,void 0,(function(){return Object(S.d)(this,(function(e){switch(e.label){case 0:return $c.Kn()?[4,$c.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(jh(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),ev=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof cs||(i.Pd=e),i}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=dp(t,gp)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&ps("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Object(S.b)(e,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return[4,oy(t)];case 1:return e=r.sent(),[4,ay(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=ms(t);return e.Nh.delete(0),Df(e)}(n))]}}))}))}))}(yy(dp(this.d_,py)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Object(S.b)(e,void 0,void 0,(function(){var e,n;return Object(S.d)(this,(function(r){switch(r.label){case 0:return[4,oy(t)];case 1:return e=r.sent(),[4,ay(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(S.b)(this,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return(e=ms(t)).Nh.add(0),[4,Mf(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(yy(dp(this.d_,py)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&cp("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Kc;return t._s.Ps((function(){return Object(S.b)(e,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(r){switch(r.label){case 0:return e=Ad,[4,uy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(yy(dp(this.d_,py)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new rp(e);return t._s.Ps((function(){return Object(S.b)(n,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){ms(t).Wh.add(e),e.next()},[4,cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return Object(S.b)(n,void 0,void 0,(function(){var e;return Object(S.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){ms(t).Wh.delete(e)},[4,cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(yy(t=dp(t,py)),dy(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new Is(Ts.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new yv(this,wp(this.d_,t))}catch(t){throw av(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new sv(this,Ep(this.d_,t))}catch(t){throw av(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new fv(this,function(t,e){if(t=dp(t,gp),ap("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Is(Ts.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new _p(t,null,function(t){return new Ua(Fs.ct(),t)}(e))}(this.d_,t))}catch(t){throw av(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Kc;return t._s.Ps((function(){return Object(S.b)(n,void 0,void 0,(function(){var n;return Object(S.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return iy(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new Jp(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(yy(t),(function(n){return e(new Xy(t,n))}))}(this.d_,(function(n){return t(new rv(e,n))}))},e.prototype.batch=function(){var t=this;return yy(this.d_),new iv(new Ky(this.d_,(function(e){return Gy(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new Is(Ts.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Is(Ts.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(sp),nv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(S.c)(e,t),e.prototype.Wf=function(t){return new Jy(new Ss(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return sv.yd(e,this.firestore,null)},e}(_y),rv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new nv(e),r}return Object(S.c)(e,t),e.prototype.get=function(t){var e=this,n=vv(t);return this.d_.get(n).then((function(t){return new lv(e.Yf,new Fy(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=vv(t);return n?(up("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=vv(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(S.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=vv(t);return this.d_.delete(e),this},e}(sp),iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.set=function(t,e,n){var r=vv(t);return n?(up("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=vv(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(S.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=vv(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(sp),ov=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(S.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Vy(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new hv(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new nv(t),n),i.set(n,o)),o},e}(sp);ov.Vd=new WeakMap;var sv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new nv(e),r}return Object(S.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new Is(Ts.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new mp(n.d_,r,new qs(t)))},e.yd=function(t,n,r){return new e(n,new mp(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new yv(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new yv(this.firestore,wp(this.d_,t))}catch(t){throw av(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof sp&&(t=t.d_),t instanceof mp&&Cp(this.d_,t)},e.prototype.set=function(t,e){e=up("DocumentReference.set",e);try{return function(t,e,n){t=dp(t,mp);var r=dp(t.firestore,py),i=Dy(t.v_,e,n);return Gy(r,[Rp(jp(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,wu.Kt())])}(this.d_,t,e)}catch(t){throw av(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?zy(this.d_,t):zy.apply(void 0,Object(S.g)([this.d_,t,e],n))}catch(t){throw av(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Gy(dp((t=this.d_).firestore,py),[new Lu(t.S_,wu.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=uv(e),i=cv(e,(function(e){return new lv(t.firestore,new Fy(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return Qy(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=dp(t,mp);var e=dp(t.firestore,py),n=yy(e),r=new By(e);return function(t,e){var n=this,r=new Kc;return t._s.Ps((function(){return Object(S.b)(n,void 0,void 0,(function(){var n;return Object(S.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i;return Object(S.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ms(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof ga?n.resolve(i):i instanceof ma?n.resolve(null):n.reject(new Is(Ts.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=sl(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,sy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Fy(e,r,t.S_,n,new Ly(n instanceof ga&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=dp(t,mp);var e=dp(t.firestore,py);return ly(yy(e),t.S_,{source:"server"}).then((function(n){return Wy(e,t,n)}))}(this.d_):function(t){t=dp(t,mp);var e=dp(t.firestore,py);return ly(yy(e),t.S_).then((function(n){return Wy(e,t,n)}))}(this.d_)).then((function(t){return new lv(e.firestore,new Fy(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ov.gd(this.firestore,t)))},e}(sp);function av(t,e,n){return t.message=t.message.replace(e,n),t}function uv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!dy(r))return r}return{}}function cv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=dy(t[0])?t[0]:dy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var lv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new sv(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Hy(this.d_,t.d_)},e}(sp),hv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(lv),fv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new nv(e),r}return Object(S.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Ty(this.d_,function(t,e,n){var r=e,i=Ey("where",t);return new Iy(i,r,n)}(t,n,r)))}catch(t){throw av(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Ty(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=Ey("orderBy",t);return new Sy(r,n)}(t,n)))}catch(t){throw av(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Ty(this.d_,function(t){return pp("limit",t),new xy("limit",t,"F")}(t)))}catch(t){throw av(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Ty(this.d_,function(t){return pp("limitToLast",t),new xy("limitToLast",t,"L")}(t)))}catch(t){throw av(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ty(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ny("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw av(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ty(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ny("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw av(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ty(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ky("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw av(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Ty(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ky("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw av(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return Op(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=dp(t,_p);var e=dp(t.firestore,py),n=yy(e),r=new By(e);return function(t,e){var n=this,r=new Kc;return t._s.Ps((function(){return Object(S.b)(n,void 0,void 0,(function(){var n;return Object(S.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(S.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(S.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Wh(t,e,!0)];case 1:return a=u.sent(),r=new md(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=sl(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,sy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Uy(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=dp(t,_p);var e=dp(t.firestore,py),n=yy(e),r=new By(e);return hy(n,t.C_,{source:"server"}).then((function(n){return new Uy(e,r,t,n)}))}(this.d_):function(t){t=dp(t,_p);var e=dp(t.firestore,py),n=yy(e),r=new By(e);return Cy(t.C_),hy(n,t.C_).then((function(n){return new Uy(e,r,t,n)}))}(this.d_)).then((function(t){return new pv(e.firestore,new Uy(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=uv(e),i=cv(e,(function(e){return new pv(t.firestore,new Uy(t.firestore.d_,t.Xf,t.d_,e._d))}));return Qy(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ov.gd(this.firestore,t)))},e}(sp),dv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new hv(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(sp),pv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new fv(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new hv(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new dv(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new hv(n.Yf,r))}))},e.prototype.isEqual=function(t){return Hy(this.d_,t.d_)},e}(sp),yv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(S.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new sv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new sv(this.firestore,void 0===t?Ep(this.d_):Ep(this.d_,t))}catch(t){throw av(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=dp(t.firestore,py),r=Ep(t),i=Dy(t.v_,e);return Gy(n,[Rp(jp(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,wu.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new sv(e.firestore,t)}))},e.prototype.isEqual=function(t){return Cp(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ov.gd(this.firestore,t)))},e}(fv);function vv(t){return t instanceof sp&&(t=t.d_),dp(t,mp)}var gv,mv=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(ip.bind.apply(ip,Object(S.g)([void 0],e))))||this}return Object(S.c)(e,t),e.documentId=function(){return new e(Us.ht().rt())},e.prototype.isEqual=function(t){return t instanceof sp&&(t=t.d_),t instanceof ip&&this.d_.f_.isEqual(t.f_)},e}(sp),_v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(S.c)(e,t),e.serverTimestamp=function(){var t=new Mp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Pp("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lp("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fp("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Vp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(sp),bv={Firestore:ev,GeoPoint:Tp,Timestamp:Ds,Blob:Jy,Transaction:rv,WriteBatch:iv,DocumentReference:sv,DocumentSnapshot:lv,Query:fv,QueryDocumentSnapshot:hv,QuerySnapshot:pv,CollectionReference:yv,FieldPath:mv,FieldValue:_v,setLogLevel:function(t){ls.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function wv(t,e){return function(t,e=j.a){return new R.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Ev(t,e){return wv(t,e).pipe(Object(M.a)(t=>({payload:t,type:"query"})))}function Cv(t,e){return Ev(t,e).pipe(nn(void 0),rn(),Object(M.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Ov(t,e,n){return Cv(t,n).pipe(Q((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Tv(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Tv(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Tv(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),K(),Object(M.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Tv(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Iv(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new kt.a("firestore",(function(t){return function(t,e){return new ev(t,new py(t,e),new tv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},bv)))})(gv=xt.a),gv.registerVersion("@firebase/firestore","2.1.7");class Sv{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Cv(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(M.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(nn(void 0),rn(),rt(([t,e])=>e.length>0||!t),Object(M.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Q((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Iv(t);return Ov(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ev(this.query,this.afs.schedulers.outsideAngular).pipe(Object(M.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(q.a)(this.query.get(t)).pipe(Object(nt.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new xv(this.ref.doc(t),this.afs)}}class xv{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Pv(n,e);return new Sv(r,i,this.afs)}snapshotChanges(){return wv(this.ref,this.afs.schedulers.outsideAngular).pipe(nn(void 0),rn(),Object(M.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(M.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(q.a)(this.ref.get(t)).pipe(Object(nt.b)(this.afs.schedulers.insideAngular))}}class Nv{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Cv(this.query,this.afs.schedulers.outsideAngular).pipe(Object(M.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),rt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Cv(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Q((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Iv(t);return Ov(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ev(this.query,this.afs.schedulers.outsideAngular).pipe(Object(M.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(q.a)(this.query.get(t)).pipe(Object(nt.b)(this.afs.schedulers.insideAngular))}}const kv=new r.k("angularfire2.enableFirestorePersistence"),Av=new r.k("angularfire2.firestore.persistenceSettings"),jv=new r.k("angularfire2.firestore.settings"),Rv=new r.k("angularfire2.firestore.use-emulator");function Pv(t,e=(t=>t)){return{query:e(t),ref:t}}let Dv=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new et.e(o),this.keepUnstableUntilFirst=Object(et.i)(this.schedulers);const c=Object(et.h)(t,o,e);!ut.a.auth&&u&&Object(et.k)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(et.g)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!O(i)){const e=()=>{try{return Object(q.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(gv){return"undefined"!=typeof console&&console.warn(gv),Object(P.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(P.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Pv(n,e),o=this.schedulers.ngZone.run(()=>r);return new Sv(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Nv(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new xv(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275prov=Object(r.zb)({factory:function(){return new t(Object(r.Ab)(et.c),Object(r.Ab)(et.b,8),Object(r.Ab)(kv,8),Object(r.Ab)(jv,8),Object(r.Ab)(r.t),Object(r.Ab)(r.r),Object(r.Ab)(Av,8),Object(r.Ab)(Rv,8),Object(r.Ab)(at,8))},token:t,providedIn:"any"}),t})();class Mv{static enablePersistence(t){return{ngModule:Mv,providers:[{provide:kv,useValue:!0},{provide:Av,useValue:t}]}}}let Lv=(()=>{class t{constructor(t,e,n){this.db=t,this.storage=e,this.afs=n,this.basePath="/uploads"}pushFileToStorage(t){const e=`${this.basePath}/${t.file.name}`,n=this.storage.ref(e),r=this.storage.upload(e,t.file);var i;return r.snapshotChanges().pipe((i=()=>{n.getDownloadURL().subscribe(e=>{t.url=e,t.name=t.file.name,this.saveFileData(t),this.saveFileAfs(t)})},t=>t.lift(new k(i)))).subscribe(),r.percentageChanges()}saveFileAfs(t){return S.b(this,void 0,void 0,(function*(){try{yield this.afs.collection("upload").add({url:t.url,name:t.name})}catch(e){console.log(e)}}))}saveFileData(t){this.db.list(this.basePath).push(t)}getFiles(t){return this.db.list(this.basePath,e=>e.limitToLast(t))}deleteFile(t){this.deleteFileDatabase(t.key).then(()=>{this.deleteFileStorage(t.name)}).catch(t=>console.log(t))}deleteFileDatabase(t){return this.db.list(this.basePath).remove(t)}deleteFileStorage(t){this.storage.ref(this.basePath).child(t).delete()}}return t.ngInjectableDef=r.zb({factory:function(){return new t(r.Ab(Ct),r.Ab(Ye),r.Ab(Dv))},token:t,providedIn:"root"}),t})();var Fv=r.eb({encapsulation:0,styles:[[".image-upload[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:80px;cursor:pointer}"]],data:{}});function Vv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,5,"div",[["class","progress mt-2"]],null,null,null,null,null)),(t()(),r.gb(1,0,null,null,4,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["class","progress-bar progress-bar-info"],["role","progressbar"]],[[1,"aria-valuenow",0]],null,null,null,null)),r.sb(512,null,m,_,[r.h,r.n,r.v]),r.fb(3,278528,null,0,w,[m],{ngStyle:[0,"ngStyle"]},null),r.rb(4,{width:0}),(t()(),r.ub(5,null,[" ","% "]))],(function(t,e){var n=t(e,4,0,e.component.percentage+"%");t(e,3,0,n)}),(function(t,e){var n=e.component;t(e,1,0,r.kb(1,"",n.percentage,"")),t(e,5,0,n.percentage)}))}function Uv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,3,"div",[["class","image-upload"]],null,null,null,null,null)),(t()(),r.gb(1,0,null,null,0,"input",[["class","text-nowrap text-truncate"],["id","file-input"],["type","file"]],null,[[null,"change"]],(function(t,e,n){var r=!0;return"change"===e&&(r=!1!==t.component.selectFile(n)&&r),r}),null,null)),(t()(),r.gb(2,0,null,null,1,"button",[["class","btn btn-success btn-sm"]],[[8,"disabled",0]],[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.upload()&&r),r}),null,null)),(t()(),r.ub(-1,null,[" Upload "])),(t()(),r.V(16777216,null,null,1,null,Vv)),r.fb(5,16384,null,0,y,[r.E,r.A],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,5,0,e.component.currentFileUpload)}),(function(t,e){t(e,2,0,!e.component.selectedFiles)}))}class qv{constructor(t){this.uploadService=t}ngOnInit(){}deleteFileUpload(t){this.uploadService.deleteFile(t)}}var Hv=r.eb({encapsulation:0,styles:[[""]],data:{}});function Bv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(t()(),r.ub(1,null,["",""])),(t()(),r.gb(2,0,null,null,1,"button",[["class","btn btn-danger btn-sm"],["style","float: right"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=!1!==i.deleteFileUpload(i.fileUpload)&&r),r}),null,null)),(t()(),r.ub(-1,null,[" Delete\n"]))],null,(function(t,e){var n=e.component;t(e,0,0,r.kb(1,"",n.fileUpload.url,"")),t(e,1,0,n.fileUpload.name)}))}class zv{constructor(t){this.uploadService=t}ngOnInit(){this.uploadService.getFiles(6).snapshotChanges().pipe(Object(M.a)(t=>t.map(t=>Object.assign({key:t.payload.key},t.payload.val())))).subscribe(t=>{this.fileUploads=t})}}var Qv=r.eb({encapsulation:0,styles:[[""]],data:{}});function Gv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,3,"ul",[["class","list-group list-group-flush"]],null,null,null,null,null)),(t()(),r.gb(1,0,null,null,2,"li",[["class","list-group-item"]],null,null,null,null,null)),(t()(),r.gb(2,0,null,null,1,"app-upload-details",[],null,null,null,Bv,Hv)),r.fb(3,114688,null,0,qv,[Lv],{fileUpload:[0,"fileUpload"]},null)],(function(t,e){t(e,3,0,e.context.$implicit)}),null)}function Wv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,4,"div",[["class","card"]],null,null,null,null,null)),(t()(),r.gb(1,0,null,null,1,"div",[["class","card-header"]],null,null,null,null,null)),(t()(),r.ub(-1,null,["List of Files"])),(t()(),r.V(16777216,null,null,1,null,Gv)),r.fb(4,278528,null,0,d,[r.E,r.A,r.m],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,4,0,e.component.fileUploads)}),null)}var Kv=r.eb({encapsulation:0,styles:[[""]],data:{}});function Yv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,9,"div",[["class","container"],["style","width:600px"]],null,null,null,null,null)),(t()(),r.gb(1,0,null,null,2,"div",[],null,null,null,null,null)),(t()(),r.gb(2,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r.ub(3,null,["",""])),(t()(),r.gb(4,0,null,null,2,"div",[["class","my-3"]],null,null,null,null,null)),(t()(),r.gb(5,0,null,null,1,"app-upload-form",[],null,null,null,Uv,Fv)),r.fb(6,114688,null,0,I,[Lv],null,null),(t()(),r.gb(7,0,null,null,2,"div",[["class","my-2"]],null,null,null,null,null)),(t()(),r.gb(8,0,null,null,1,"app-upload-list",[],null,null,null,Wv,Qv)),r.fb(9,114688,null,0,zv,[Lv],null,null)],(function(t,e){t(e,6,0),t(e,9,0)}),(function(t,e){t(e,3,0,e.component.title)}))}function Xv(t){return r.vb(0,[(t()(),r.gb(0,0,null,null,1,"app-root",[],null,null,null,Yv,Kv)),r.fb(1,49152,null,0,o,[],null,null)],null,null)}var $v=r.cb("app-root",o,Xv,{},{},[]);let Zv=null;function Jv(){return Zv}const tg={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},eg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ng={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rg=(()=>{if(r.jb.Node)return r.jb.Node.prototype.contains||function(t){return!!(16&this.compareDocumentPosition(t))}})();class ig extends class extends class{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(t){this._attrToPropMap=t}}{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const t=this.createElement("div",document);if(null!=this.getStyle(t,"animationName"))this._animationPrefix="";else{const e=["Webkit","Moz","O","ms"];for(let n=0;n<e.length;n++)if(null!=this.getStyle(t,e[n]+"AnimationName")){this._animationPrefix="-"+e[n].toLowerCase()+"-";break}}const e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(e).forEach(n=>{null!=this.getStyle(t,n)&&(this._transitionEnd=e[n])})}catch(t){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(t){return t.getDistributedNodes()}resolveAndSetHref(t,e,n){t.href=null==n?e:e+"/../"+n}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return"function"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:""}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:""}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}{parse(t){throw new Error("parse not implemented")}static makeCurrent(){var t;t=new ig,Zv||(Zv=t)}hasProperty(t,e){return e in t}setProperty(t,e,n){t[e]=n}getProperty(t,e){return t[e]}invoke(t,e,n){t[e](...n)}logError(t){window.console&&(console.error?console.error(t):console.log(t))}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return tg}contains(t,e){return rg.call(t,e)}querySelector(t,e){return t.querySelector(e)}querySelectorAll(t,e){return t.querySelectorAll(e)}on(t,e,n){t.addEventListener(e,n,!1)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}createMouseEvent(t){const e=this.getDefaultDocument().createEvent("MouseEvent");return e.initEvent(t,!0,!0),e}createEvent(t){const e=this.getDefaultDocument().createEvent("Event");return e.initEvent(t,!0,!0),e}preventDefault(t){t.preventDefault(),t.returnValue=!1}isPrevented(t){return t.defaultPrevented||null!=t.returnValue&&!t.returnValue}getInnerHTML(t){return t.innerHTML}getTemplateContent(t){return"content"in t&&this.isTemplateElement(t)?t.content:null}getOuterHTML(t){return t.outerHTML}nodeName(t){return t.nodeName}nodeValue(t){return t.nodeValue}type(t){return t.type}content(t){return this.hasProperty(t,"content")?t.content:t}firstChild(t){return t.firstChild}nextSibling(t){return t.nextSibling}parentElement(t){return t.parentNode}childNodes(t){return t.childNodes}childNodesAsList(t){const e=t.childNodes,n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r];return n}clearNodes(t){for(;t.firstChild;)t.removeChild(t.firstChild)}appendChild(t,e){t.appendChild(e)}removeChild(t,e){t.removeChild(e)}replaceChild(t,e,n){t.replaceChild(e,n)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}insertBefore(t,e,n){t.insertBefore(n,e)}insertAllBefore(t,e,n){n.forEach(n=>t.insertBefore(n,e))}insertAfter(t,e,n){t.insertBefore(n,e.nextSibling)}setInnerHTML(t,e){t.innerHTML=e}getText(t){return t.textContent}setText(t,e){t.textContent=e}getValue(t){return t.value}setValue(t,e){t.value=e}getChecked(t){return t.checked}setChecked(t,e){t.checked=e}createComment(t){return this.getDefaultDocument().createComment(t)}createTemplate(t){const e=this.getDefaultDocument().createElement("template");return e.innerHTML=t,e}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createElementNS(t,e,n){return(n=n||this.getDefaultDocument()).createElementNS(t,e)}createTextNode(t,e){return(e=e||this.getDefaultDocument()).createTextNode(t)}createScriptTag(t,e,n){const r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(t,e),r}createStyleElement(t,e){const n=(e=e||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(t,e)),n}createShadowRoot(t){return t.createShadowRoot()}getShadowRoot(t){return t.shadowRoot}getHost(t){return t.host}clone(t){return t.cloneNode(!0)}getElementsByClassName(t,e){return t.getElementsByClassName(e)}getElementsByTagName(t,e){return t.getElementsByTagName(e)}classList(t){return Array.prototype.slice.call(t.classList,0)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}hasClass(t,e){return t.classList.contains(e)}setStyle(t,e,n){t.style[e]=n}removeStyle(t,e){t.style[e]=""}getStyle(t,e){return t.style[e]}hasStyle(t,e,n){const r=this.getStyle(t,e)||"";return n?r==n:r.length>0}tagName(t){return t.tagName}attributeMap(t){const e=new Map,n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r);e.set(t.name,t.value)}return e}hasAttribute(t,e){return t.hasAttribute(e)}hasAttributeNS(t,e,n){return t.hasAttributeNS(e,n)}getAttribute(t,e){return t.getAttribute(e)}getAttributeNS(t,e,n){return t.getAttributeNS(e,n)}setAttribute(t,e,n){t.setAttribute(e,n)}setAttributeNS(t,e,n,r){t.setAttributeNS(e,n,r)}removeAttribute(t,e){t.removeAttribute(e)}removeAttributeNS(t,e,n){t.removeAttributeNS(e,n)}templateAwareRoot(t){return this.isTemplateElement(t)?this.content(t):t}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}getBoundingClientRect(t){try{return t.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(t){return t.title}setTitle(t,e){t.title=e||""}elementMatches(t,e){return!!this.isElementNode(t)&&(t.matches&&t.matches(e)||t.msMatchesSelector&&t.msMatchesSelector(e)||t.webkitMatchesSelector&&t.webkitMatchesSelector(e))}isTemplateElement(t){return this.isElementNode(t)&&"TEMPLATE"===t.nodeName}isTextNode(t){return t.nodeType===Node.TEXT_NODE}isCommentNode(t){return t.nodeType===Node.COMMENT_NODE}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}hasShadowRoot(t){return null!=t.shadowRoot&&t instanceof HTMLElement}isShadowRoot(t){return t instanceof DocumentFragment}importIntoDoc(t){return document.importNode(this.templateAwareRoot(t),!0)}adoptNode(t){return document.adoptNode(t)}getHref(t){return t.getAttribute("href")}getEventKey(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ng.hasOwnProperty(e)&&(e=ng[e]))}return eg[e]||e}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=sg||(sg=document.querySelector("base"),sg)?sg.getAttribute("href"):null;return null==e?null:(n=e,og||(og=document.createElement("a")),og.setAttribute("href",n),"/"===og.pathname.charAt(0)?og.pathname:"/"+og.pathname);var n}resetBaseElement(){sg=null}getUserAgent(){return window.navigator.userAgent}setData(t,e,n){this.setAttribute(t,"data-"+e,n)}getData(t,e){return this.getAttribute(t,"data-"+e)}getComputedStyle(t){return getComputedStyle(t)}supportsWebAnimation(){return"function"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}setCookie(t,e){document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)}}let og,sg=null;function ag(){return!!window.history.pushState}const ug=new r.k("TRANSITION_ID"),cg=[{provide:r.b,useFactory:function(t,e,n){return()=>{n.get(r.c).donePromise.then(()=>{const n=Jv();Array.prototype.slice.apply(n.querySelectorAll(e,"style[ng-transition]")).filter(e=>n.getAttribute(e,"ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[ug,C,r.l],multi:!0}];class lg{static init(){Object(r.M)(new lg)}addToWindow(t){r.jb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.jb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.jb.getAllAngularRootElements=()=>t.getAllRootElements(),r.jb.frameworkStabilizers||(r.jb.frameworkStabilizers=[]),r.jb.frameworkStabilizers.push(t=>{const e=r.jb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Jv().isShadowRoot(e)?this.findTestabilityInTree(t,Jv().getHost(e),!0):this.findTestabilityInTree(t,Jv().parentElement(e),!0):null}}function hg(t,e){"undefined"!=typeof COMPILED&&COMPILED||((r.jb.ng=r.jb.ng||{})[t]=e)}const fg=(()=>({ApplicationRef:r.e,NgZone:r.r}))();function dg(t){return Object(r.J)(t)}const pg=new r.k("EventManagerPlugins");class yg{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}class vg{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Jv().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}class gg{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}class mg extends gg{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Jv().remove(t))}}const _g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bg=/%COMP%/g;function wg(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?wg(t,i,n):(i=i.replace(bg,t),n.push(i))}return n}function Eg(t){return e=>{!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}class Cg{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Og(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.F.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Sg(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.F.Native:case r.F.ShadowDom:return new xg(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=wg(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class Og{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(_g[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=_g[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=_g[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.x.DashCase?t.style.setProperty(e,n,i&r.x.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.x.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){Ig(e,"property"),t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return Ig(e,"listener"),"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Eg(n)):this.eventManager.addEventListener(t,e,Eg(n))}}const Tg=(()=>"@".charCodeAt(0))();function Ig(t,e){if(t.charCodeAt(0)===Tg)throw new Error(`Found the synthetic ${e} ${t}. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.`)}class Sg extends Og{constructor(t,e,n,r){super(t),this.component=n;const i=wg(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(bg,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(bg,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class xg extends Og{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.F.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=wg(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}const Ng=(()=>"undefined"!=typeof Zone&&Zone.__symbol__||function(t){return"__zone_symbol__"+t})(),kg=Ng("addEventListener"),Ag=Ng("removeEventListener"),jg={},Rg="__zone_symbol__propagationStopped",Pg=(()=>{const t="undefined"!=typeof Zone&&Zone[Ng("BLACK_LISTED_EVENTS")];if(t){const e={};return t.forEach(t=>{e[t]=t}),e}})(),Dg=function(t){return!!Pg&&Pg.hasOwnProperty(t)},Mg=function(t){const e=jg[t.type];if(!e)return;const n=this[e];if(!n)return;const r=[t];if(1===n.length){const t=n[0];return t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}{const e=n.slice();for(let n=0;n<e.length&&!0!==t[Rg];n++){const t=e[n];t.zone!==Zone.current?t.zone.run(t.handler,this,r):t.handler.apply(this,r)}}};class Lg extends vg{constructor(t,e,n){super(t),this.ngZone=e,n&&O(n)||this.patchEvent()}patchEvent(){if("undefined"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const t=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[Rg]=!0),t&&t.apply(this,arguments)}}supports(t){return!0}addEventListener(t,e,n){let i=n;if(!t[kg]||r.r.isInAngularZone()&&!Dg(e))t.addEventListener(e,i,!1);else{let n=jg[e];n||(n=jg[e]=Ng("ANGULAR"+e+"FALSE"));let r=t[n];const o=r&&r.length>0;r||(r=t[n]=[]);const s=Dg(e)?Zone.root:Zone.current;if(0===r.length)r.push({zone:s,handler:i});else{let t=!1;for(let e=0;e<r.length;e++)if(r[e].handler===i){t=!0;break}t||r.push({zone:s,handler:i})}o||t[kg](e,Mg,!1)}return()=>this.removeEventListener(t,e,i)}removeEventListener(t,e,n){let r=t[Ag];if(!r)return t.removeEventListener.apply(t,[e,n,!1]);let i=jg[e],o=i&&t[i];if(!o)return t.removeEventListener.apply(t,[e,n,!1]);let s=!1;for(let a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(t,[e,Mg,!1]):t.removeEventListener.apply(t,[e,n,!1])}}const Fg={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Vg=new r.k("HammerGestureConfig"),Ug=new r.k("HammerLoader");class qg{constructor(){this.events=[],this.overrides={}}buildHammer(t){const e=new Hammer(t,this.options);e.get("pinch").set({enable:!0}),e.get("rotate").set({enable:!0});for(const n in this.overrides)e.get(n).set(this.overrides[n]);return e}}class Hg extends vg{constructor(t,e,n,r){super(t),this._config=e,this.console=n,this.loader=r}supports(t){return!(!Fg.hasOwnProperty(t.toLowerCase())&&!this.isCustomEvent(t)||!window.Hammer&&!this.loader&&(this.console.warn(`The "${t}" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.`),1))}addEventListener(t,e,n){const r=this.manager.getZone();if(e=e.toLowerCase(),!window.Hammer&&this.loader){let r=!1,i=()=>{r=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(i=()=>{});r||(i=this.addEventListener(t,e,n))}).catch(()=>{this.console.warn(`The "${e}" event cannot be bound because the custom Hammer.JS loader failed.`),i=()=>{}}),()=>{i()}}return r.runOutsideAngular(()=>{const i=this._config.buildHammer(t),o=function(t){r.runGuarded((function(){n(t)}))};return i.on(e,o),()=>{i.off(e,o),"function"==typeof i.destroy&&i.destroy()}})}isCustomEvent(t){return this._config.events.indexOf(t)>-1}}const Bg=["alt","control","meta","shift"],zg={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};class Qg extends vg{constructor(t){super(t)}supports(t){return null!=Qg.parseEventName(t)}addEventListener(t,e,n){const r=Qg.parseEventName(e),i=Qg.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jv().onAndCancel(t,r.domEventName,i))}static parseEventName(t){const e=t.toLowerCase().split("."),n=e.shift();if(0===e.length||"keydown"!==n&&"keyup"!==n)return null;const r=Qg._normalizeKey(e.pop());let i="";if(Bg.forEach(t=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i+=t+".")}),i+=r,0!=e.length||0===r.length)return null;const o={};return o.domEventName=n,o.fullKey=i,o}static getEventFullKey(t){let e="",n=Jv().getEventKey(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Bg.forEach(r=>{r!=n&&(0,zg[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(t,e,n){return r=>{Qg.getEventFullKey(r)===t&&n.runGuarded(()=>e(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}class Gg{}class Wg extends Gg{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.z.NONE:return e;case r.z.HTML:return e instanceof Yg?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"HTML"),Object(r.S)(this._doc,String(e)));case r.z.STYLE:return e instanceof Xg?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"Style"),Object(r.T)(e));case r.z.SCRIPT:if(e instanceof $g)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"Script"),new Error("unsafe value used in a script context");case r.z.URL:return e instanceof Jg||e instanceof Zg?e.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(e,"URL"),Object(r.U)(String(e)));case r.z.RESOURCE_URL:if(e instanceof Jg)return e.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(e,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(t,e){if(t instanceof Kg)throw new Error(`Required a safe ${e}, got a ${t.getTypeName()} (see http://g.co/ng/security#xss)`)}bypassSecurityTrustHtml(t){return new Yg(t)}bypassSecurityTrustStyle(t){return new Xg(t)}bypassSecurityTrustScript(t){return new $g(t)}bypassSecurityTrustUrl(t){return new Zg(t)}bypassSecurityTrustResourceUrl(t){return new Jg(t)}}class Kg{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Yg extends Kg{getTypeName(){return"HTML"}}class Xg extends Kg{getTypeName(){return"Style"}}class $g extends Kg{getTypeName(){return"Script"}}class Zg extends Kg{getTypeName(){return"URL"}}class Jg extends Kg{getTypeName(){return"ResourceURL"}}const tm=[{provide:r.t,useValue:"browser"},{provide:r.u,useValue:function(){ig.makeCurrent(),lg.init()},multi:!0},{provide:s,useClass:class extends s{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Jv().getLocation(),this._history=Jv().getHistory()}getBaseHrefFromDOM(){return Jv().getBaseHref(this._doc)}onPopState(t){Jv().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Jv().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){ag()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){ag()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[C]},{provide:C,useFactory:function(){return document},deps:[]}],em=Object(r.H)(r.L,"browser",tm);function nm(){return new r.i}class rm{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:rm,providers:[{provide:r.a,useValue:t.appId},{provide:ug,useExisting:r.a},cg]}}}"undefined"!=typeof window&&window;var im=r.db(i,[o],(function(t){return r.pb([r.qb(512,r.g,r.O,[[8,[$v]],[3,r.g],r.p]),r.qb(5120,r.o,r.ab,[[3,r.o]]),r.qb(4608,l,h,[r.o,[2,c]]),r.qb(5120,r.W,r.bb,[r.r]),r.qb(4608,r.f,r.f,[]),r.qb(5120,r.a,r.X,[]),r.qb(5120,r.m,r.Y,[]),r.qb(5120,r.n,r.Z,[]),r.qb(4608,Gg,Wg,[C]),r.qb(6144,r.y,null,[Gg]),r.qb(4608,Vg,qg,[]),r.qb(5120,pg,(function(t,e,n,r,i,o,s,a){return[new Lg(t,e,n),new Qg(r),new Hg(i,o,s,a)]}),[C,r.r,r.t,C,C,Vg,r.P,[2,Ug]]),r.qb(4608,yg,yg,[pg,r.r]),r.qb(135680,mg,mg,[C]),r.qb(4608,Cg,Cg,[yg,mg,r.a]),r.qb(6144,r.w,null,[Cg]),r.qb(6144,gg,null,[mg]),r.qb(4608,r.B,r.B,[r.r]),r.qb(5120,et.d,et.h,[et.c,r.r,[2,et.b]]),r.qb(4608,Ct,Ct,[et.c,[2,et.b],[2,wt],r.t,r.r,[2,Et],[2,at]]),r.qb(4608,Ye,Ye,[et.c,[2,et.b],[2,Ge],r.t,r.r,[2,We],[2,Ke]]),r.qb(4608,Dv,Dv,[et.c,[2,et.b],[2,kv],[2,jv],r.t,r.r,[2,Av],[2,Rv],[2,at]]),r.qb(1073742336,E,E,[]),r.qb(1024,r.i,nm,[]),r.qb(1024,r.b,(function(t){return[(e=t,hg("probe",dg),hg("coreTokens",Object.assign({},fg,(e||[]).reduce((t,e)=>(t[e.name]=e.token,t),{}))),()=>dg)];var e}),[[2,r.q]]),r.qb(512,r.c,r.c,[[2,r.b]]),r.qb(131584,r.e,r.e,[r.r,r.P,r.l,r.i,r.g,r.c]),r.qb(1073742336,r.d,r.d,[r.e]),r.qb(1073742336,rm,rm,[[3,rm]]),r.qb(1073742336,et.a,et.a,[r.t]),r.qb(1073742336,Ot,Ot,[]),r.qb(1073742336,Xe,Xe,[]),r.qb(1073742336,$e,$e,[]),r.qb(1073742336,Mv,Mv,[]),r.qb(1073742336,i,i,[]),r.qb(256,r.N,!0,[]),r.qb(256,et.c,{apiKey:"AIzaSyCRpAiTvNcZoWhHMvD0i4Pz8qwx-579Azs",authDomain:"angular-test-df9ae.firebaseapp.com",databaseURL:"https://angular-test-df9ae.firebaseio.com",projectId:"angular-test-df9ae",storageBucket:"angular-test-df9ae.appspot.com",messagingSenderId:"840450488804",appId:"1:840450488804:web:5397cded205e35fcaaaff1",measurementId:"G-CFJH5RJMXK"},[]),r.qb(256,et.b,void 0,[])])}));Object(r.I)(),em().bootstrapModuleFactory(im).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);